{"version":3,"file":"vendor.react-moveable.25492d255717489f845a.js","mappings":"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","sources":["webpack://Gwaphics/./node_modules/react-moveable/dist/moveable.esm.js"],"sourcesContent":["/*\nCopyright (c) 2019 Daybrush\nname: react-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-moveable\nversion: 0.20.10\n*/\nimport { createElement, PureComponent } from 'react';\nimport { prefixCSS, prefixNames, ref, refs } from 'framework-utils';\nimport getAgent from '@egjs/agent';\nimport { isUndefined, isObject, splitBracket, splitUnit, isFunction, hasClass, find, isString, isArray, dot, addClass, findIndex, removeClass } from '@daybrush/utils';\nimport { createIdentityMatrix, plus, minus, caculate, convertPositionMatrix, invert, getRad, getOrigin, multiplies, createOriginMatrix, convertDimension, multiply, convertMatrixtoCSS, ignoreDimension, convertCSStoMatrix, createScaleMatrix, average, rotate, createRotateMatrix, createWarpMatrix, multiplyCSS } from '@moveable/matrix';\nimport styled from 'react-css-styled';\nimport Dragger from '@daybrush/drag';\nimport DragScroll from '@scena/dragscroll';\nimport ChildrenDiffer from '@egjs/children-differ';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction getSVGCursor(scale, degree) {\n  return \"data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\" + 32 * scale + \"px\\\" height=\\\"\" + 32 * scale + \"px\\\" viewBox=\\\"0 0 32 32\\\" ><path d=\\\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"1.2\\\" fill=\\\"black\\\" stroke=\\\"white\\\" style=\\\"transform:rotate(\" + degree + \"deg);transform-origin: 16px 16px\\\"></path></svg>\";\n}\n\nfunction getCursorCSS(degree) {\n  var x1 = getSVGCursor(1, degree);\n  var x2 = getSVGCursor(2, degree);\n  var degree45 = Math.round(degree / 45) * 45 % 180;\n  var defaultCursor = degree45 === 135 ? \"nwse-resize\" : degree45 === 45 ? \"nesw-resize\" : degree45 === 90 ? \"ew-resize\" : \"ns-resize\"; // 135\n  // tslint:disable-next-line: max-line-length\n\n  return \"cursor:\" + defaultCursor + \";cursor: url('\" + x1 + \"') 16 16, \" + defaultCursor + \";cursor: -webkit-image-set(url('\" + x1 + \"') 1x, url('\" + x2 + \"') 2x) 16 16, \" + defaultCursor + \";\";\n}\n\nvar agent = getAgent();\nvar IS_WEBKIT = agent.os.name.indexOf(\"ios\") > -1 || agent.browser.name.indexOf(\"safari\") > -1;\nvar PREFIX = \"moveable-\";\nvar MOVEABLE_CSS = prefixCSS(PREFIX, \"\\n{\\n\\tposition: fixed;\\n\\twidth: 1px;\\n\\theight: 1px;\\n\\tleft: 0;\\n\\ttop: 0;\\n    z-index: 3000;\\n    --zoom: 1;\\n    --zoompx: 1px;\\n}\\n.control-box {\\n    z-index: 0;\\n}\\n.line, .control {\\n\\tleft: 0;\\n    top: 0;\\n    will-change: transform;\\n}\\n.control {\\n\\tposition: absolute;\\n\\twidth: 14px;\\n\\theight: 14px;\\n\\tborder-radius: 50%;\\n\\tborder: 2px solid #fff;\\n\\tbox-sizing: border-box;\\n\\tbackground: #4af;\\n\\tmargin-top: -7px;\\n    margin-left: -7px;\\n    width: calc(14 * var(--zoompx));\\n    height: calc(14 * var(--zoompx));\\n    margin-top: calc(-7 * var(--zoompx));\\n    margin-left: calc(-7 * var(--zoompx));\\n    border: calc(2 * var(--zoompx)) solid #fff;\\n    z-index: 10;\\n}\\n.padding {\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    width: 100px;\\n    height: 100px;\\n    transform-origin: 0 0;\\n}\\n.line {\\n\\tposition: absolute;\\n\\twidth: 1px;\\n    height: 1px;\\n    width: var(--zoompx);\\n    height: var(--zoompx);\\n\\tbackground: #4af;\\n\\ttransform-origin: 0px 50%;\\n}\\n.line.dashed {\\n    box-sizing: border-box;\\n    background: transparent;\\n}\\n.line.dashed.horizontal {\\n    border-top: 1px dashed #4af;\\n    border-top: var(--zoompx) dashed #4af;\\n}\\n.line.dashed.vertical {\\n    border-left: 1px dashed #4af;\\n    border-left: var(--zoompx) dashed #4af;\\n}\\n.line.dashed:before {\\n    position: absolute;\\n    content: attr(data-size);\\n    color: #4af;\\n    font-size: 12px;\\n    font-weight: bold;\\n}\\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\\n    left: 50%;\\n    transform: translateX(-50%);\\n    bottom: 5px;\\n}\\n.line.dashed.vertical:before, .line.gap.vertical:before {\\n    top: 50%;\\n    transform: translateY(-50%);\\n    left: 5px;\\n}\\n.line.rotation-line {\\n\\theight: 40px;\\n    width: 1px;\\n    transform-origin: 50% calc(100% - 0.5px);\\n    top: -40px;\\n    width: var(--zoompx);\\n    height: calc(40 * var(--zoompx));\\n    top: calc(-40 * var(--zoompx));\\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\\n}\\n.line.rotation-line .control {\\n\\tborder-color: #4af;\\n\\tbackground:#fff;\\n    cursor: alias;\\n    left: 50%;\\n}\\n.line.vertical {\\n    transform: translateX(-50%);\\n}\\n.line.horizontal {\\n    transform: translateY(-50%);\\n}\\n.line.vertical.bold {\\n    width: 2px;\\n    width: calc(2 * var(--zoompx));\\n}\\n.line.horizontal.bold {\\n    height: 2px;\\n    height: calc(2 * var(--zoompx));\\n}\\n\\n.line.gap {\\n    background: #f55;\\n}\\n.line.gap:before {\\n    position: absolute;\\n    content: attr(data-size);\\n    color: #f55;\\n    font-size: 12px;\\n    font-weight: bold;\\n}\\n.control.origin {\\n\\tborder-color: #f55;\\n\\tbackground: #fff;\\n\\twidth: 12px;\\n\\theight: 12px;\\n\\tmargin-top: -6px;\\n    margin-left: -6px;\\n    width: calc(12 * var(--zoompx));\\n    height: calc(12 * var(--zoompx));\\n    margin-top: calc(-6 * var(--zoompx));\\n    margin-left: calc(-6 * var(--zoompx));\\n\\tpointer-events: none;\\n}\\n\" + [0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (degree) {\n  return \"\\n.direction[data-rotation=\\\"\" + degree + \"\\\"] {\\n\\t\" + getCursorCSS(degree) + \"\\n}\\n\";\n}).join(\"\\n\") + \"\\n.group {\\n    z-index: -1;\\n}\\n.area {\\n    position: absolute;\\n}\\n.area-pieces {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    display: none;\\n}\\n.area.avoid {\\n    pointer-events: none;\\n}\\n.area.avoid+.area-pieces {\\n    display: block;\\n}\\n.area-piece {\\n    position: absolute;\\n}\\n.control.clip-control {\\n    background: #6d6;\\n    cursor: pointer;\\n}\\n.line.clip-line {\\n    background: #6e6;\\n    cursor: pointer;\\n}\\n\" + (IS_WEBKIT ? \":global svg *:before {\\n\\tcontent:\\\"\\\";\\n\\ttransform-origin: inherit;\\n}\" : \"\") + \"\\n\");\nvar NEARBY_POS = [[0, 1, 2], [1, 0, 3], [2, 0, 3], [3, 1, 2]];\nvar TINY_NUM = 0.0000001;\nvar MIN_SCALE = 0.000000001;\nvar MAX_NUM = Math.pow(10, 10);\nvar MIN_NUM = -MAX_NUM;\nvar DIRECTIONS = [\"nw\", \"ne\", \"sw\", \"se\", \"n\", \"w\", \"s\", \"e\"];\nvar DIRECTION_INDEXES = {\n  n: [0, 1],\n  s: [2, 3],\n  w: [2, 0],\n  e: [1, 3],\n  nw: [0],\n  ne: [1],\n  sw: [2],\n  se: [3]\n};\nvar DIRECTION_ROTATIONS = {\n  n: 0,\n  s: 180,\n  w: 270,\n  e: 90,\n  nw: 315,\n  ne: 45,\n  sw: 225,\n  se: 135\n};\n\nfunction multiply2(pos1, pos2) {\n  return [pos1[0] * pos2[0], pos1[1] * pos2[1]];\n}\nfunction prefix() {\n  var classNames = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    classNames[_i] = arguments[_i];\n  }\n\n  return prefixNames.apply(void 0, [PREFIX].concat(classNames));\n}\nfunction createIdentityMatrix3() {\n  return createIdentityMatrix(3);\n}\nfunction getTransformMatrix(transform) {\n  if (!transform || transform === \"none\") {\n    return [1, 0, 0, 1, 0, 0];\n  }\n\n  if (isObject(transform)) {\n    return transform;\n  }\n\n  var value = splitBracket(transform).value;\n  return value.split(/s*,\\s*/g).map(function (v) {\n    return parseFloat(v);\n  });\n}\nfunction getAbsoluteMatrix(matrix, n, origin) {\n  return multiplies(n, createOriginMatrix(origin, n), matrix, createOriginMatrix(origin.map(function (a) {\n    return -a;\n  }), n));\n}\nfunction measureSVGSize(el, unit, isHorizontal) {\n  if (unit === \"%\") {\n    var viewBox = getSVGViewBox(el.ownerSVGElement);\n    return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\n  }\n\n  return 1;\n}\nfunction getBeforeTransformOrigin(el) {\n  var relativeOrigin = getTransformOrigin(getComputedStyle(el, \":before\"));\n  return relativeOrigin.map(function (o, i) {\n    var _a = splitUnit(o),\n        value = _a.value,\n        unit = _a.unit;\n\n    return value * measureSVGSize(el, unit, i === 0);\n  });\n}\nfunction getTransformOrigin(style) {\n  var transformOrigin = style.transformOrigin;\n  return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\n}\nfunction getOffsetInfo(el, lastParent, isParent) {\n  var body = document.body;\n  var target = !el || isParent ? el : el.parentElement;\n  var isEnd = false;\n  var position = \"relative\";\n\n  while (target && target !== body) {\n    if (lastParent === target) {\n      isEnd = true;\n    }\n\n    var style = getComputedStyle(target);\n    var transform = style.transform;\n    position = style.position;\n\n    if (position !== \"static\" || transform && transform !== \"none\") {\n      break;\n    }\n\n    target = target.parentElement;\n    position = \"relative\";\n  }\n\n  return {\n    isStatic: position === \"static\",\n    isEnd: isEnd || !target || target === body,\n    offsetParent: target || body\n  };\n}\nfunction getOffsetPosInfo(el, container, style, isFixed) {\n  var _a;\n\n  var tagName = el.tagName.toLowerCase();\n  var offsetLeft = el.offsetLeft;\n  var offsetTop = el.offsetTop;\n\n  if (isFixed) {\n    var containerClientRect = (container || document.documentElement).getBoundingClientRect();\n    offsetLeft -= containerClientRect.left;\n    offsetTop -= containerClientRect.top;\n  } // svg\n\n\n  var isSVG = isUndefined(offsetLeft);\n  var hasOffset = !isSVG;\n  var origin; // inner svg element\n\n  if (!hasOffset && tagName !== \"svg\") {\n    origin = IS_WEBKIT ? getBeforeTransformOrigin(el) : getTransformOrigin(style).map(function (pos) {\n      return parseFloat(pos);\n    });\n    hasOffset = true;\n\n    if (tagName === \"g\") {\n      offsetLeft = 0;\n      offsetTop = 0;\n    } else {\n      _a = getSVGGraphicsOffset(el, origin), offsetLeft = _a[0], offsetTop = _a[1], origin[0] = _a[2], origin[1] = _a[3];\n    }\n  } else {\n    origin = getTransformOrigin(style).map(function (pos) {\n      return parseFloat(pos);\n    });\n  }\n\n  return {\n    isSVG: isSVG,\n    hasOffset: hasOffset,\n    offset: [offsetLeft, offsetTop],\n    origin: origin\n  };\n}\nfunction getMatrixStackInfo(target, container, prevMatrix) {\n  var el = target;\n  var matrixes = [];\n  var isEnd = false;\n  var is3d = false;\n  var n = 3;\n  var transformOrigin;\n  var targetMatrix;\n  var offsetContainer = getOffsetInfo(container, container, true).offsetParent;\n\n  if (prevMatrix) {\n    isEnd = target === container;\n\n    if (prevMatrix.length > 10) {\n      is3d = true;\n      n = 4;\n    }\n\n    container = target.parentElement;\n  }\n\n  while (el && !isEnd) {\n    var style = getComputedStyle(el);\n    var tagName = el.tagName.toLowerCase();\n    var position = style.position;\n    var isFixed = position === \"fixed\";\n    var styleTransform = style.transform;\n    var matrix = convertCSStoMatrix(getTransformMatrix(styleTransform)); // convert 3 to 4\n\n    var length = matrix.length;\n\n    if (!is3d && length === 16) {\n      is3d = true;\n      n = 4;\n      var matrixesLength = matrixes.length;\n\n      for (var i = 0; i < matrixesLength; ++i) {\n        matrixes[i] = convertDimension(matrixes[i], 3, 4);\n      }\n    }\n\n    if (is3d && length === 9) {\n      matrix = convertDimension(matrix, 3, 4);\n    }\n\n    var _a = getOffsetPosInfo(el, container, style, isFixed),\n        hasOffset = _a.hasOffset,\n        isSVG = _a.isSVG,\n        origin = _a.origin,\n        offsetPos = _a.offset;\n\n    var offsetLeft = offsetPos[0],\n        offsetTop = offsetPos[1];\n\n    if (tagName === \"svg\" && targetMatrix) {\n      matrixes.push( // scale matrix for svg's SVGElements.\n      getSVGMatrix(el, n), createIdentityMatrix(n));\n    }\n\n    var _b = getOffsetInfo(el, container),\n        offsetParent = _b.offsetParent,\n        isOffsetEnd = _b.isEnd,\n        isStatic = _b.isStatic;\n\n    if (IS_WEBKIT && hasOffset && !isSVG && isStatic && position === \"relative\") {\n      offsetLeft -= offsetParent.offsetLeft;\n      offsetTop -= offsetParent.offsetTop;\n      isEnd = isEnd || isOffsetEnd;\n    }\n\n    var parentClientLeft = 0;\n    var parentClientTop = 0;\n\n    if (hasOffset && offsetContainer !== offsetParent) {\n      // border\n      parentClientLeft = offsetParent.clientLeft;\n      parentClientTop = offsetParent.clientTop;\n    }\n\n    matrixes.push( // absolute matrix\n    getAbsoluteMatrix(matrix, n, origin), // offset matrix (offsetPos + clientPos(border))\n    createOriginMatrix(hasOffset ? [offsetLeft - el.scrollLeft + parentClientLeft, offsetTop - el.scrollTop + parentClientTop] : [el, origin], n));\n\n    if (!targetMatrix) {\n      targetMatrix = matrix;\n    }\n\n    if (!transformOrigin) {\n      transformOrigin = origin;\n    }\n\n    if (isEnd || isFixed) {\n      break;\n    } else {\n      el = offsetParent;\n      isEnd = isOffsetEnd;\n    }\n  }\n\n  if (!targetMatrix) {\n    targetMatrix = createIdentityMatrix(n);\n  }\n\n  if (!transformOrigin) {\n    transformOrigin = [0, 0];\n  }\n\n  return {\n    offsetContainer: offsetContainer,\n    matrixes: matrixes,\n    targetMatrix: targetMatrix,\n    transformOrigin: transformOrigin,\n    is3d: is3d\n  };\n}\nfunction caculateMatrixStack(target, container, rootContainer, prevMatrix, prevRootMatrix, prevN) {\n  var _a = getMatrixStackInfo(target, container, prevMatrix),\n      matrixes = _a.matrixes,\n      is3d = _a.is3d,\n      prevTargetMatrix = _a.targetMatrix,\n      transformOrigin = _a.transformOrigin,\n      offsetContainer = _a.offsetContainer;\n\n  var _b = getMatrixStackInfo(offsetContainer, rootContainer, prevRootMatrix),\n      rootMatrixes = _b.matrixes,\n      isRoot3d = _b.is3d;\n\n  var n = isRoot3d || is3d ? 4 : 3;\n  var isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\n  var originalContainer = container || document.body;\n  var allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN, n) : createIdentityMatrix(n);\n  var targetMatrix = prevTargetMatrix;\n  var rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN, n) : createIdentityMatrix(n);\n  var beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN, n) : createIdentityMatrix(n);\n  var offsetMatrix = createIdentityMatrix(n);\n  var length = matrixes.length;\n  var endContainer = getOffsetInfo(originalContainer, originalContainer, true).offsetParent;\n  rootMatrixes.reverse();\n  matrixes.reverse();\n\n  if (!is3d && isRoot3d) {\n    targetMatrix = convertDimension(targetMatrix, 3, 4);\n    matrixes.forEach(function (matrix, i) {\n      matrixes[i] = convertDimension(matrix, 3, 4);\n    });\n  }\n\n  if (is3d && !isRoot3d) {\n    rootMatrixes.forEach(function (matrix, i) {\n      rootMatrixes[i] = convertDimension(matrix, 3, 4);\n    });\n  } // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\n  // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\n  // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\n\n\n  if (!prevRootMatrix) {\n    rootMatrixes.forEach(function (matrix) {\n      rootMatrix = multiply(rootMatrix, matrix, n);\n    });\n  }\n\n  matrixes.forEach(function (matrix, i) {\n    var _a;\n\n    if (length - 2 === i) {\n      // length - 3\n      beforeMatrix = allMatrix.slice();\n    }\n\n    if (length - 1 === i) {\n      // length - 2\n      offsetMatrix = allMatrix.slice();\n    } // caculate for SVGElement\n\n\n    if (isObject(matrix[n - 1])) {\n      _a = getSVGOffset(matrix[n - 1], endContainer, n, matrix[2 * n - 1], allMatrix, matrixes[i + 1]), matrix[n - 1] = _a[0], matrix[2 * n - 1] = _a[1];\n    }\n\n    allMatrix = multiply(allMatrix, matrix, n);\n  });\n  var isMatrix3d = !isSVGGraphicElement && is3d;\n\n  if (!targetMatrix) {\n    targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\n  }\n\n  var transform = (isMatrix3d ? \"matrix3d\" : \"matrix\") + \"(\" + convertMatrixtoCSS(isSVGGraphicElement && targetMatrix.length === 16 ? convertDimension(targetMatrix, 4, 3) : targetMatrix) + \")\";\n  rootMatrix = ignoreDimension(rootMatrix, n, n);\n  return [rootMatrix, beforeMatrix, offsetMatrix, allMatrix, targetMatrix, transform, transformOrigin, is3d || isRoot3d];\n}\nfunction getSVGViewBox(el) {\n  var clientWidth = el.clientWidth;\n  var clientHeight = el.clientHeight;\n  var viewBox = el.viewBox;\n  var baseVal = viewBox && viewBox.baseVal || {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  };\n  return {\n    x: baseVal.x,\n    y: baseVal.y,\n    width: baseVal.width || clientWidth,\n    height: baseVal.height || clientHeight\n  };\n}\nfunction getSVGMatrix(el, n) {\n  var clientWidth = el.clientWidth;\n  var clientHeight = el.clientHeight;\n\n  var _a = getSVGViewBox(el),\n      viewBoxWidth = _a.width,\n      viewBoxHeight = _a.height;\n\n  var scaleX = clientWidth / viewBoxWidth;\n  var scaleY = clientHeight / viewBoxHeight;\n  var preserveAspectRatio = el.preserveAspectRatio.baseVal; // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\n\n  var align = preserveAspectRatio.align; // 1 : meet 2: slice\n\n  var meetOrSlice = preserveAspectRatio.meetOrSlice;\n  var svgOrigin = [0, 0];\n  var scale = [scaleX, scaleY];\n  var translate = [0, 0];\n\n  if (align !== 1) {\n    var xAlign = (align - 2) % 3;\n    var yAlign = Math.floor((align - 2) / 3);\n    svgOrigin[0] = viewBoxWidth * xAlign / 2;\n    svgOrigin[1] = viewBoxHeight * yAlign / 2;\n    var scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\n    scale[0] = scaleDimension;\n    scale[1] = scaleDimension;\n    translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\n    translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\n  }\n\n  var scaleMatrix = createScaleMatrix(scale, n);\n  scaleMatrix[n - 1] = translate[0], scaleMatrix[2 * n - 1] = translate[1];\n  return getAbsoluteMatrix(scaleMatrix, n, svgOrigin);\n}\nfunction getSVGGraphicsOffset(el, origin) {\n  if (!el.getBBox) {\n    return [0, 0];\n  }\n\n  var bbox = el.getBBox();\n  var viewBox = getSVGViewBox(el.ownerSVGElement);\n  var left = bbox.x - viewBox.x;\n  var top = bbox.y - viewBox.y;\n  return [left, top, origin[0] - left, origin[1] - top];\n}\nfunction caculatePosition(matrix, pos, n) {\n  return caculate(matrix, convertPositionMatrix(pos, n), n);\n}\nfunction caculatePoses(matrix, width, height, n) {\n  return [[0, 0], [width, 0], [0, height], [width, height]].map(function (pos) {\n    return caculatePosition(matrix, pos, n);\n  });\n}\nfunction getRect(poses) {\n  var posesX = poses.map(function (pos) {\n    return pos[0];\n  });\n  var posesY = poses.map(function (pos) {\n    return pos[1];\n  });\n  var left = Math.min.apply(Math, posesX);\n  var top = Math.min.apply(Math, posesY);\n  var right = Math.max.apply(Math, posesX);\n  var bottom = Math.max.apply(Math, posesY);\n  var rectWidth = right - left;\n  var rectHeight = bottom - top;\n  return {\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom,\n    width: rectWidth,\n    height: rectHeight\n  };\n}\nfunction caculateRect(matrix, width, height, n) {\n  var poses = caculatePoses(matrix, width, height, n);\n  return getRect(poses);\n}\nfunction getSVGOffset(el, container, n, origin, beforeMatrix, absoluteMatrix) {\n  var _a;\n\n  var _b = getSize(el),\n      width = _b[0],\n      height = _b[1];\n\n  var containerClientRect = container.getBoundingClientRect();\n  var rect = el.getBoundingClientRect();\n  var rectLeft = rect.left - containerClientRect.left + container.scrollLeft;\n  var rectTop = rect.top - containerClientRect.top + container.scrollTop;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  var mat = multiplies(n, beforeMatrix, absoluteMatrix);\n\n  var _c = caculateRect(mat, width, height, n),\n      prevLeft = _c.left,\n      prevTop = _c.top,\n      prevWidth = _c.width,\n      prevHeight = _c.height;\n\n  var posOrigin = caculatePosition(mat, origin, n);\n  var prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\n  var rectOrigin = [rectLeft + prevOrigin[0] * rectWidth / prevWidth, rectTop + prevOrigin[1] * rectHeight / prevHeight];\n  var offset = [0, 0];\n  var count = 0;\n\n  while (++count < 10) {\n    var inverseBeforeMatrix = invert(beforeMatrix, n);\n    _a = minus(caculatePosition(inverseBeforeMatrix, rectOrigin, n), caculatePosition(inverseBeforeMatrix, posOrigin, n)), offset[0] = _a[0], offset[1] = _a[1];\n    var mat2 = multiplies(n, beforeMatrix, createOriginMatrix(offset, n), absoluteMatrix);\n\n    var _d = caculateRect(mat2, width, height, n),\n        nextLeft = _d.left,\n        nextTop = _d.top;\n\n    var distLeft = nextLeft - rectLeft;\n    var distTop = nextTop - rectTop;\n\n    if (Math.abs(distLeft) < 2 && Math.abs(distTop) < 2) {\n      break;\n    }\n\n    rectOrigin[0] -= distLeft;\n    rectOrigin[1] -= distTop;\n  }\n\n  return offset.map(function (p) {\n    return Math.round(p);\n  });\n}\nfunction caculateMoveablePosition(matrix, origin, width, height) {\n  var is3d = matrix.length === 16;\n  var n = is3d ? 4 : 3;\n\n  var _a = caculatePoses(matrix, width, height, n),\n      _b = _a[0],\n      x1 = _b[0],\n      y1 = _b[1],\n      _c = _a[1],\n      x2 = _c[0],\n      y2 = _c[1],\n      _d = _a[2],\n      x3 = _d[0],\n      y3 = _d[1],\n      _e = _a[3],\n      x4 = _e[0],\n      y4 = _e[1];\n\n  var _f = caculatePosition(matrix, origin, n),\n      originX = _f[0],\n      originY = _f[1];\n\n  var left = Math.min(x1, x2, x3, x4);\n  var top = Math.min(y1, y2, y3, y4);\n  var right = Math.max(x1, x2, x3, x4);\n  var bottom = Math.max(y1, y2, y3, y4);\n  x1 = x1 - left || 0;\n  x2 = x2 - left || 0;\n  x3 = x3 - left || 0;\n  x4 = x4 - left || 0;\n  y1 = y1 - top || 0;\n  y2 = y2 - top || 0;\n  y3 = y3 - top || 0;\n  y4 = y4 - top || 0;\n  originX = originX - left || 0;\n  originY = originY - top || 0;\n  var center = [(x1 + x2 + x3 + x4) / 4, (y1 + y2 + y3 + y4) / 4];\n  var pos1Rad = getRad(center, [x1, y1]);\n  var pos2Rad = getRad(center, [x2, y2]);\n  var direction = pos1Rad < pos2Rad && pos2Rad - pos1Rad < Math.PI || pos1Rad > pos2Rad && pos2Rad - pos1Rad < -Math.PI ? 1 : -1;\n  return [[left, top, right, bottom], [originX, originY], [[x1, y1], [x2, y2], [x3, y3], [x4, y4]], direction];\n}\nfunction getDistSize(vec) {\n  return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\nfunction getDiagonalSize(pos1, pos2) {\n  return getDistSize([pos2[0] - pos1[0], pos2[1] - pos1[1]]);\n}\nfunction getLineStyle(pos1, pos2, rad) {\n  if (rad === void 0) {\n    rad = getRad(pos1, pos2);\n  }\n\n  var width = getDiagonalSize(pos1, pos2);\n  return {\n    transform: \"translateY(-50%) translate(\" + pos1[0] + \"px, \" + pos1[1] + \"px) rotate(\" + rad + \"rad)\",\n    width: width + \"px\"\n  };\n}\nfunction getControlTransform(rotation) {\n  var poses = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    poses[_i - 1] = arguments[_i];\n  }\n\n  var length = poses.length;\n  var x = poses.reduce(function (prev, pos) {\n    return prev + pos[0];\n  }, 0) / length;\n  var y = poses.reduce(function (prev, pos) {\n    return prev + pos[1];\n  }, 0) / length;\n  return {\n    transform: \"translate(\" + x + \"px, \" + y + \"px) rotate(\" + rotation + \"rad)\"\n  };\n}\nfunction getCSSSize(target) {\n  var style = window.getComputedStyle(target);\n  return [parseFloat(style.width), parseFloat(style.height)];\n}\nfunction getSize(target, style, isOffset, isBoxSizing) {\n  if (style === void 0) {\n    style = window.getComputedStyle(target);\n  }\n\n  if (isBoxSizing === void 0) {\n    isBoxSizing = isOffset || style.boxSizing === \"border-box\";\n  }\n\n  var width = target.offsetWidth;\n  var height = target.offsetHeight;\n  var hasOffset = !isUndefined(width);\n\n  if ((isOffset || isBoxSizing) && hasOffset) {\n    return [width, height];\n  }\n\n  width = target.clientWidth;\n  height = target.clientHeight;\n\n  if (!hasOffset && !width && !height) {\n    var bbox = target.getBBox();\n    return [bbox.width, bbox.height];\n  }\n\n  if (isOffset || isBoxSizing) {\n    var borderLeft = parseFloat(style.borderLeftWidth) || 0;\n    var borderRight = parseFloat(style.borderRightWidth) || 0;\n    var borderTop = parseFloat(style.borderTopWidth) || 0;\n    var borderBottom = parseFloat(style.borderBottomWidth) || 0;\n    return [width + borderLeft + borderRight, height + borderTop + borderBottom];\n  } else {\n    var paddingLeft = parseFloat(style.paddingLeft) || 0;\n    var paddingRight = parseFloat(style.paddingRight) || 0;\n    var paddingTop = parseFloat(style.paddingTop) || 0;\n    var paddingBottom = parseFloat(style.paddingBottom) || 0;\n    return [width - paddingLeft - paddingRight, height - paddingTop - paddingBottom];\n  }\n}\nfunction getRotationRad(poses, direction) {\n  return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\n}\nfunction getTargetInfo(moveableElement, target, container, parentContainer, rootContainer, state) {\n  var _a, _b, _c, _d, _e;\n\n  var left = 0;\n  var top = 0;\n  var right = 0;\n  var bottom = 0;\n  var origin = [0, 0];\n  var poses = [[0, 0], [0, 0], [0, 0], [0, 0]];\n  var rootMatrix = createIdentityMatrix3();\n  var offsetMatrix = createIdentityMatrix3();\n  var beforeMatrix = createIdentityMatrix3();\n  var matrix = createIdentityMatrix3();\n  var targetMatrix = createIdentityMatrix3();\n  var width = 0;\n  var height = 0;\n  var transformOrigin = [0, 0];\n  var direction = 1;\n  var beforeDirection = 1;\n  var is3d = false;\n  var targetTransform = \"\";\n  var beforeOrigin = [0, 0];\n  var targetClientRect = resetClientRect();\n  var containerClientRect = resetClientRect();\n  var moveableClientRect = resetClientRect();\n  var rotation = 0;\n  var prevMatrix = state ? state.beforeMatrix : undefined;\n  var prevRootMatrix = state ? state.rootMatrix : undefined;\n  var prevN = state ? state.is3d ? 4 : 3 : undefined;\n\n  if (target) {\n    if (state) {\n      width = state.width;\n      height = state.height;\n    } else {\n      var style = getComputedStyle(target);\n      width = target.offsetWidth;\n      height = target.offsetHeight;\n\n      if (isUndefined(width)) {\n        _a = getSize(target, style, true), width = _a[0], height = _a[1];\n      }\n    }\n\n    _b = caculateMatrixStack(target, container, rootContainer, prevMatrix, prevRootMatrix, prevN), rootMatrix = _b[0], beforeMatrix = _b[1], offsetMatrix = _b[2], matrix = _b[3], targetMatrix = _b[4], targetTransform = _b[5], transformOrigin = _b[6], is3d = _b[7];\n    _c = caculateMoveablePosition(matrix, transformOrigin, width, height), _d = _c[0], left = _d[0], top = _d[1], right = _d[2], bottom = _d[3], origin = _c[1], poses = _c[2], direction = _c[3];\n    var n = is3d ? 4 : 3;\n    var beforePos = [0, 0];\n    _e = caculateMoveablePosition(offsetMatrix, plus(transformOrigin, getOrigin(targetMatrix, n)), width, height), beforePos = _e[0], beforeOrigin = _e[1], beforeDirection = _e[3];\n    beforeOrigin = [beforeOrigin[0] + beforePos[0] - left, beforeOrigin[1] + beforePos[1] - top];\n    targetClientRect = getClientRect(target);\n    containerClientRect = getClientRect(getOffsetInfo(parentContainer, parentContainer, true).offsetParent || document.body, true);\n\n    if (moveableElement) {\n      moveableClientRect = getClientRect(moveableElement);\n    }\n\n    rotation = getRotationRad([poses[0], poses[1]], direction);\n  }\n\n  return {\n    rotation: rotation,\n    targetClientRect: targetClientRect,\n    containerClientRect: containerClientRect,\n    moveableClientRect: moveableClientRect,\n    beforeDirection: beforeDirection,\n    direction: direction,\n    target: target,\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom,\n    pos1: poses[0],\n    pos2: poses[1],\n    pos3: poses[2],\n    pos4: poses[3],\n    width: width,\n    height: height,\n    rootMatrix: rootMatrix,\n    beforeMatrix: beforeMatrix,\n    offsetMatrix: offsetMatrix,\n    targetMatrix: targetMatrix,\n    matrix: matrix,\n    targetTransform: targetTransform,\n    is3d: is3d,\n    beforeOrigin: beforeOrigin,\n    origin: origin,\n    transformOrigin: transformOrigin\n  };\n}\nfunction resetClientRect() {\n  return {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    width: 0,\n    height: 0,\n    clientLeft: 0,\n    clientTop: 0,\n    clientWidth: 0,\n    clientHeight: 0,\n    scrollWidth: 0,\n    scrollHeight: 0\n  };\n}\nfunction getClientRect(el, isExtends) {\n  var _a = el.getBoundingClientRect(),\n      left = _a.left,\n      width = _a.width,\n      top = _a.top,\n      bottom = _a.bottom,\n      right = _a.right,\n      height = _a.height;\n\n  var rect = {\n    left: left,\n    right: right,\n    top: top,\n    bottom: bottom,\n    width: width,\n    height: height\n  };\n\n  if (isExtends) {\n    rect.clientLeft = el.clientLeft;\n    rect.clientTop = el.clientTop;\n    rect.clientWidth = el.clientWidth;\n    rect.clientHeight = el.clientHeight;\n    rect.scrollWidth = el.scrollWidth;\n    rect.scrollHeight = el.scrollHeight;\n  }\n\n  return rect;\n}\nfunction getDirection(target) {\n  if (!target) {\n    return;\n  }\n\n  var direciton = target.getAttribute(\"data-direction\");\n\n  if (!direciton) {\n    return;\n  }\n\n  var dir = [0, 0];\n  direciton.indexOf(\"w\") > -1 && (dir[0] = -1);\n  direciton.indexOf(\"e\") > -1 && (dir[0] = 1);\n  direciton.indexOf(\"n\") > -1 && (dir[1] = -1);\n  direciton.indexOf(\"s\") > -1 && (dir[1] = 1);\n  return dir;\n}\nfunction getAbsolutePoses(poses, dist) {\n  return [plus(dist, poses[0]), plus(dist, poses[1]), plus(dist, poses[2]), plus(dist, poses[3])];\n}\nfunction getAbsolutePosesByState(_a) {\n  var left = _a.left,\n      top = _a.top,\n      pos1 = _a.pos1,\n      pos2 = _a.pos2,\n      pos3 = _a.pos3,\n      pos4 = _a.pos4;\n  return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\n}\nfunction roundSign(num) {\n  return Math.round(num % 1 === -0.5 ? num - 1 : num);\n}\nfunction throttle(num, unit) {\n  if (!unit) {\n    return num;\n  }\n\n  return Math.round(num / unit) * unit;\n}\nfunction throttleArray(nums, unit) {\n  nums.forEach(function (_, i) {\n    nums[i] = throttle(nums[i], unit);\n  });\n  return nums;\n}\nfunction unset(self, name) {\n  if (self[name]) {\n    self[name].unset();\n    self[name] = null;\n  }\n}\nfunction getOrientationDirection(pos, pos1, pos2) {\n  return (pos[0] - pos1[0]) * (pos2[1] - pos1[1]) - (pos[1] - pos1[1]) * (pos2[0] - pos1[0]);\n}\nfunction isInside(pos, pos1, pos2, pos3, pos4) {\n  var k1 = getOrientationDirection(pos, pos1, pos2);\n  var k2 = getOrientationDirection(pos, pos2, pos3);\n  var k3 = getOrientationDirection(pos, pos3, pos1);\n  var k4 = getOrientationDirection(pos, pos2, pos3);\n  var k5 = getOrientationDirection(pos, pos3, pos4);\n  var k6 = getOrientationDirection(pos, pos4, pos2);\n  var signs1 = [k1, k2, k3];\n  var signs2 = [k4, k5, k6];\n\n  if (signs1.every(function (sign) {\n    return sign >= 0;\n  }) || signs1.every(function (sign) {\n    return sign <= 0;\n  }) || signs2.every(function (sign) {\n    return sign >= 0;\n  }) || signs2.every(function (sign) {\n    return sign <= 0;\n  })) {\n    return true;\n  }\n\n  return false;\n}\nfunction fillParams(moveable, e, params) {\n  var datas = e.datas;\n\n  if (!datas.datas) {\n    datas.datas = {};\n  }\n\n  return __assign({}, params, {\n    target: moveable.state.target,\n    clientX: e.clientX,\n    clientY: e.clientY,\n    inputEvent: e.inputEvent,\n    currentTarget: moveable,\n    datas: datas.datas\n  });\n}\nfunction triggerEvent(moveable, name, params, isManager) {\n  if (isManager) {\n    MoveableManager.prototype.triggerEvent.call(moveable, name, params);\n  }\n\n  return moveable.triggerEvent(name, params);\n}\nfunction getComputedStyle(el, pseudoElt) {\n  return window.getComputedStyle(el, pseudoElt);\n}\nfunction filterAbles(ables, methods, triggerAblesSimultaneously) {\n  var enabledAbles = {};\n  var ableGroups = {};\n  return ables.filter(function (able) {\n    var name = able.name;\n\n    if (enabledAbles[name] || !methods.some(function (method) {\n      return able[method];\n    })) {\n      return false;\n    }\n\n    if (!triggerAblesSimultaneously && able.ableGroup) {\n      if (ableGroups[able.ableGroup]) {\n        return false;\n      }\n\n      ableGroups[able.ableGroup] = true;\n    }\n\n    enabledAbles[name] = true;\n    return true;\n  });\n}\nfunction getKeepRatioHeight(width, isWidth, ratio) {\n  return width * (isWidth ? ratio : 1 / ratio);\n}\nfunction getKeepRatioWidth(height, isWidth, ratio) {\n  return height * (isWidth ? 1 / ratio : ratio);\n}\nfunction equals(a1, a2) {\n  return a1 === a2 || a1 == null && a2 == null;\n}\nfunction selectValue() {\n  var values = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    values[_i] = arguments[_i];\n  }\n\n  var length = values.length - 1;\n\n  for (var i = 0; i < length; ++i) {\n    var value = values[i];\n\n    if (!isUndefined(value)) {\n      return value;\n    }\n  }\n\n  return values[length];\n}\nfunction groupBy(arr, func) {\n  var groups = [];\n  var groupKeys = [];\n  arr.forEach(function (el, index) {\n    var groupKey = func(el, index, arr);\n    var keyIndex = groupKeys.indexOf(groupKey);\n    var group = groups[keyIndex] || [];\n\n    if (keyIndex === -1) {\n      groupKeys.push(groupKey);\n      groups.push(group);\n    }\n\n    group.push(el);\n  });\n  return groups;\n}\nfunction groupByMap(arr, func) {\n  var groups = [];\n  var groupKeys = {};\n  arr.forEach(function (el, index) {\n    var groupKey = func(el, index, arr);\n    var group = groupKeys[groupKey];\n\n    if (!group) {\n      group = [];\n      groupKeys[groupKey] = group;\n      groups.push(group);\n    }\n\n    group.push(el);\n  });\n  return groups;\n}\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\nfunction maxOffset() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  args.sort(function (a, b) {\n    return Math.abs(b) - Math.abs(a);\n  });\n  return args[0];\n}\nfunction minOffset() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  args.sort(function (a, b) {\n    return Math.abs(a) - Math.abs(b);\n  });\n  return args[0];\n}\nfunction caculateInversePosition(matrix, pos, n) {\n  return caculate(invert(matrix, n), convertPositionMatrix(pos, n), n);\n}\nfunction convertDragDist(state, e) {\n  var _a;\n\n  var is3d = state.is3d,\n      rootMatrix = state.rootMatrix;\n  var n = is3d ? 4 : 3;\n  _a = caculateInversePosition(rootMatrix, [e.distX, e.distY], n), e.distX = _a[0], e.distY = _a[1];\n  return e;\n}\nfunction caculatePadding(matrix, pos, transformOrigin, origin, n) {\n  return minus(caculatePosition(matrix, plus(transformOrigin, pos), n), origin);\n}\nfunction checkSize(targetSize, compareSize, isMax) {\n  return [[compareSize[0], compareSize[0] * targetSize[1] / targetSize[0]], [compareSize[1] * targetSize[0] / targetSize[1], compareSize[1]]].filter(function (size) {\n    return size.every(function (value, i) {\n      return isMax ? value <= compareSize[i] : value >= compareSize[i];\n    });\n  })[0] || targetSize;\n}\nfunction caculateBoundSize(size, minSize, maxSize, keepRatio) {\n  if (!keepRatio) {\n    return size.map(function (value, i) {\n      return Math.min(maxSize[i], Math.max(value, minSize[i]));\n    });\n  }\n\n  var width = size[0],\n      height = size[1]; // width : height = minWidth : minHeight;\n\n  var _a = checkSize(size, minSize, false),\n      minWidth = _a[0],\n      minHeight = _a[1];\n\n  var _b = checkSize(size, maxSize, true),\n      maxWidth = _b[0],\n      maxHeight = _b[1];\n\n  if (width < minWidth || height < minHeight) {\n    width = minWidth;\n    height = minHeight;\n  } else if (width > maxWidth || height > maxHeight) {\n    width = maxWidth;\n    height = maxHeight;\n  }\n\n  return [width, height];\n}\n\nfunction triggerRenderStart(moveable, isGroup, e) {\n  var params = fillParams(moveable, e, {\n    isPinch: !!e.isPinch\n  });\n  var eventAffix = isGroup ? \"Group\" : \"\";\n\n  if (isGroup) {\n    params.targets = moveable.props.targets;\n  }\n\n  triggerEvent(moveable, \"onRender\" + eventAffix + \"Start\", params);\n}\nfunction triggerRender(moveable, isGroup, e) {\n  var params = fillParams(moveable, e, {\n    isPinch: !!e.isPinch\n  });\n  var eventAffix = isGroup ? \"Group\" : \"\";\n\n  if (isGroup) {\n    params.targets = moveable.props.targets;\n  }\n\n  triggerEvent(moveable, \"onRender\" + eventAffix, params);\n}\nfunction triggerRenderEnd(moveable, isGroup, e) {\n  var params = fillParams(moveable, e, {\n    isPinch: !!e.sPinch,\n    isDrag: e.isDrag\n  });\n  var eventAffix = isGroup ? \"Group\" : \"\";\n\n  if (isGroup) {\n    params.targets = moveable.props.targets;\n  }\n\n  triggerEvent(moveable, \"onRender\" + eventAffix + \"End\", params);\n}\n\nfunction triggerAble(moveable, ableType, eventOperation, eventAffix, eventType, e, isReqeust) {\n  var isStart = eventType === \"Start\";\n\n  if (isStart && eventAffix.indexOf(\"Control\") > -1 && !e.isRequest && moveable.areaElement === e.inputEvent.target) {\n    return false;\n  }\n\n  var eventName = \"\" + eventOperation + eventAffix + eventType;\n  var conditionName = \"\" + eventOperation + eventAffix + \"Condition\";\n  var isEnd = eventType === \"End\";\n  var isAfter = eventType.indexOf(\"After\") > -1;\n\n  if (isStart) {\n    moveable.updateRect(eventType, true, false);\n  }\n\n  if (eventType === \"\" && !isAfter) {\n    convertDragDist(moveable.state, e);\n  }\n\n  var isGroup = eventAffix.indexOf(\"Group\") > -1;\n  var ables = moveable[ableType];\n\n  if (!ables.length) {\n    return false;\n  }\n\n  var events = ables.filter(function (able) {\n    return able[eventName];\n  });\n  var datas = e.datas;\n  var renderDatas = datas.render || (datas.render = {});\n\n  var renderEvent = __assign({}, e, {\n    datas: renderDatas,\n    originalDatas: datas\n  });\n\n  var results = events.filter(function (able) {\n    var condition = isStart && able[conditionName];\n    var ableName = able.name;\n    var nextDatas = datas[ableName] || (datas[ableName] = {});\n\n    if (!condition || condition(e, moveable)) {\n      return able[eventName](moveable, __assign({}, e, {\n        datas: nextDatas,\n        originalDatas: datas\n      }));\n    }\n\n    return false;\n  });\n  var isUpdate = results.length;\n\n  if (isStart) {\n    if (events.length && !isUpdate) {\n      moveable.state.dragger = null;\n\n      if (moveable.moveables) {\n        moveable.moveables.forEach(function (childeMoveable) {\n          childeMoveable.state.dragger = null;\n        });\n      }\n\n      return false;\n    }\n\n    triggerRenderStart(moveable, isGroup, renderEvent);\n  } else if (isEnd) {\n    triggerRenderEnd(moveable, isGroup, renderEvent);\n  } else if (isUpdate) {\n    triggerRender(moveable, isGroup, renderEvent);\n  }\n\n  if (isEnd) {\n    moveable.state.dragger = null;\n  }\n\n  if (moveable.isUnmounted) {\n    return false;\n  }\n\n  if (!isStart && isUpdate) {\n    if (results.some(function (able) {\n      return able.updateRect;\n    }) && !isGroup) {\n      moveable.updateRect(eventType, false, false);\n    } else {\n      moveable.updateRect(eventType, true, false);\n    }\n  }\n\n  if ((!isStart && isUpdate || isEnd && !isUpdate) && !isReqeust) {\n    moveable.forceUpdate();\n  }\n\n  if (!isStart && !isEnd && !isAfter && isUpdate) {\n    triggerAble(moveable, ableType, eventOperation, eventAffix, eventType + \"After\", e);\n  }\n}\nfunction getTargetAbleDragger(moveable, moveableTarget, eventAffix) {\n  var controlBox = moveable.controlBox.getElement();\n  var targets = [];\n  targets.push(controlBox);\n\n  if (!moveable.props.dragArea) {\n    targets.push(moveableTarget);\n  }\n\n  var startFunc = function (e) {\n    var eventTarget = e.inputEvent.target;\n    var areaElement = moveable.areaElement;\n    return eventTarget === areaElement || !moveable.isMoveableElement(eventTarget) || eventTarget.className.indexOf(\"moveable-area\") > -1 || eventTarget.className.indexOf(\"moveable-padding\") > -1;\n  };\n\n  return getAbleDragger(moveable, targets, \"targetAbles\", eventAffix, {\n    dragstart: startFunc,\n    pinchstart: startFunc\n  });\n}\nfunction getAbleDragger(moveable, target, ableType, eventAffix, conditionFunctions) {\n  if (conditionFunctions === void 0) {\n    conditionFunctions = {};\n  }\n\n  var _a = moveable.props,\n      pinchOutside = _a.pinchOutside,\n      pinchThreshold = _a.pinchThreshold;\n  var options = {\n    container: window,\n    pinchThreshold: pinchThreshold,\n    pinchOutside: pinchOutside\n  };\n  [\"drag\", \"pinch\"].forEach(function (eventOperation) {\n    [\"Start\", \"\", \"End\"].forEach(function (eventType) {\n      var eventName = \"\" + eventOperation + eventType.toLowerCase();\n\n      options[eventName] = function (e) {\n        if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\n          return false;\n        }\n\n        return triggerAble(moveable, ableType, eventOperation, eventAffix, eventType, e);\n      };\n    });\n  });\n  return new Dragger(target, options);\n}\n\nvar ControlBoxElement = styled(\"div\", MOVEABLE_CSS);\n\nfunction renderLine(direction, pos1, pos2, index) {\n  var rad = getRad(pos1, pos2);\n  var rotation = direction ? throttle(rad / Math.PI * 180, 15) % 180 : -1;\n  return createElement(\"div\", {\n    key: \"line\" + index,\n    className: prefix(\"line\", \"direction\", direction),\n    \"data-rotation\": rotation,\n    \"data-direction\": direction,\n    style: getLineStyle(pos1, pos2, rad)\n  });\n}\n\nvar MoveableManager =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(MoveableManager, _super);\n\n  function MoveableManager() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      container: null,\n      target: null,\n      beforeMatrix: createIdentityMatrix3(),\n      matrix: createIdentityMatrix3(),\n      targetMatrix: createIdentityMatrix3(),\n      offsetMatrix: createIdentityMatrix3(),\n      targetTransform: \"\",\n      is3d: false,\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0,\n      transformOrigin: [0, 0],\n      direction: 1,\n      beforeDirection: 1,\n      beforeOrigin: [0, 0],\n      origin: [0, 0],\n      pos1: [0, 0],\n      pos2: [0, 0],\n      pos3: [0, 0],\n      pos4: [0, 0],\n      renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]],\n      targetClientRect: resetClientRect(),\n      containerClientRect: resetClientRect(),\n      moveableClientRect: resetClientRect(),\n      rotation: 0\n    };\n    _this.targetAbles = [];\n    _this.controlAbles = [];\n    _this.isUnmounted = false;\n    return _this;\n  }\n\n  var __proto = MoveableManager.prototype;\n\n  __proto.render = function () {\n    var props = this.props;\n    var state = this.state;\n    var edge = props.edge,\n        parentPosition = props.parentPosition,\n        className = props.className,\n        propsTarget = props.target,\n        zoom = props.zoom;\n    this.checkUpdate();\n    this.updateRenderPoses();\n\n    var _a = parentPosition || {\n      left: 0,\n      top: 0\n    },\n        parentLeft = _a.left,\n        parentTop = _a.top;\n\n    var left = state.left,\n        top = state.top,\n        stateTarget = state.target,\n        direction = state.direction,\n        renderPoses = state.renderPoses;\n    var groupTargets = props.targets;\n    var isDisplay = (groupTargets && groupTargets.length || propsTarget) && stateTarget;\n    return createElement(ControlBoxElement, {\n      ref: ref(this, \"controlBox\"),\n      className: prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\") + \" \" + className,\n      style: {\n        \"position\": \"absolute\",\n        \"display\": isDisplay ? \"block\" : \"none\",\n        \"transform\": \"translate(\" + (left - parentLeft) + \"px, \" + (top - parentTop) + \"px) translateZ(50px)\",\n        \"--zoom\": zoom,\n        \"--zoompx\": zoom + \"px\"\n      }\n    }, this.renderAbles(), renderLine(edge ? \"n\" : \"\", renderPoses[0], renderPoses[1], 0), renderLine(edge ? \"e\" : \"\", renderPoses[1], renderPoses[3], 1), renderLine(edge ? \"w\" : \"\", renderPoses[0], renderPoses[2], 2), renderLine(edge ? \"s\" : \"\", renderPoses[2], renderPoses[3], 3));\n  };\n\n  __proto.componentDidMount = function () {\n    this.controlBox.getElement();\n    var props = this.props;\n    var parentMoveable = props.parentMoveable,\n        container = props.container;\n    this.updateEvent(props);\n\n    if (!container && !parentMoveable) {\n      this.updateRect(\"End\", false, true);\n    }\n  };\n\n  __proto.componentDidUpdate = function (prevProps) {\n    this.updateEvent(prevProps);\n  };\n\n  __proto.componentWillUnmount = function () {\n    this.isUnmounted = true;\n    unset(this, \"targetDragger\");\n    unset(this, \"controlDragger\");\n  };\n\n  __proto.getContainer = function () {\n    var _a = this.props,\n        parentMoveable = _a.parentMoveable,\n        container = _a.container;\n    return container || parentMoveable && parentMoveable.getContainer() || this.controlBox.getElement().parentElement;\n  };\n\n  __proto.isMoveableElement = function (target) {\n    return target && (target.getAttribute(\"class\") || \"\").indexOf(PREFIX) > -1;\n  };\n\n  __proto.dragStart = function (e) {\n    if (this.targetDragger) {\n      this.targetDragger.onDragStart(e);\n    }\n\n    return this;\n  };\n\n  __proto.hitTest = function (el) {\n    var rect;\n\n    if (el instanceof Element) {\n      var clientRect = el.getBoundingClientRect();\n      rect = {\n        left: clientRect.left,\n        top: clientRect.top,\n        width: clientRect.width,\n        height: clientRect.height\n      };\n    } else {\n      rect = __assign({\n        width: 0,\n        height: 0\n      }, el);\n    }\n\n    var _a = this.state.targetClientRect,\n        rectLeft = _a.left,\n        rectTop = _a.top,\n        rectWidth = _a.width,\n        rectHeight = _a.height;\n    var left = rect.left,\n        top = rect.top,\n        width = rect.width,\n        height = rect.height;\n    var right = left + width;\n    var bottom = top + height;\n    var rectRight = rectLeft + rectWidth;\n    var rectBottom = rectTop + rectHeight;\n    var testLeft = Math.max(rectLeft, left);\n    var testRight = Math.min(rectRight, right);\n    var testTop = Math.max(rectTop, top);\n    var testBottom = Math.min(rectBottom, bottom);\n\n    if (testRight < testLeft || testBottom < testTop) {\n      return 0;\n    }\n\n    var rectSize = (Math.min(rectRight, right) - Math.max(left, rectLeft)) * (Math.min(rectBottom, bottom) - Math.max(rectTop, top));\n    return Math.min(100, (testRight - testLeft) * (testBottom - testTop) / rectSize * 100);\n  };\n\n  __proto.isInside = function (clientX, clientY) {\n    var _a = this.state,\n        pos1 = _a.pos1,\n        pos2 = _a.pos2,\n        pos3 = _a.pos3,\n        pos4 = _a.pos4,\n        target = _a.target,\n        targetClientRect = _a.targetClientRect;\n\n    if (!target) {\n      return false;\n    }\n\n    var left = targetClientRect.left,\n        top = targetClientRect.top;\n    var pos = [clientX - left, clientY - top];\n    return isInside(pos, pos1, pos2, pos3, pos4);\n  };\n\n  __proto.updateRect = function (type, isTarget, isSetState) {\n    if (isSetState === void 0) {\n      isSetState = true;\n    }\n\n    var props = this.props;\n    var parentMoveable = props.parentMoveable;\n    var state = this.state;\n    var target = state.target || this.props.target;\n    var container = this.getContainer();\n    var rootContainer = parentMoveable ? parentMoveable.props.rootContainer : props.rootContainer;\n    this.updateState(getTargetInfo(this.controlBox && this.controlBox.getElement(), target, container, container, rootContainer || container, isTarget ? state : undefined), parentMoveable ? false : isSetState);\n  };\n\n  __proto.updateEvent = function (prevProps) {\n    var controlBoxElement = this.controlBox.getElement();\n    var hasTargetAble = this.targetAbles.length;\n    var hasControlAble = this.controlAbles.length;\n    var props = this.props;\n    var target = props.dragTarget || props.target;\n    var prevTarget = prevProps.dragTarget || prevProps.target;\n    var dragArea = props.dragArea;\n    var prevDragArea = prevProps.dragArea;\n    var isTargetChanged = !dragArea && prevTarget !== target;\n    var isUnset = !hasTargetAble && this.targetDragger || isTargetChanged || prevDragArea !== dragArea;\n\n    if (isUnset) {\n      unset(this, \"targetDragger\");\n      this.updateState({\n        dragger: null\n      });\n    }\n\n    if (!hasControlAble) {\n      unset(this, \"controlDragger\");\n    }\n\n    if (target && hasTargetAble && !this.targetDragger) {\n      this.targetDragger = getTargetAbleDragger(this, target, \"\");\n    }\n\n    if (!this.controlDragger && hasControlAble) {\n      this.controlDragger = getAbleDragger(this, controlBoxElement, \"controlAbles\", \"Control\");\n    }\n\n    if (isUnset) {\n      this.unsetAbles();\n    }\n  };\n\n  __proto.isDragging = function () {\n    return (this.targetDragger ? this.targetDragger.isFlag() : false) || (this.controlDragger ? this.controlDragger.isFlag() : false);\n  };\n\n  __proto.updateTarget = function (type) {\n    this.updateRect(type, true);\n  };\n\n  __proto.getRect = function () {\n    var state = this.state;\n    var poses = getAbsolutePosesByState(this.state);\n    var pos1 = poses[0],\n        pos2 = poses[1],\n        pos3 = poses[2],\n        pos4 = poses[3];\n    var rect = getRect(poses);\n    var offsetWidth = state.width,\n        offsetHeight = state.height;\n    var width = rect.width,\n        height = rect.height,\n        left = rect.left,\n        top = rect.top;\n    var statePos = [state.left, state.top];\n    var origin = plus(statePos, state.origin);\n    var beforeOrigin = plus(statePos, state.beforeOrigin);\n    return {\n      width: width,\n      height: height,\n      left: left,\n      top: top,\n      pos1: pos1,\n      pos2: pos2,\n      pos3: pos3,\n      pos4: pos4,\n      offsetWidth: offsetWidth,\n      offsetHeight: offsetHeight,\n      beforeOrigin: beforeOrigin,\n      origin: origin\n    };\n  };\n\n  __proto.request = function (ableName, param, isInstant) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    var _a = this.props,\n        ables = _a.ables,\n        groupable = _a.groupable;\n    var requsetAble = ables.filter(function (able) {\n      return able.name === ableName;\n    })[0];\n\n    if (this.isDragging() || !requsetAble || !requsetAble.request) {\n      return {\n        request: function () {\n          return this;\n        },\n        requestEnd: function () {\n          return this;\n        }\n      };\n    }\n\n    var self = this;\n    var ableRequester = requsetAble.request(this);\n    var ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\n    var eventAffix = \"\" + (groupable ? \"Group\" : \"\") + (ableRequester.isControl ? \"Control\" : \"\");\n    var requester = {\n      request: function (ableParam) {\n        triggerAble(self, ableType, \"drag\", eventAffix, \"\", __assign({}, ableRequester.request(ableParam), {\n          isRequest: true\n        }), isInstant);\n        return this;\n      },\n      requestEnd: function () {\n        triggerAble(self, ableType, \"drag\", eventAffix, \"End\", __assign({}, ableRequester.requestEnd(), {\n          isRequest: true\n        }));\n        return this;\n      }\n    };\n    triggerAble(self, ableType, \"drag\", eventAffix, \"Start\", __assign({}, ableRequester.requestStart(param), {\n      isRequest: true\n    }), isInstant);\n    return param.isInstant ? requester.request(param).requestEnd() : requester;\n  };\n\n  __proto.updateRenderPoses = function () {\n    var state = this.state;\n    var props = this.props;\n    var beforeOrigin = state.beforeOrigin,\n        transformOrigin = state.transformOrigin,\n        matrix = state.matrix,\n        is3d = state.is3d,\n        pos1 = state.pos1,\n        pos2 = state.pos2,\n        pos3 = state.pos3,\n        pos4 = state.pos4,\n        stateLeft = state.left,\n        stateTop = state.top;\n\n    var _a = props.padding || {},\n        _b = _a.left,\n        left = _b === void 0 ? 0 : _b,\n        _c = _a.top,\n        top = _c === void 0 ? 0 : _c,\n        _d = _a.bottom,\n        bottom = _d === void 0 ? 0 : _d,\n        _e = _a.right,\n        right = _e === void 0 ? 0 : _e;\n\n    var n = is3d ? 4 : 3;\n    var absoluteOrigin = props.groupable ? beforeOrigin : plus(beforeOrigin, [stateLeft, stateTop]);\n    state.renderPoses = [plus(pos1, caculatePadding(matrix, [-left, -top], transformOrigin, absoluteOrigin, n)), plus(pos2, caculatePadding(matrix, [right, -top], transformOrigin, absoluteOrigin, n)), plus(pos3, caculatePadding(matrix, [-left, bottom], transformOrigin, absoluteOrigin, n)), plus(pos4, caculatePadding(matrix, [right, bottom], transformOrigin, absoluteOrigin, n))];\n  };\n\n  __proto.checkUpdate = function () {\n    var _a = this.props,\n        target = _a.target,\n        container = _a.container,\n        parentMoveable = _a.parentMoveable;\n    var _b = this.state,\n        stateTarget = _b.target,\n        stateContainer = _b.container;\n\n    if (!stateTarget && !target) {\n      return;\n    }\n\n    this.updateAbles();\n    var isChanged = !equals(stateTarget, target) || !equals(stateContainer, container);\n\n    if (!isChanged) {\n      return;\n    }\n\n    this.updateState({\n      target: target,\n      container: container\n    });\n\n    if (!parentMoveable && (container || this.controlBox)) {\n      this.updateRect(\"End\", false, false);\n    }\n  };\n\n  __proto.triggerEvent = function (name, e) {\n    var callback = this.props[name];\n    return callback && callback(e);\n  };\n\n  __proto.unsetAbles = function () {\n    var _this = this;\n\n    if (this.targetAbles.filter(function (able) {\n      if (able.unset) {\n        able.unset(_this);\n        return true;\n      }\n\n      return false;\n    }).length) {\n      this.forceUpdate();\n    }\n  };\n\n  __proto.updateAbles = function (ables, eventAffix) {\n    if (ables === void 0) {\n      ables = this.props.ables;\n    }\n\n    if (eventAffix === void 0) {\n      eventAffix = \"\";\n    }\n\n    var props = this.props;\n    var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\n    var enabledAbles = ables.filter(function (able) {\n      return able && props[able.name];\n    });\n    var dragStart = \"drag\" + eventAffix + \"Start\";\n    var pinchStart = \"pinch\" + eventAffix + \"Start\";\n    var dragControlStart = \"drag\" + eventAffix + \"ControlStart\";\n    var targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\n    var controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\n    this.targetAbles = targetAbles;\n    this.controlAbles = controlAbles;\n  };\n\n  __proto.updateState = function (nextState, isSetState) {\n    if (isSetState) {\n      this.setState(nextState);\n    } else {\n      var state = this.state;\n\n      for (var name in nextState) {\n        state[name] = nextState[name];\n      }\n    }\n  };\n\n  __proto.renderAbles = function () {\n    var _this = this;\n\n    var props = this.props;\n    var ables = props.ables;\n    var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\n    var enabledAbles = ables.filter(function (able) {\n      return able && props[able.name];\n    });\n    var Renderer = {\n      createElement: createElement\n    };\n    return groupByMap(flat(filterAbles(enabledAbles, [\"render\"], triggerAblesSimultaneously).map(function (_a) {\n      var render = _a.render;\n      return render(_this, Renderer) || [];\n    })).filter(function (el) {\n      return el;\n    }), function (_a) {\n      var key = _a.key;\n      return key;\n    }).map(function (group) {\n      return group[0];\n    });\n  };\n\n  MoveableManager.defaultProps = {\n    target: null,\n    dragTarget: null,\n    container: null,\n    rootContainer: null,\n    origin: true,\n    edge: false,\n    parentMoveable: null,\n    parentPosition: null,\n    ables: [],\n    pinchThreshold: 20,\n    dragArea: false,\n    transformOrigin: \"\",\n    className: \"\",\n    zoom: 1,\n    triggerAblesSimultaneously: false,\n    padding: {},\n    pinchOutside: true\n  };\n  return MoveableManager;\n}(PureComponent);\n\nfunction getRotatiion(touches) {\n  return getRad([touches[0].clientX, touches[0].clientY], [touches[1].clientX, touches[1].clientY]) / Math.PI * 180;\n}\n\nvar Pinchable = {\n  name: \"pinchable\",\n  updateRect: true,\n  props: {\n    pinchable: Boolean,\n    pinchOutside: Boolean,\n    pinchThreshold: Number\n  },\n  pinchStart: function (moveable, e) {\n    var datas = e.datas,\n        touches = e.touches,\n        targets = e.targets;\n    var _a = moveable.props,\n        pinchable = _a.pinchable,\n        ables = _a.ables;\n\n    if (!pinchable) {\n      return false;\n    }\n\n    var eventName = \"onPinch\" + (targets ? \"Group\" : \"\") + \"Start\";\n    var controlEventName = \"drag\" + (targets ? \"Group\" : \"\") + \"ControlStart\";\n    var pinchAbles = (pinchable === true ? moveable.controlAbles : ables.filter(function (able) {\n      return pinchable.indexOf(able.name) > -1;\n    })).filter(function (able) {\n      return able.canPinch && able[controlEventName];\n    });\n    var params = fillParams(moveable, e, {});\n\n    if (targets) {\n      params.targets = targets;\n    }\n\n    var result = triggerEvent(moveable, eventName, params);\n    datas.isPinch = result !== false;\n    datas.ables = pinchAbles;\n    var isPinch = datas.isPinch;\n\n    if (!isPinch) {\n      return false;\n    }\n\n    var parentRotate = getRotatiion(touches);\n    pinchAbles.forEach(function (able) {\n      datas[able.name + \"Datas\"] = {};\n\n      if (!able[controlEventName]) {\n        return;\n      }\n\n      var ableEvent = __assign({}, e, {\n        datas: datas[able.name + \"Datas\"],\n        parentRotate: parentRotate,\n        isPinch: true\n      });\n\n      able[controlEventName](moveable, ableEvent);\n    });\n    moveable.state.snapRenderInfo = {\n      request: e.isRequest,\n      direction: [0, 0]\n    };\n    return isPinch;\n  },\n  pinch: function (moveable, e) {\n    var datas = e.datas,\n        pinchScale = e.scale,\n        distance = e.distance,\n        touches = e.touches,\n        inputEvent = e.inputEvent,\n        targets = e.targets;\n\n    if (!datas.isPinch) {\n      return;\n    }\n\n    var parentRotate = getRotatiion(touches);\n    var parentDistance = distance * (1 - 1 / pinchScale);\n    var params = fillParams(moveable, e, {});\n\n    if (targets) {\n      params.targets = targets;\n    }\n\n    var eventName = \"onPinch\" + (targets ? \"Group\" : \"\");\n    triggerEvent(moveable, eventName, params);\n    var ables = datas.ables;\n    var controlEventName = \"drag\" + (targets ? \"Group\" : \"\") + \"Control\";\n    ables.forEach(function (able) {\n      if (!able[controlEventName]) {\n        return;\n      }\n\n      able[controlEventName](moveable, __assign({}, e, {\n        datas: datas[able.name + \"Datas\"],\n        inputEvent: inputEvent,\n        parentDistance: parentDistance,\n        parentRotate: parentRotate,\n        isPinch: true\n      }));\n    });\n    return params;\n  },\n  pinchEnd: function (moveable, e) {\n    var datas = e.datas,\n        isPinch = e.isPinch,\n        inputEvent = e.inputEvent,\n        targets = e.targets;\n\n    if (!datas.isPinch) {\n      return;\n    }\n\n    var eventName = \"onPinch\" + (targets ? \"Group\" : \"\") + \"End\";\n    var params = fillParams(moveable, e, {\n      isDrag: isPinch\n    });\n\n    if (targets) {\n      params.targets = targets;\n    }\n\n    triggerEvent(moveable, eventName, params);\n    var ables = datas.ables;\n    var controlEventName = \"drag\" + (targets ? \"Group\" : \"\") + \"ControlEnd\";\n    ables.forEach(function (able) {\n      if (!able[controlEventName]) {\n        return;\n      }\n\n      able[controlEventName](moveable, __assign({}, e, {\n        isDrag: isPinch,\n        datas: datas[able.name + \"Datas\"],\n        inputEvent: inputEvent,\n        isPinch: true\n      }));\n    });\n    return isPinch;\n  },\n  pinchGroupStart: function (moveable, e) {\n    return this.pinchStart(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  },\n  pinchGroup: function (moveable, e) {\n    return this.pinch(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  },\n  pinchGroupEnd: function (moveable, e) {\n    return this.pinchEnd(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  }\n};\n\nfunction setCustomDrag(state, delta, inputEvent, isPinch, isConvert) {\n  var result = state.dragger.move(delta, inputEvent);\n  var datas = result.originalDatas || result.datas;\n  var draggableDatas = datas.draggable || (datas.draggable = {});\n  return __assign({}, isConvert ? convertDragDist(state, result) : result, {\n    isDrag: true,\n    isPinch: !!isPinch,\n    parentEvent: true,\n    datas: draggableDatas\n  });\n}\n\nvar CustomDragger =\n/*#__PURE__*/\nfunction () {\n  function CustomDragger() {\n    this.prevX = 0;\n    this.prevY = 0;\n    this.startX = 0;\n    this.startY = 0;\n    this.isDrag = false;\n    this.isFlag = false;\n    this.datas = {\n      draggable: {}\n    };\n  }\n\n  var __proto = CustomDragger.prototype;\n\n  __proto.dragStart = function (client, inputEvent) {\n    this.isDrag = false;\n    this.isFlag = false;\n    this.datas = {\n      draggable: {}\n    };\n    return __assign({}, this.move(client, inputEvent), {\n      type: \"dragstart\"\n    });\n  };\n\n  __proto.drag = function (client, inputEvent) {\n    return this.move([client[0] - this.prevX, client[1] - this.prevY], inputEvent);\n  };\n\n  __proto.move = function (delta, inputEvent) {\n    var clientX;\n    var clientY;\n\n    if (!this.isFlag) {\n      this.prevX = delta[0];\n      this.prevY = delta[1];\n      this.startX = delta[0];\n      this.startY = delta[1];\n      clientX = delta[0];\n      clientY = delta[1];\n      this.isFlag = true;\n    } else {\n      clientX = this.prevX + delta[0];\n      clientY = this.prevY + delta[1];\n      this.isDrag = true;\n    }\n\n    this.prevX = clientX;\n    this.prevY = clientY;\n    return {\n      type: \"drag\",\n      clientX: clientX,\n      clientY: clientY,\n      inputEvent: inputEvent,\n      isDrag: this.isDrag,\n      distX: clientX - this.startX,\n      distY: clientY - this.startY,\n      deltaX: delta[0],\n      deltaY: delta[1],\n      datas: this.datas.draggable,\n      originalDatas: this.datas,\n      parentEvent: true,\n      parentDragger: this\n    };\n  };\n\n  return CustomDragger;\n}();\n\nfunction triggerChildDragger(moveable, able, type, delta, e, isConvert) {\n  var isStart = !!type.match(/Start$/g);\n  var isEnd = !!type.match(/End$/g);\n  var inputEvent = e.inputEvent;\n  var isPinch = e.isPinch;\n  var datas = e.datas;\n  var childs = moveable.moveables.map(function (child, i) {\n    var childEvent = {};\n\n    if (isStart) {\n      childEvent = new CustomDragger().dragStart(delta, inputEvent);\n    } else {\n      if (!child.state.dragger) {\n        child.state.dragger = datas.childDraggers[i];\n      }\n\n      childEvent = setCustomDrag(child.state, delta, inputEvent, isPinch, isConvert);\n    }\n\n    var result = able[type](child, __assign({}, childEvent, {\n      parentFlag: true\n    }));\n\n    if (isEnd) {\n      child.state.dragger = null;\n    }\n\n    return result;\n  });\n\n  if (isStart) {\n    datas.childDraggers = moveable.moveables.map(function (child) {\n      return child.state.dragger;\n    });\n  }\n\n  return childs;\n}\nfunction triggerChildAble(moveable, able, type, datas, eachEvent, callback) {\n  var name = able.name;\n  var ableDatas = datas[name] || (datas[name] = []);\n  var isEnd = !!type.match(/End$/g);\n  var childs = moveable.moveables.map(function (child, i) {\n    var childDatas = ableDatas[i] || (ableDatas[i] = {});\n    var childEvent = isFunction(eachEvent) ? eachEvent(child, childDatas) : eachEvent;\n    var result = able[type](child, __assign({}, childEvent, {\n      datas: childDatas,\n      parentFlag: true\n    }));\n    result && callback && callback(child, childDatas, result, i);\n\n    if (isEnd) {\n      child.state.dragger = null;\n    }\n\n    return result;\n  });\n  return childs;\n}\n\nfunction setDragStart(moveable, _a) {\n  var datas = _a.datas;\n  var _b = moveable.state,\n      matrix = _b.matrix,\n      beforeMatrix = _b.beforeMatrix,\n      is3d = _b.is3d,\n      left = _b.left,\n      top = _b.top,\n      origin = _b.origin,\n      offsetMatrix = _b.offsetMatrix,\n      targetMatrix = _b.targetMatrix,\n      transformOrigin = _b.transformOrigin;\n  var n = is3d ? 4 : 3;\n  datas.is3d = is3d;\n  datas.matrix = matrix;\n  datas.targetMatrix = targetMatrix;\n  datas.beforeMatrix = beforeMatrix;\n  datas.offsetMatrix = offsetMatrix;\n  datas.transformOrigin = transformOrigin;\n  datas.inverseMatrix = invert(matrix, n);\n  datas.inverseBeforeMatrix = invert(beforeMatrix, n);\n  datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\n  datas.startDragBeforeDist = caculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\n  datas.startDragDist = caculate(datas.inverseMatrix, datas.absoluteOrigin, n);\n}\nfunction getDragDist(_a, isBefore) {\n  var datas = _a.datas,\n      distX = _a.distX,\n      distY = _a.distY;\n  var inverseBeforeMatrix = datas.inverseBeforeMatrix,\n      inverseMatrix = datas.inverseMatrix,\n      is3d = datas.is3d,\n      startDragBeforeDist = datas.startDragBeforeDist,\n      startDragDist = datas.startDragDist,\n      absoluteOrigin = datas.absoluteOrigin;\n  var n = is3d ? 4 : 3;\n  return minus(caculate(isBefore ? inverseBeforeMatrix : inverseMatrix, plus(absoluteOrigin, [distX, distY]), n), isBefore ? startDragBeforeDist : startDragDist);\n}\nfunction getInverseDragDist(_a, isBefore) {\n  var datas = _a.datas,\n      distX = _a.distX,\n      distY = _a.distY;\n  var beforeMatrix = datas.beforeMatrix,\n      matrix = datas.matrix,\n      is3d = datas.is3d,\n      startDragBeforeDist = datas.startDragBeforeDist,\n      startDragDist = datas.startDragDist,\n      absoluteOrigin = datas.absoluteOrigin;\n  var n = is3d ? 4 : 3;\n  return minus(caculate(isBefore ? beforeMatrix : matrix, plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]), n), absoluteOrigin);\n}\nfunction caculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin) {\n  if (prevWidth === void 0) {\n    prevWidth = width;\n  }\n\n  if (prevHeight === void 0) {\n    prevHeight = height;\n  }\n\n  if (prevOrigin === void 0) {\n    prevOrigin = [0, 0];\n  }\n\n  if (!transformOrigin) {\n    return prevOrigin;\n  }\n\n  return transformOrigin.map(function (pos, i) {\n    var _a = splitUnit(pos),\n        value = _a.value,\n        unit = _a.unit;\n\n    var prevSize = i ? prevHeight : prevWidth;\n    var size = i ? height : width;\n\n    if (pos === \"%\" || isNaN(value)) {\n      // no value but %\n      var measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\n      return size * measureRatio;\n    } else if (unit !== \"%\") {\n      return value;\n    }\n\n    return size * value / 100;\n  });\n}\nfunction getPosIndexesByDirection(direction) {\n  var indexes = [];\n\n  if (direction[1] >= 0) {\n    if (direction[0] >= 0) {\n      indexes.push(3);\n    }\n\n    if (direction[0] <= 0) {\n      indexes.push(2);\n    }\n  }\n\n  if (direction[1] <= 0) {\n    if (direction[0] >= 0) {\n      indexes.push(1);\n    }\n\n    if (direction[0] <= 0) {\n      indexes.push(0);\n    }\n  }\n\n  return indexes;\n}\nfunction getPosesByDirection(poses, direction) {\n  /*\n  [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\n  [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\n  [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\n  */\n  return getPosIndexesByDirection(direction).map(function (index) {\n    return poses[index];\n  });\n}\nfunction getPosByDirection(poses, direction) {\n  /*\n  [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\n  [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\n  [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\n  */\n  var nextPoses = getPosesByDirection(poses, direction);\n  return [average.apply(void 0, nextPoses.map(function (pos) {\n    return pos[0];\n  })), average.apply(void 0, nextPoses.map(function (pos) {\n    return pos[1];\n  }))];\n}\nfunction getPosByReverseDirection(_a, direction) {\n  /*\n  [-1, -1](pos4)       [0, -1](pos3,pos4)       [1, -1](pos3)\n  [-1, 0](pos2, pos4)                           [1, 0](pos3, pos1)\n  [-1, 1](pos2)        [0, 1](pos1, pos2)       [1, 1](pos1)\n  */\n  var pos1 = _a[0],\n      pos2 = _a[1],\n      pos3 = _a[2],\n      pos4 = _a[3];\n  return getPosByDirection([pos4, pos3, pos2, pos1], direction);\n}\n\nfunction getStartPos(poses, direction) {\n  var startPos1 = poses[0],\n      startPos2 = poses[1],\n      startPos3 = poses[2],\n      startPos4 = poses[3];\n  return getPosByReverseDirection([startPos1, startPos2, startPos3, startPos4], direction);\n}\n\nfunction getDist(startPos, matrix, width, height, n, direction) {\n  var poses = caculatePoses(matrix, width, height, n);\n  var pos = getPosByReverseDirection(poses, direction);\n  var distX = startPos[0] - pos[0];\n  var distY = startPos[1] - pos[1];\n  return [distX, distY];\n}\n\nfunction getNextMatrix(offsetMatrix, targetMatrix, origin, n) {\n  return multiply(offsetMatrix, getAbsoluteMatrix(targetMatrix, n, origin), n);\n}\nfunction scaleMatrix(state, scale) {\n  var transformOrigin = state.transformOrigin,\n      offsetMatrix = state.offsetMatrix,\n      is3d = state.is3d,\n      targetMatrix = state.targetMatrix;\n  var n = is3d ? 4 : 3;\n  return getNextMatrix(offsetMatrix, multiply(targetMatrix, createScaleMatrix(scale, n), n), transformOrigin, n);\n}\nfunction getScaleDist(moveable, scale, direction, fixedPosition) {\n  var state = moveable.state;\n  var is3d = state.is3d,\n      left = state.left,\n      top = state.top,\n      width = state.width,\n      height = state.height;\n  var n = is3d ? 4 : 3;\n  var groupable = moveable.props.groupable;\n  var nextMatrix = scaleMatrix(moveable.state, scale);\n  var groupLeft = groupable ? left : 0;\n  var groupTop = groupable ? top : 0;\n  var dist = getDist(fixedPosition, nextMatrix, width, height, n, direction);\n  return minus(dist, [groupLeft, groupTop]);\n}\nfunction getResizeDist(moveable, width, height, direction, fixedPosition, transformOrigin) {\n  var groupable = moveable.props.groupable;\n  var _a = moveable.state,\n      prevOrigin = _a.transformOrigin,\n      targetMatrix = _a.targetMatrix,\n      offsetMatrix = _a.offsetMatrix,\n      is3d = _a.is3d,\n      prevWidth = _a.width,\n      prevHeight = _a.height,\n      left = _a.left,\n      top = _a.top;\n  var n = is3d ? 4 : 3;\n  var nextOrigin = caculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin);\n  var groupLeft = groupable ? left : 0;\n  var groupTop = groupable ? top : 0;\n  var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\n  var dist = getDist(fixedPosition, nextMatrix, width, height, n, direction);\n  return minus(dist, [groupLeft, groupTop]);\n}\nfunction getStartDirection(moveable, direction) {\n  if (!direction[0] && !direction[1]) {\n    return [0, 0];\n  }\n\n  var _a = moveable.props.baseDirection,\n      baseDirection = _a === void 0 ? [-1, -1] : _a;\n  return [direction[0] ? direction[0] : baseDirection[0] * -1, direction[1] ? direction[1] : baseDirection[1] * -1];\n}\nfunction getAbsoluteFixedPosition(moveable, direction) {\n  return getStartPos(getAbsolutePosesByState(moveable.state), direction);\n}\n\nfunction directionCondition(e) {\n  if (e.isRequest) {\n    return e.parentDirection;\n  }\n\n  return hasClass(e.inputEvent.target, prefix(\"direction\"));\n}\n\nfunction getGapGuidelines(guidelines, type, snapThreshold, index, _a, _b) {\n  var start = _a[0],\n      end = _a[1];\n  var otherStart = _b[0],\n      otherEnd = _b[1];\n  var totalGuidelines = [];\n  var otherIndex = index ? 0 : 1;\n  var otherType = type === \"vertical\" ? \"horizontal\" : \"vertical\";\n  var elementGuidelines = groupBy(guidelines.filter(function (_a) {\n    var guidelineType = _a.type;\n    return guidelineType === type;\n  }), function (_a) {\n    var element = _a.element;\n    return element;\n  }).map(function (group) {\n    return group[0];\n  }).filter(function (_a) {\n    var pos = _a.pos,\n        sizes = _a.sizes;\n    return pos[otherIndex] <= otherEnd && otherStart <= pos[otherIndex] + sizes[otherIndex];\n  });\n  elementGuidelines.forEach(function (guideline1) {\n    var elementStart = guideline1.pos[index];\n    var elementEnd = elementStart + guideline1.sizes[index];\n    elementGuidelines.forEach(function (_a) {\n      var guideline2Pos = _a.pos,\n          guideline2Sizes = _a.sizes,\n          guideline2Element = _a.element;\n      var targetStart = guideline2Pos[index];\n      var targetEnd = targetStart + guideline2Sizes[index];\n      var pos = 0;\n      var gap = 0;\n      var canSnap = true;\n\n      if (elementEnd <= targetStart) {\n        // gap -\n        gap = elementEnd - targetStart;\n        pos = targetEnd - gap;\n\n        if (start < pos - snapThreshold) {\n          canSnap = false;\n        } // element target moveable\n\n      } else if (targetEnd <= elementStart) {\n        // gap +\n        gap = elementStart - targetEnd;\n        pos = targetStart - gap;\n\n        if (end > pos + snapThreshold) {\n          canSnap = false;\n        } // moveable target element\n\n      } else {\n        return;\n      }\n\n      if (canSnap) {\n        totalGuidelines.push({\n          pos: otherType === \"vertical\" ? [pos, guideline2Pos[1]] : [guideline2Pos[0], pos],\n          element: guideline2Element,\n          sizes: guideline2Sizes,\n          size: 0,\n          type: otherType,\n          gap: gap,\n          gapGuidelines: elementGuidelines\n        });\n      }\n\n      if (elementEnd <= start && end <= targetStart) {\n        // elementEnd   moveable   target\n        var centerPos = (targetStart + elementEnd - (end - start)) / 2;\n\n        if (throttle(start - (centerPos - snapThreshold), 0.1) >= 0) {\n          totalGuidelines.push({\n            pos: otherType === \"vertical\" ? [centerPos, guideline2Pos[1]] : [guideline2Pos[0], centerPos],\n            element: guideline2Element,\n            sizes: guideline2Sizes,\n            size: 0,\n            type: otherType,\n            gap: elementEnd - start,\n            gapGuidelines: elementGuidelines\n          });\n        }\n      }\n    });\n  });\n  return totalGuidelines;\n}\nfunction getTotalGuidelines(moveable) {\n  var _a = moveable.state,\n      guidelines = _a.guidelines,\n      _b = _a.containerClientRect,\n      containerHeight = _b.scrollHeight,\n      containerWidth = _b.scrollWidth;\n  var props = moveable.props;\n  var _c = props.snapHorizontal,\n      snapHorizontal = _c === void 0 ? true : _c,\n      _d = props.snapVertical,\n      snapVertical = _d === void 0 ? true : _d,\n      _e = props.snapGap,\n      snapGap = _e === void 0 ? true : _e,\n      verticalGuidelines = props.verticalGuidelines,\n      horizontalGuidelines = props.horizontalGuidelines,\n      _f = props.snapThreshold,\n      snapThreshold = _f === void 0 ? 5 : _f;\n  var totalGuidelines = guidelines.slice();\n\n  if (snapGap) {\n    var _g = getRect(getAbsolutePosesByState(moveable.state)),\n        top = _g.top,\n        left = _g.left,\n        bottom = _g.bottom,\n        right = _g.right;\n\n    var elementGuidelines = guidelines.filter(function (_a) {\n      var element = _a.element;\n      return element;\n    });\n    totalGuidelines.push.apply(totalGuidelines, getGapGuidelines(elementGuidelines, \"horizontal\", snapThreshold, 0, [left, right], [top, bottom]).concat(getGapGuidelines(elementGuidelines, \"vertical\", snapThreshold, 1, [top, bottom], [left, right])));\n  }\n\n  if (snapHorizontal && horizontalGuidelines) {\n    horizontalGuidelines.forEach(function (pos) {\n      totalGuidelines.push({\n        type: \"horizontal\",\n        pos: [0, throttle(pos, 0.1)],\n        size: containerWidth\n      });\n    });\n  }\n\n  if (snapVertical && verticalGuidelines) {\n    verticalGuidelines.forEach(function (pos) {\n      totalGuidelines.push({\n        type: \"vertical\",\n        pos: [throttle(pos, 0.1), 0],\n        size: containerHeight\n      });\n    });\n  }\n\n  return totalGuidelines;\n}\nfunction checkSnapPoses(moveable, posesX, posesY, snapCenter, customSnapThreshold) {\n  var totalGuidelines = getTotalGuidelines(moveable);\n  var props = moveable.props;\n  var _a = props.snapElement,\n      snapElement = _a === void 0 ? true : _a;\n  var snapThreshold = selectValue(customSnapThreshold, props.snapThreshold, 5);\n  return {\n    vertical: checkSnap(totalGuidelines, \"vertical\", posesX, snapThreshold, snapCenter, snapElement),\n    horizontal: checkSnap(totalGuidelines, \"horizontal\", posesY, snapThreshold, snapCenter, snapElement)\n  };\n}\nfunction checkSnapKeepRatio(moveable, startPos, endPos) {\n  var endX = endPos[0],\n      endY = endPos[1];\n  var startX = startPos[0],\n      startY = startPos[1];\n\n  var _a = minus(endPos, startPos),\n      dx = _a[0],\n      dy = _a[1];\n\n  var isBottom = dy > 0;\n  var isRight = dx > 0;\n  dx = Math.abs(dx) <= TINY_NUM ? 0 : dx;\n  dy = Math.abs(dy) <= TINY_NUM ? 0 : dy;\n  var verticalInfo = {\n    isSnap: false,\n    offset: 0,\n    pos: 0\n  };\n  var horizontalInfo = {\n    isSnap: false,\n    offset: 0,\n    pos: 0\n  };\n\n  if (dx === 0 && dy === 0) {\n    return {\n      vertical: verticalInfo,\n      horizontal: horizontalInfo\n    };\n  }\n\n  var _b = checkSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : []),\n      verticalSnapInfo = _b.vertical,\n      horizontalSnapInfo = _b.horizontal;\n\n  verticalSnapInfo.posInfos.filter(function (_a) {\n    var pos = _a.pos;\n    return isRight ? pos >= startX : pos <= startX;\n  });\n  horizontalSnapInfo.posInfos.filter(function (_a) {\n    var pos = _a.pos;\n    return isBottom ? pos >= startY : pos <= startY;\n  });\n  verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\n  horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\n\n  var _c = getNearestSnapGuidelineInfo(verticalSnapInfo),\n      isVerticalSnap = _c.isSnap,\n      verticalGuideline = _c.guideline;\n\n  var _d = getNearestSnapGuidelineInfo(horizontalSnapInfo),\n      isHorizontalSnap = _d.isSnap,\n      horizontalGuideline = _d.guideline;\n\n  var horizontalPos = isHorizontalSnap ? horizontalGuideline.pos[1] : 0;\n  var verticalPos = isVerticalSnap ? verticalGuideline.pos[0] : 0;\n\n  if (dx === 0) {\n    if (isHorizontalSnap) {\n      horizontalInfo.isSnap = true;\n      horizontalInfo.pos = horizontalGuideline.pos[1];\n      horizontalInfo.offset = endY - horizontalInfo.pos;\n    }\n  } else if (dy === 0) {\n    if (isVerticalSnap) {\n      verticalInfo.isSnap = true;\n      verticalInfo.pos = verticalPos;\n      verticalInfo.offset = endX - verticalPos;\n    }\n  } else {\n    // y - y1 = a * (x - x1)\n    var a = dy / dx;\n    var b = endPos[1] - a * endX;\n    var y = 0;\n    var x = 0;\n    var isSnap = false;\n\n    if (isVerticalSnap) {\n      x = verticalPos;\n      y = a * x + b;\n      isSnap = true;\n    } else if (isHorizontalSnap) {\n      y = horizontalPos;\n      x = (y - b) / a;\n      isSnap = true;\n    }\n\n    if (isSnap) {\n      verticalInfo.isSnap = true;\n      verticalInfo.pos = x;\n      verticalInfo.offset = endX - x;\n      horizontalInfo.isSnap = true;\n      horizontalInfo.pos = y;\n      horizontalInfo.offset = endY - y;\n    }\n  }\n\n  return {\n    vertical: verticalInfo,\n    horizontal: horizontalInfo\n  };\n}\nfunction checkSnaps(moveable, rect, isCenter, customSnapThreshold) {\n  var snapCenter = moveable.props.snapCenter;\n  var isSnapCenter = snapCenter && isCenter;\n  var verticalNames = [\"left\", \"right\"];\n  var horizontalNames = [\"top\", \"bottom\"];\n\n  if (isSnapCenter) {\n    verticalNames.push(\"center\");\n    horizontalNames.push(\"middle\");\n  }\n\n  verticalNames = verticalNames.filter(function (name) {\n    return name in rect;\n  });\n  horizontalNames = horizontalNames.filter(function (name) {\n    return name in rect;\n  });\n  return checkSnapPoses(moveable, verticalNames.map(function (name) {\n    return rect[name];\n  }), horizontalNames.map(function (name) {\n    return rect[name];\n  }), isSnapCenter, customSnapThreshold);\n}\nfunction getNearestSnapGuidelineInfo(snapInfo) {\n  var isSnap = snapInfo.isSnap;\n\n  if (!isSnap) {\n    return {\n      isSnap: false,\n      offset: 0,\n      dist: -1,\n      pos: 0,\n      guideline: null\n    };\n  }\n\n  var posInfo = snapInfo.posInfos[0];\n  var guidelineInfo = posInfo.guidelineInfos[0];\n  var offset = guidelineInfo.offset;\n  var dist = guidelineInfo.dist;\n  var guideline = guidelineInfo.guideline;\n  return {\n    isSnap: isSnap,\n    offset: offset,\n    dist: dist,\n    pos: posInfo.pos,\n    guideline: guideline\n  };\n}\n\nfunction checkSnap(guidelines, targetType, targetPoses, snapThreshold, snapCenter, snapElement) {\n  if (!guidelines || !guidelines.length) {\n    return {\n      isSnap: false,\n      posInfos: []\n    };\n  }\n\n  var isVertical = targetType === \"vertical\";\n  var posType = isVertical ? 0 : 1;\n  var snapPosInfos = targetPoses.map(function (targetPos) {\n    var guidelineInfos = guidelines.map(function (guideline) {\n      var pos = guideline.pos;\n      var offset = targetPos - pos[posType];\n      return {\n        offset: offset,\n        dist: Math.abs(offset),\n        guideline: guideline\n      };\n    }).filter(function (_a) {\n      var guideline = _a.guideline,\n          dist = _a.dist;\n      var type = guideline.type,\n          center = guideline.center,\n          element = guideline.element;\n\n      if (!snapElement && element || !snapCenter && center || type !== targetType || dist > snapThreshold) {\n        return false;\n      }\n\n      return true;\n    }).sort(function (a, b) {\n      return a.dist - b.dist;\n    });\n    return {\n      pos: targetPos,\n      guidelineInfos: guidelineInfos\n    };\n  }).filter(function (snapPosInfo) {\n    return snapPosInfo.guidelineInfos.length > 0;\n  }).sort(function (a, b) {\n    return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\n  });\n  return {\n    isSnap: snapPosInfos.length > 0,\n    posInfos: snapPosInfos\n  };\n}\n\nfunction getSnapInfosByDirection(moveable, poses, snapDirection) {\n  var nextPoses = [];\n\n  if (snapDirection[0] && snapDirection[1]) {\n    nextPoses = [snapDirection, [-snapDirection[0], snapDirection[1]], [snapDirection[0], -snapDirection[1]]].map(function (direction) {\n      return getPosByDirection(poses, direction);\n    });\n  } else if (!snapDirection[0] && !snapDirection[1]) {\n    var alignPoses = [poses[0], poses[1], poses[3], poses[2], poses[0]];\n\n    for (var i = 0; i < 4; ++i) {\n      nextPoses.push(alignPoses[i]);\n      nextPoses.push([(alignPoses[i][0] + alignPoses[i + 1][0]) / 2, (alignPoses[i][1] + alignPoses[i + 1][1]) / 2]);\n    }\n  } else {\n    if (moveable.props.keepRatio) {\n      nextPoses = [[-1, -1], [-1, 1], [1, -1], [1, 1], snapDirection].map(function (dir) {\n        return getPosByDirection(poses, dir);\n      });\n    } else {\n      nextPoses = getPosesByDirection(poses, snapDirection);\n\n      if (nextPoses.length > 1) {\n        nextPoses.push([(nextPoses[0][0] + nextPoses[1][0]) / 2, (nextPoses[0][1] + nextPoses[1][1]) / 2]);\n      }\n    }\n  }\n\n  return checkSnapPoses(moveable, nextPoses.map(function (pos) {\n    return pos[0];\n  }), nextPoses.map(function (pos) {\n    return pos[1];\n  }), true, 1);\n}\nfunction getNearOffsetInfo(offsets, index) {\n  return offsets.slice().sort(function (a, b) {\n    var aSign = a.sign[index];\n    var bSign = b.sign[index];\n    var aOffset = a.offset[index];\n    var bOffset = b.offset[index];\n    var aDist = Math.abs(aOffset);\n    var bDist = Math.abs(bOffset); // -1 The positions of a and b do not change.\n    // 1 The positions of a and b are reversed.\n\n    if (!aSign) {\n      return 1;\n    } else if (!bSign) {\n      return -1;\n    } else if (a.isBound && b.isBound) {\n      return bDist - aDist;\n    } else if (a.isBound) {\n      return -1;\n    } else if (b.isBound) {\n      return 1;\n    } else if (a.isSnap && b.isSnap) {\n      return aDist - bDist;\n    } else if (a.isSnap) {\n      return -1;\n    } else if (b.isSnap) {\n      return 1;\n    } else if (aDist < TINY_NUM) {\n      return 1;\n    } else if (bDist < TINY_NUM) {\n      return -1;\n    }\n\n    return aDist - bDist;\n  })[0];\n}\n\nfunction isStartLine(dot, line) {\n  // l    o     => true\n  // o    l    => false\n  var cx = average(line[0][0], line[1][0]);\n  var cy = average(line[0][1], line[1][1]);\n  return {\n    vertical: cx <= dot[0],\n    horizontal: cy <= dot[1]\n  };\n}\n\nfunction hitTestLine(dot, _a) {\n  var pos1 = _a[0],\n      pos2 = _a[1];\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  }\n\n  var test1;\n  var test2;\n\n  if (!dx) {\n    test1 = pos1[0];\n    test2 = dot[0];\n  } else if (!dy) {\n    test1 = pos1[1];\n    test2 = dot[1];\n  } else {\n    var a = dy / dx; // y = a * (x - pos1) + pos1\n\n    test1 = a * (dot[0] - pos1[0]) + pos1[1];\n    test2 = dot[1];\n  }\n\n  return test1 - test2;\n}\n\nfunction isSameStartLine(dots, line, error) {\n  if (error === void 0) {\n    error = TINY_NUM;\n  }\n\n  var centerSign = hitTestLine(dots[0], line) <= 0;\n  return dots.slice(1).every(function (dot) {\n    var value = hitTestLine(dot, line);\n    var sign = value <= 0;\n    return sign === centerSign || Math.abs(value) <= error;\n  });\n}\n\nfunction checkInnerBoundDot(pos, start, end, isStart, threshold) {\n  if (threshold === void 0) {\n    threshold = 0;\n  }\n\n  if (isStart && start - threshold <= pos || !isStart && pos <= end + threshold) {\n    // false 402 565 602 => 37 ([0, 37])\n    // true 400 524.9712603540036 600 => 124 ([124, 0])\n    // true 400 410 600 => 10 ([10, 0])\n    return {\n      isBound: true,\n      offset: isStart ? start - pos : end - pos\n    };\n  }\n\n  return {\n    isBound: false,\n    offset: 0\n  };\n}\n\nfunction checkInnerBound(moveable, line, center) {\n  var bounds = moveable.props.innerBounds;\n\n  if (!bounds) {\n    return {\n      isAllBound: false,\n      isBound: false,\n      isVerticalBound: false,\n      isHorizontalBound: false,\n      offset: [0, 0]\n    };\n  }\n\n  var left = bounds.left,\n      top = bounds.top,\n      width = bounds.width,\n      height = bounds.height;\n  var leftLine = [[left, top], [left, top + height]];\n  var topLine = [[left, top], [left + width, top]];\n  var rightLine = [[left + width, top], [left + width, top + height]];\n  var bottomLine = [[left, top + height], [left + width, top + height]];\n\n  var _a = isStartLine(center, line),\n      isHorizontalStart = _a.horizontal,\n      isVerticalStart = _a.vertical;\n\n  if (isSameStartLine([center, [left, top], [left + width, top], [left, top + height], [left + width, top + height]], line)) {\n    return {\n      isAllBound: false,\n      isBound: false,\n      isVerticalBound: false,\n      isHorizontalBound: false,\n      offset: [0, 0]\n    };\n  } // test vertical\n\n\n  var topBoundInfo = checkLineBoundCollision(line, topLine, isVerticalStart);\n  var bottomBoundInfo = checkLineBoundCollision(line, bottomLine, isVerticalStart); // test horizontal\n\n  var leftBoundInfo = checkLineBoundCollision(line, leftLine, isHorizontalStart);\n  var rightBoundInfo = checkLineBoundCollision(line, rightLine, isHorizontalStart);\n  var isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\n  var isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\n  var isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\n  var isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\n  var verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\n  var horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\n  var offset = [0, 0];\n  var isBound = false;\n  var isAllBound = false;\n\n  if (Math.abs(horizontalOffset) < Math.abs(verticalOffset)) {\n    offset = [verticalOffset, 0];\n    isBound = isVerticalBound;\n    isAllBound = isAllVerticalBound;\n  } else {\n    offset = [0, horizontalOffset];\n    isBound = isHorizontalBound;\n    isAllBound = isAllHorizontalBound;\n  }\n\n  return {\n    isAllBound: isAllBound,\n    isVerticalBound: isVerticalBound,\n    isHorizontalBound: isHorizontalBound,\n    isBound: isBound,\n    offset: offset\n  };\n}\n\nfunction checkLineBoundCollision(line, boundLine, isStart, threshold) {\n  var dot1 = line[0];\n  var dot2 = line[1];\n  var boundDot1 = boundLine[0];\n  var boundDot2 = boundLine[1];\n  var dy1 = dot2[1] - dot1[1];\n  var dx1 = dot2[0] - dot1[0];\n  var dy2 = boundDot2[1] - boundDot1[1];\n  var dx2 = boundDot2[0] - boundDot1[0]; // dx2 or dy2 is zero\n\n  if (!dx2) {\n    // vertical\n    if (dx1) {\n      var y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1]; // boundDot1[1] <= y  <= boundDot2[1]\n\n      return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\n    }\n  } else if (!dy2) {\n    // horizontal\n    if (dy1) {\n      // y = a * (x - x1) + y1\n      // x = (y - y1) / a + x1\n      var a = dy1 / dx1;\n      var x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0]; // boundDot1[0] <= x && x <= boundDot2[0]\n\n      return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\n    }\n  }\n\n  return {\n    isBound: false,\n    offset: 0\n  };\n}\n\nfunction getInnerBoundInfo(moveable, lines, center, datas) {\n  return lines.map(function (_a) {\n    var multiple = _a[0],\n        pos1 = _a[1],\n        pos2 = _a[2];\n\n    var _b = checkInnerBound(moveable, [pos1, pos2], center),\n        isBound = _b.isBound,\n        offset = _b.offset,\n        isVerticalBound = _b.isVerticalBound,\n        isHorizontalBound = _b.isHorizontalBound;\n\n    var sizeOffset = getDragDist({\n      datas: datas,\n      distX: offset[0],\n      distY: offset[1]\n    }).map(function (size, i) {\n      return size * (multiple[i] ? 2 / multiple[i] : 0);\n    });\n    return {\n      sign: multiple,\n      isBound: isBound,\n      isVerticalBound: isVerticalBound,\n      isHorizontalBound: isHorizontalBound,\n      isSnap: false,\n      offset: sizeOffset\n    };\n  });\n}\nfunction getInnerBoundDragInfo(moveable, poses, datas) {\n  var _a;\n\n  var lines = getCheckSnapLines(poses, [0, 0], false).map(function (_a) {\n    var sign = _a[0],\n        pos1 = _a[1],\n        pos2 = _a[2];\n    return [sign.map(function (dir) {\n      return Math.abs(dir) * 2;\n    }), pos1, pos2];\n  });\n  var innerBoundInfo = getInnerBoundInfo(moveable, lines, getPosByDirection(poses, [0, 0]), datas);\n  var widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\n  var heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\n  var verticalOffset = 0;\n  var horizontalOffset = 0;\n  var isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\n  var isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\n\n  if (isVerticalBound || isHorizontalBound) {\n    _a = getInverseDragDist({\n      datas: datas,\n      distX: -widthOffsetInfo.offset[0],\n      distY: -heightOffsetInfo.offset[1]\n    }), verticalOffset = _a[0], horizontalOffset = _a[1];\n  }\n\n  return {\n    vertical: {\n      isBound: isVerticalBound,\n      offset: verticalOffset\n    },\n    horizontal: {\n      isBound: isHorizontalBound,\n      offset: horizontalOffset\n    }\n  };\n}\nfunction getCheckSnapLineDirections(direction, keepRatio) {\n  var lineDirections = [];\n  var x = direction[0];\n  var y = direction[1];\n\n  if (x && y) {\n    lineDirections.push([[0, y * 2], direction, [-x, y]], [[x * 2, 0], direction, [x, -y]]);\n  } else if (x) {\n    // vertcal\n    lineDirections.push([[x * 2, 0], [x, 1], [x, -1]]);\n\n    if (keepRatio) {\n      lineDirections.push([[0, -1], [x, -1], [-x, -1]], [[0, 1], [x, 1], [-x, 1]]);\n    }\n  } else if (y) {\n    // horizontal\n    lineDirections.push([[0, y * 2], [1, y], [-1, y]]);\n\n    if (keepRatio) {\n      lineDirections.push([[-1, 0], [-1, y], [-1, -y]], [[1, 0], [1, y], [1, -y]]);\n    }\n  } else {\n    // [0, 0] to all direction\n    lineDirections.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]);\n  }\n\n  return lineDirections;\n}\nfunction getCheckSnapLines(poses, direction, keepRatio) {\n  return getCheckSnapLineDirections(direction, keepRatio).map(function (_a) {\n    var sign = _a[0],\n        dir1 = _a[1],\n        dir2 = _a[2];\n    return [sign, getPosByDirection(poses, dir1), getPosByDirection(poses, dir2)];\n  });\n}\n\nfunction isBoundRotate(relativePoses, boundDots, center, rad) {\n  var nextPoses = rad ? relativePoses.map(function (pos) {\n    return rotate(pos, rad);\n  }) : relativePoses;\n  var dots = [center].concat(boundDots);\n  return [[nextPoses[0], nextPoses[1]], [nextPoses[1], nextPoses[3]], [nextPoses[3], nextPoses[2]], [nextPoses[2], nextPoses[0]]].some(function (line, i) {\n    return !isSameStartLine(dots, line);\n  });\n}\n\nfunction getDistPointLine(_a) {\n  // x = 0, y = 0\n  // d = (ax + by + c) / root(a2 + b2)\n  var pos1 = _a[0],\n      pos2 = _a[1];\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (!dx) {\n    return Math.abs(pos1[0]);\n  }\n\n  if (!dy) {\n    return Math.abs(pos1[1]);\n  } // y - y1 = a(x - x1)\n  // 0 = ax -y + -a * x1 + y1\n\n\n  var a = dy / dx;\n  return Math.abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\n}\n\nfunction solveReverseLine(_a) {\n  var pos1 = _a[0],\n      pos2 = _a[1];\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (!dx) {\n    return [pos1[0], 0];\n  }\n\n  if (!dy) {\n    return [0, pos1[1]];\n  }\n\n  var a = dy / dx; // y - y1 = a (x  - x1)\n  // y = ax - a * x1 + y1\n\n  var b = -a * pos1[0] + pos1[1]; // y = ax + b = -1/a x\n  // x = -b / (a + 1 / a)\n  // y = b / (1 + 1 / a^2)\n\n  return [-b / (a + 1 / a), b / (a * a + 1)];\n}\n\nfunction checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation) {\n  var bounds = moveable.props.innerBounds;\n  var rad = rotation * Math.PI / 180;\n\n  if (!bounds) {\n    return [];\n  }\n\n  var left = bounds.left,\n      top = bounds.top,\n      width = bounds.width,\n      height = bounds.height;\n  var relativeLeft = left - origin[0];\n  var relativeRight = left + width - origin[0];\n  var relativeTop = top - origin[1];\n  var relativeBottom = top + height - origin[1];\n  var dots = [[relativeLeft, relativeTop], [relativeRight, relativeTop], [relativeLeft, relativeBottom], [relativeRight, relativeBottom]];\n  var center = getPosByDirection(nextPoses, [0, 0]);\n\n  if (!isBoundRotate(nextPoses, dots, center, 0)) {\n    return [];\n  }\n\n  var result = [];\n  var dotInfos = dots.map(function (dot) {\n    return [getDistSize(dot), getRad([0, 0], dot)];\n  });\n  [[nextPoses[0], nextPoses[1]], [nextPoses[1], nextPoses[3]], [nextPoses[3], nextPoses[2]], [nextPoses[2], nextPoses[0]]].forEach(function (line) {\n    var lineRad = getRad([0, 0], solveReverseLine(line));\n    var lineDist = getDistPointLine(line);\n    result.push.apply(result, dotInfos.filter(function (_a) {\n      var dotDist = _a[0];\n      return dotDist && lineDist <= dotDist;\n    }).map(function (_a) {\n      var dotDist = _a[0],\n          dotRad = _a[1];\n      var distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\n      var nextRad1 = dotRad + distRad;\n      var nextRad2 = dotRad - distRad;\n      return [rad + nextRad1 - lineRad, rad + nextRad2 - lineRad];\n    }).reduce(function (prev, cur) {\n      prev.push.apply(prev, cur);\n      return prev;\n    }, []).filter(function (nextRad) {\n      return !isBoundRotate(prevPoses, dots, center, nextRad);\n    }).map(function (nextRad) {\n      return throttle(nextRad * 180 / Math.PI, TINY_NUM);\n    }));\n  });\n  return result;\n}\nfunction checkInnerBoundPoses(moveable) {\n  var innerBounds = moveable.props.innerBounds;\n\n  if (!innerBounds) {\n    return {\n      vertical: [],\n      horizontal: []\n    };\n  }\n\n  var _a = moveable.getRect(),\n      pos1 = _a.pos1,\n      pos2 = _a.pos2,\n      pos3 = _a.pos3,\n      pos4 = _a.pos4;\n\n  var poses = [pos1, pos2, pos3, pos4];\n  var center = getPosByDirection(poses, [0, 0]);\n  var left = innerBounds.left,\n      top = innerBounds.top,\n      width = innerBounds.width,\n      height = innerBounds.height;\n  var leftLine = [[left, top], [left, top + height]];\n  var topLine = [[left, top], [left + width, top]];\n  var rightLine = [[left + width, top], [left + width, top + height]];\n  var bottomLine = [[left, top + height], [left + width, top + height]];\n  var lines = [[pos1, pos2], [pos2, pos4], [pos4, pos3], [pos3, pos1]];\n  var horizontalPoses = [];\n  var verticalPoses = [];\n  var boundMap = {\n    top: false,\n    bottom: false,\n    left: false,\n    right: false\n  };\n  lines.forEach(function (line) {\n    var _a = isStartLine(center, line),\n        isHorizontalStart = _a.horizontal,\n        isVerticalStart = _a.vertical; // test vertical\n\n\n    var topBoundInfo = checkLineBoundCollision(line, topLine, isVerticalStart, 1);\n    var bottomBoundInfo = checkLineBoundCollision(line, bottomLine, isVerticalStart, 1); // test horizontal\n\n    var leftBoundInfo = checkLineBoundCollision(line, leftLine, isHorizontalStart, 1);\n    var rightBoundInfo = checkLineBoundCollision(line, rightLine, isHorizontalStart, 1);\n\n    if (topBoundInfo.isBound && !boundMap.top) {\n      horizontalPoses.push(top);\n      boundMap.top = true;\n    }\n\n    if (bottomBoundInfo.isBound && !boundMap.bottom) {\n      horizontalPoses.push(top + height);\n      boundMap.bottom = true;\n    }\n\n    if (leftBoundInfo.isBound && !boundMap.left) {\n      verticalPoses.push(left);\n      boundMap.left = true;\n    }\n\n    if (rightBoundInfo.isBound && !boundMap.right) {\n      verticalPoses.push(left + width);\n      boundMap.right = true;\n    }\n  });\n  return {\n    horizontal: horizontalPoses,\n    vertical: verticalPoses\n  };\n}\n\nfunction checkBoundPoses(moveable, verticalPoses, horizontalPoses) {\n  var _a = moveable.props.bounds || {},\n      _b = _a.left,\n      left = _b === void 0 ? -Infinity : _b,\n      _c = _a.top,\n      top = _c === void 0 ? -Infinity : _c,\n      _d = _a.right,\n      right = _d === void 0 ? Infinity : _d,\n      _e = _a.bottom,\n      bottom = _e === void 0 ? Infinity : _e;\n\n  var bounds = {\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom\n  };\n  return {\n    vertical: checkBound(bounds, verticalPoses, true),\n    horizontal: checkBound(bounds, horizontalPoses, false)\n  };\n}\nfunction checkBoundKeepRatio(moveable, startPos, endPos) {\n  var _a = moveable.props.bounds || {},\n      _b = _a.left,\n      left = _b === void 0 ? -Infinity : _b,\n      _c = _a.top,\n      top = _c === void 0 ? -Infinity : _c,\n      _d = _a.right,\n      right = _d === void 0 ? Infinity : _d,\n      _e = _a.bottom,\n      bottom = _e === void 0 ? Infinity : _e;\n\n  var endX = endPos[0],\n      endY = endPos[1];\n\n  var _f = minus(endPos, startPos),\n      dx = _f[0],\n      dy = _f[1];\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  }\n\n  var isBottom = dy > 0;\n  var isRight = dx > 0;\n  var verticalInfo = {\n    isBound: false,\n    offset: 0,\n    pos: 0\n  };\n  var horizontalInfo = {\n    isBound: false,\n    offset: 0,\n    pos: 0\n  };\n\n  if (dx === 0 && dy === 0) {\n    return {\n      vertical: verticalInfo,\n      horizontal: horizontalInfo\n    };\n  } else if (dx === 0) {\n    if (isBottom) {\n      if (bottom < endY) {\n        horizontalInfo.pos = bottom;\n        horizontalInfo.offset = endY - bottom;\n      }\n    } else {\n      if (top > endY) {\n        horizontalInfo.pos = top;\n        horizontalInfo.offset = endY - top;\n      }\n    }\n  } else if (dy === 0) {\n    if (isRight) {\n      if (right < endX) {\n        verticalInfo.pos = right;\n        verticalInfo.offset = endX - right;\n      }\n    } else {\n      if (left > endX) {\n        verticalInfo.pos = left;\n        verticalInfo.offset = endX - left;\n      }\n    }\n  } else {\n    // y - y1 = a * (x - x1)\n    var a = dy / dx;\n    var b = endPos[1] - a * endX;\n    var y = 0;\n    var x = 0;\n    var isBound = false;\n\n    if (isRight && right <= endX) {\n      y = a * right + b;\n      x = right;\n      isBound = true;\n    } else if (!isRight && endX <= left) {\n      y = a * left + b;\n      x = left;\n      isBound = true;\n    }\n\n    if (isBound) {\n      if (y < top || y > bottom) {\n        isBound = false;\n      }\n    }\n\n    if (!isBound) {\n      if (isBottom && bottom <= endY) {\n        y = bottom;\n        x = (y - b) / a;\n        isBound = true;\n      } else if (!isBottom && endY <= top) {\n        y = top;\n        x = (y - b) / a;\n        isBound = true;\n      }\n    }\n\n    if (isBound) {\n      verticalInfo.isBound = true;\n      verticalInfo.pos = x;\n      verticalInfo.offset = endX - x;\n      horizontalInfo.isBound = true;\n      horizontalInfo.pos = y;\n      horizontalInfo.offset = endY - y;\n    }\n  }\n\n  return {\n    vertical: verticalInfo,\n    horizontal: horizontalInfo\n  };\n}\n\nfunction checkBound(bounds, poses, isVertical) {\n  // 0   [100 - 200]  300\n  var startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\n  var endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"]; // 450\n\n  var minPos = Math.min.apply(Math, poses);\n  var maxPos = Math.max.apply(Math, poses);\n\n  if (startBoundPos + 1 > minPos) {\n    return {\n      isBound: true,\n      offset: minPos - startBoundPos,\n      pos: startBoundPos\n    };\n  }\n\n  if (endBoundPos - 1 < maxPos) {\n    return {\n      isBound: true,\n      offset: maxPos - endBoundPos,\n      pos: endBoundPos\n    };\n  }\n\n  return {\n    isBound: false,\n    offset: 0,\n    pos: 0\n  };\n}\n\nfunction isBoundRotate$1(relativePoses, boundRect, rad) {\n  var nextPoses = rad ? relativePoses.map(function (pos) {\n    return rotate(pos, rad);\n  }) : relativePoses;\n  return nextPoses.some(function (pos) {\n    return pos[0] < boundRect.left && Math.abs(pos[0] - boundRect.left) > 0.1 || pos[0] > boundRect.right && Math.abs(pos[0] - boundRect.right) > 0.1 || pos[1] < boundRect.top && Math.abs(pos[1] - boundRect.top) > 0.1 || pos[1] > boundRect.bottom && Math.abs(pos[1] - boundRect.bottom) > 0.1;\n  });\n}\nfunction boundRotate(vec, boundPos, index) {\n  var r = getDistSize(vec);\n  var nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\n  return [nextPos, -nextPos].sort(function (a, b) {\n    return Math.abs(a - vec[index ? 0 : 1]) - Math.abs(b - vec[index ? 0 : 1]);\n  }).map(function (pos) {\n    return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\n  });\n}\nfunction checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation) {\n  var bounds = moveable.props.bounds;\n  var rad = rotation * Math.PI / 180;\n\n  if (!bounds) {\n    return [];\n  }\n\n  var _a = bounds.left,\n      left = _a === void 0 ? -Infinity : _a,\n      _b = bounds.top,\n      top = _b === void 0 ? -Infinity : _b,\n      _c = bounds.right,\n      right = _c === void 0 ? Infinity : _c,\n      _d = bounds.bottom,\n      bottom = _d === void 0 ? Infinity : _d;\n  var relativeLeft = left - origin[0];\n  var relativeRight = right - origin[0];\n  var relativeTop = top - origin[1];\n  var relativeBottom = bottom - origin[1];\n  var boundRect = {\n    left: relativeLeft,\n    top: relativeTop,\n    right: relativeRight,\n    bottom: relativeBottom\n  };\n\n  if (!isBoundRotate$1(nextPoses, boundRect, 0)) {\n    return [];\n  }\n\n  var result = [];\n  [[relativeLeft, 0], [relativeRight, 0], [relativeTop, 1], [relativeBottom, 1]].forEach(function (_a, i) {\n    var boundPos = _a[0],\n        index = _a[1];\n    nextPoses.forEach(function (nextPos) {\n      var relativeRad1 = getRad([0, 0], nextPos);\n      result.push.apply(result, boundRotate(nextPos, boundPos, index).map(function (relativeRad2) {\n        return rad + relativeRad2 - relativeRad1;\n      }).filter(function (nextRad) {\n        return !isBoundRotate$1(prevPoses, boundRect, nextRad);\n      }).map(function (nextRad) {\n        return throttle(nextRad * 180 / Math.PI, TINY_NUM);\n      }));\n    });\n  });\n  return result;\n}\n\nfunction caculateContainerPos(rootMatrix, containerRect, n) {\n  var clientPos = caculatePosition(rootMatrix, [containerRect.clientLeft, containerRect.clientTop], n);\n  return [containerRect.left + clientPos[0], containerRect.top + clientPos[1]];\n}\nfunction snapStart(moveable) {\n  var state = moveable.state;\n\n  if (state.guidelines && state.guidelines.length) {\n    return;\n  }\n\n  var _a = moveable.props,\n      _b = _a.horizontalGuidelines,\n      horizontalGuidelines = _b === void 0 ? [] : _b,\n      _c = _a.verticalGuidelines,\n      verticalGuidelines = _c === void 0 ? [] : _c,\n      _d = _a.elementGuidelines,\n      elementGuidelines = _d === void 0 ? [] : _d,\n      bounds = _a.bounds,\n      snapCenter = _a.snapCenter;\n\n  if (!bounds && !horizontalGuidelines.length && !verticalGuidelines.length && !elementGuidelines.length) {\n    return;\n  }\n\n  var containerClientRect = state.containerClientRect,\n      _e = state.targetClientRect,\n      clientTop = _e.top,\n      clientLeft = _e.left,\n      rootMatrix = state.rootMatrix,\n      is3d = state.is3d;\n  var n = is3d ? 4 : 3;\n\n  var _f = caculateContainerPos(rootMatrix, containerClientRect, n),\n      containerLeft = _f[0],\n      containerTop = _f[1];\n\n  var poses = getAbsolutePosesByState(state);\n  var targetLeft = Math.min.apply(Math, poses.map(function (pos) {\n    return pos[0];\n  }));\n  var targetTop = Math.min.apply(Math, poses.map(function (pos) {\n    return pos[1];\n  }));\n\n  var _g = minus([targetLeft, targetTop], caculateInversePosition(rootMatrix, [clientLeft - containerLeft, clientTop - containerTop], n)).map(function (pos) {\n    return roundSign(pos);\n  }),\n      distLeft = _g[0],\n      distTop = _g[1];\n\n  var guidelines = [];\n  elementGuidelines.forEach(function (el) {\n    var rect = el.getBoundingClientRect();\n    var left = rect.left - containerLeft;\n    var top = rect.top - containerTop;\n    var bottom = top + rect.height;\n    var right = left + rect.width;\n\n    var _a = caculateInversePosition(rootMatrix, [left, top], n),\n        elementLeft = _a[0],\n        elementTop = _a[1];\n\n    var _b = caculateInversePosition(rootMatrix, [right, bottom], n),\n        elementRight = _b[0],\n        elementBottom = _b[1];\n\n    var width = elementRight - elementLeft;\n    var height = elementBottom - elementTop;\n    var sizes = [width, height];\n    guidelines.push({\n      type: \"vertical\",\n      element: el,\n      pos: [throttle(elementLeft + distLeft, 0.1), elementTop],\n      size: height,\n      sizes: sizes\n    });\n    guidelines.push({\n      type: \"vertical\",\n      element: el,\n      pos: [throttle(elementRight + distLeft, 0.1), elementTop],\n      size: height,\n      sizes: sizes\n    });\n    guidelines.push({\n      type: \"horizontal\",\n      element: el,\n      pos: [elementLeft, throttle(elementTop + distTop, 0.1)],\n      size: width,\n      sizes: sizes\n    });\n    guidelines.push({\n      type: \"horizontal\",\n      element: el,\n      pos: [elementLeft, throttle(elementBottom + distTop, 0.1)],\n      size: width,\n      sizes: sizes\n    });\n\n    if (snapCenter) {\n      guidelines.push({\n        type: \"vertical\",\n        element: el,\n        pos: [throttle((elementLeft + elementRight) / 2 + distLeft, 0.1), elementTop],\n        size: height,\n        sizes: sizes,\n        center: true\n      });\n      guidelines.push({\n        type: \"horizontal\",\n        element: el,\n        pos: [elementLeft, throttle((elementTop + elementBottom) / 2 + distTop, 0.1)],\n        size: width,\n        sizes: sizes,\n        center: true\n      });\n    }\n  });\n  state.guidelines = guidelines;\n  state.enableSnap = true;\n}\nfunction hasGuidelines(moveable, ableName) {\n  var _a = moveable.props,\n      snappable = _a.snappable,\n      bounds = _a.bounds,\n      verticalGuidelines = _a.verticalGuidelines,\n      horizontalGuidelines = _a.horizontalGuidelines,\n      _b = moveable.state,\n      guidelines = _b.guidelines,\n      enableSnap = _b.enableSnap;\n\n  if (!snappable || !enableSnap || ableName && snappable !== true && snappable.indexOf(ableName) < 0) {\n    return false;\n  }\n\n  if (bounds || guidelines && guidelines.length || verticalGuidelines && verticalGuidelines.length || horizontalGuidelines && horizontalGuidelines.length) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction solveNextOffset(pos1, pos2, offset, isVertical, datas) {\n  var sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\n\n  if (!sizeOffset) {\n    return [0, 0];\n  }\n\n  var _a = getDragDist({\n    datas: datas,\n    distX: sizeOffset[0],\n    distY: sizeOffset[1]\n  }),\n      widthOffset = _a[0],\n      heightOffset = _a[1];\n\n  return [widthOffset, heightOffset];\n}\n\nfunction getNextFixedPoses(matrix, width, height, fixedPos, direction, is3d) {\n  var nextPoses = caculatePoses(matrix, width, height, is3d ? 4 : 3);\n  var nextPos = getPosByReverseDirection(nextPoses, direction);\n  return getAbsolutePoses(nextPoses, minus(fixedPos, nextPos));\n}\n\nfunction getSnapBoundOffset(boundInfo, snapInfo) {\n  if (boundInfo.isBound) {\n    return boundInfo.offset;\n  } else if (snapInfo.isSnap) {\n    return snapInfo.offset;\n  }\n\n  return 0;\n}\n\nfunction getSnapBound(boundInfo, snapInfo) {\n  if (boundInfo.isBound) {\n    return boundInfo.offset;\n  } else if (snapInfo.isSnap) {\n    return getNearestSnapGuidelineInfo(snapInfo).offset;\n  }\n\n  return 0;\n}\n\nfunction checkSnapBoundsKeepRatio(moveable, startPos, endPos, isRequest) {\n  var _a = checkBoundKeepRatio(moveable, startPos, endPos),\n      horizontalBoundInfo = _a.horizontal,\n      verticalBoundInfo = _a.vertical;\n\n  var _b = isRequest ? {\n    horizontal: {\n      isSnap: false\n    },\n    vertical: {\n      isSnap: false\n    }\n  } : checkSnapKeepRatio(moveable, startPos, endPos),\n      horizontalSnapInfo = _b.horizontal,\n      verticalSnapInfo = _b.vertical;\n\n  var horizontalOffset = getSnapBoundOffset(horizontalBoundInfo, horizontalSnapInfo);\n  var verticalOffset = getSnapBoundOffset(verticalBoundInfo, verticalSnapInfo);\n  var horizontalDist = Math.abs(horizontalOffset);\n  var verticalDist = Math.abs(verticalOffset);\n  return {\n    horizontal: {\n      isBound: horizontalBoundInfo.isBound,\n      isSnap: horizontalSnapInfo.isSnap,\n      offset: horizontalOffset,\n      dist: horizontalDist\n    },\n    vertical: {\n      isBound: verticalBoundInfo.isBound,\n      isSnap: verticalSnapInfo.isSnap,\n      offset: verticalOffset,\n      dist: verticalDist\n    }\n  };\n}\nfunction checkSnapBounds(moveable, isRequest, poses, boundPoses) {\n  if (boundPoses === void 0) {\n    boundPoses = poses;\n  }\n\n  var _a = checkBoundPoses(moveable, boundPoses.map(function (pos) {\n    return pos[0];\n  }), boundPoses.map(function (pos) {\n    return pos[1];\n  })),\n      horizontalBoundInfo = _a.horizontal,\n      verticalBoundInfo = _a.vertical;\n\n  var _b = isRequest ? {\n    horizontal: {\n      isSnap: false\n    },\n    vertical: {\n      isSnap: false\n    }\n  } : checkSnapPoses(moveable, poses.map(function (pos) {\n    return pos[0];\n  }), poses.map(function (pos) {\n    return pos[1];\n  })),\n      horizontalSnapInfo = _b.horizontal,\n      verticalSnapInfo = _b.vertical;\n\n  var horizontalOffset = getSnapBound(horizontalBoundInfo, horizontalSnapInfo);\n  var verticalOffset = getSnapBound(verticalBoundInfo, verticalSnapInfo);\n  var horizontalDist = Math.abs(horizontalOffset);\n  var verticalDist = Math.abs(verticalOffset);\n  return {\n    horizontal: {\n      isBound: horizontalBoundInfo.isBound,\n      isSnap: horizontalSnapInfo.isSnap,\n      offset: horizontalOffset,\n      dist: horizontalDist\n    },\n    vertical: {\n      isBound: verticalBoundInfo.isBound,\n      isSnap: verticalSnapInfo.isSnap,\n      offset: verticalOffset,\n      dist: verticalDist\n    }\n  };\n}\nfunction normalized(value) {\n  return value ? value / Math.abs(value) : 0;\n}\nfunction checkMaxBounds(moveable, poses, direction, fixedPos, datas) {\n  var fixedDirection = [-direction[0], -direction[1]];\n  var _a = moveable.state,\n      width = _a.width,\n      height = _a.height;\n  var bounds = moveable.props.bounds;\n  var maxWidth = Infinity;\n  var maxHeight = Infinity;\n\n  if (bounds) {\n    var directions = [[direction[0], -direction[1]], [-direction[0], direction[1]]];\n    var _b = bounds.left,\n        left_1 = _b === void 0 ? -Infinity : _b,\n        _c = bounds.top,\n        top_1 = _c === void 0 ? -Infinity : _c,\n        _d = bounds.right,\n        right_1 = _d === void 0 ? Infinity : _d,\n        _e = bounds.bottom,\n        bottom_1 = _e === void 0 ? Infinity : _e;\n    directions.forEach(function (otherDirection) {\n      var isCheckVertical = otherDirection[0] !== fixedDirection[0];\n      var isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\n      var otherPos = getPosByDirection(poses, otherDirection);\n      var verticalDirection = normalized(otherDirection[1] - fixedDirection[1]);\n      var horizontalDirection = normalized(otherDirection[0] - fixedDirection[0]);\n      var deg = getRad(fixedPos, otherPos) * 360 / Math.PI;\n\n      if (isCheckHorizontal) {\n        var nextOtherPos = otherPos.slice();\n\n        if (Math.abs(deg - 360) < 2 || Math.abs(deg - 180) < 2) {\n          nextOtherPos[1] = fixedPos[1];\n        }\n\n        var _a = solveNextOffset(fixedPos, nextOtherPos, (fixedPos[1] < otherPos[1] ? bottom_1 : top_1) - otherPos[1], false, datas),\n            heightOffset = _a[1];\n\n        if (!isNaN(heightOffset)) {\n          maxHeight = height + verticalDirection * heightOffset;\n        }\n      }\n\n      if (isCheckVertical) {\n        var nextOtherPos = otherPos.slice();\n\n        if (Math.abs(deg - 90) < 2 || Math.abs(deg - 270) < 2) {\n          nextOtherPos[0] = fixedPos[0];\n        }\n\n        var widthOffset = solveNextOffset(fixedPos, nextOtherPos, (fixedPos[0] < otherPos[0] ? right_1 : left_1) - otherPos[0], true, datas)[0];\n\n        if (!isNaN(widthOffset)) {\n          maxWidth = width + horizontalDirection * widthOffset;\n        }\n      }\n    });\n  }\n\n  return {\n    maxWidth: maxWidth,\n    maxHeight: maxHeight\n  };\n}\n\nfunction getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas) {\n  return directions.map(function (_a) {\n    var startDirection = _a[0],\n        endDirection = _a[1];\n    var otherStartPos = getPosByDirection(poses, startDirection);\n    var otherEndPos = getPosByDirection(poses, endDirection);\n    var snapBoundInfo = keepRatio ? checkSnapBoundsKeepRatio(moveable, otherStartPos, otherEndPos, isRequest) : checkSnapBounds(moveable, isRequest, [otherEndPos]);\n    var _b = snapBoundInfo.horizontal,\n        otherHorizontalDist = _b.dist,\n        otherHorizontalOffset = _b.offset,\n        isOtherHorizontalBound = _b.isBound,\n        isOtherHorizontalSnap = _b.isSnap,\n        _c = snapBoundInfo.vertical,\n        otherVerticalDist = _c.dist,\n        otherVerticalOffset = _c.offset,\n        isOtherVerticalBound = _c.isBound,\n        isOtherVerticalSnap = _c.isSnap;\n    var multiple = minus(endDirection, startDirection);\n\n    if (!otherVerticalOffset && !otherHorizontalOffset) {\n      return {\n        isBound: isOtherVerticalBound || isOtherHorizontalBound,\n        isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\n        sign: multiple,\n        offset: [0, 0]\n      };\n    }\n\n    var isVertical = otherHorizontalDist < otherVerticalDist;\n    var sizeOffset = solveNextOffset(otherStartPos, otherEndPos, -(isVertical ? otherVerticalOffset : otherHorizontalOffset), isVertical, datas).map(function (size, i) {\n      return size * (multiple[i] ? 2 / multiple[i] : 0);\n    });\n    return {\n      sign: multiple,\n      isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\n      isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\n      offset: sizeOffset\n    };\n  });\n}\n\nfunction getCheckSnapDirections(direction, keepRatio) {\n  var directions = [];\n  var fixedDirection = [-direction[0], -direction[1]];\n\n  if (direction[0] && direction[1]) {\n    directions.push([fixedDirection, [direction[0], -direction[1]]], [fixedDirection, [-direction[0], direction[1]]]);\n\n    if (keepRatio) {\n      // pass two direction condition\n      directions.push([fixedDirection, direction]);\n    }\n  } else if (direction[0]) {\n    // vertcal\n    if (keepRatio) {\n      directions.push([fixedDirection, [fixedDirection[0], -1]], [fixedDirection, [fixedDirection[0], 1]], [fixedDirection, [direction[0], -1]], [fixedDirection, direction], [fixedDirection, [direction[0], 1]]);\n    } else {\n      directions.push([[fixedDirection[0], -1], [direction[0], -1]], [[fixedDirection[0], 0], [direction[0], 0]], [[fixedDirection[0], 1], [direction[0], 1]]);\n    }\n  } else if (direction[1]) {\n    // horizontal\n    if (keepRatio) {\n      directions.push([fixedDirection, [-1, fixedDirection[1]]], [fixedDirection, [1, fixedDirection[1]]], [fixedDirection, [-1, direction[1]]], [fixedDirection, [1, direction[1]]], [fixedDirection, direction]);\n    } else {\n      directions.push([[-1, fixedDirection[1]], [-1, direction[1]]], [[0, fixedDirection[1]], [0, direction[1]]], [[1, fixedDirection[1]], [1, direction[1]]]);\n    }\n  } else {\n    // [0, 0] to all direction\n    directions.push([fixedDirection, [1, 0]], [fixedDirection, [-1, 0]], [fixedDirection, [0, -1]], [fixedDirection, [0, 1]], [[1, 0], [1, -1]], [[1, 0], [1, 1]], [[0, 1], [1, 1]], [[0, 1], [-1, 1]], [[-1, 0], [-1, -1]], [[-1, 0], [-1, 1]], [[0, -1], [1, -1]], [[0, -1], [-1, -1]]);\n  }\n\n  return directions;\n}\nfunction getSizeOffsetInfo(moveable, poses, direction, keepRatio, isRequest, datas) {\n  var directions = getCheckSnapDirections(direction, keepRatio);\n  var lines = getCheckSnapLines(poses, direction, keepRatio);\n  var offsets = getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas).concat(getInnerBoundInfo(moveable, lines, getPosByDirection(poses, [0, 0]), datas));\n  var widthOffsetInfo = getNearOffsetInfo(offsets, 0);\n  var heightOffsetInfo = getNearOffsetInfo(offsets, 1);\n  return {\n    width: {\n      isBound: widthOffsetInfo.isBound,\n      offset: widthOffsetInfo.offset[0]\n    },\n    height: {\n      isBound: heightOffsetInfo.isBound,\n      offset: heightOffsetInfo.offset[1]\n    }\n  };\n}\nfunction recheckSizeByTwoDirection(moveable, poses, width, height, maxWidth, maxHeight, direction, isRequest, datas) {\n  var snapPos = getPosByDirection(poses, direction);\n\n  var _a = checkSnapBounds(moveable, isRequest, [snapPos]),\n      horizontalOffset = _a.horizontal.offset,\n      verticalOffset = _a.vertical.offset;\n\n  if (verticalOffset || horizontalOffset) {\n    var _b = getDragDist({\n      datas: datas,\n      distX: -verticalOffset,\n      distY: -horizontalOffset\n    }),\n        nextWidthOffset = _b[0],\n        nextHeightOffset = _b[1];\n\n    var nextWidth = Math.min(maxWidth || Infinity, width + direction[0] * nextWidthOffset);\n    var nextHeight = Math.min(maxHeight || Infinity, height + direction[1] * nextHeightOffset);\n    return [nextWidth - width, nextHeight - height];\n  }\n\n  return [0, 0];\n}\nfunction checkSizeDist(moveable, getNextPoses, width, height, direction, fixedPos, isRequest, datas) {\n  var poses = getAbsolutePosesByState(moveable.state);\n  var keepRatio = moveable.props.keepRatio;\n  var widthOffset = 0;\n  var heightOffset = 0;\n\n  for (var i = 0; i < 2; ++i) {\n    var nextPoses = getNextPoses(widthOffset, heightOffset);\n\n    var _a = getSizeOffsetInfo(moveable, nextPoses, direction, keepRatio, isRequest, datas),\n        widthOffsetInfo = _a.width,\n        heightOffsetInfo = _a.height;\n\n    var isWidthBound = widthOffsetInfo.isBound;\n    var isHeightBound = heightOffsetInfo.isBound;\n    var nextWidthOffset = widthOffsetInfo.offset;\n    var nextHeightOffset = heightOffsetInfo.offset;\n\n    if (i === 1) {\n      if (!isWidthBound) {\n        nextWidthOffset = 0;\n      }\n\n      if (!isHeightBound) {\n        nextHeightOffset = 0;\n      }\n    }\n\n    if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\n      return [0, 0];\n    }\n\n    if (keepRatio) {\n      var widthDist = Math.abs(nextWidthOffset) * (width ? 1 / width : 1);\n      var heightDist = Math.abs(nextHeightOffset) * (height ? 1 / height : 1);\n      var isGetWidthOffset = isWidthBound && isHeightBound ? widthDist < heightDist : isHeightBound || !isWidthBound && widthDist < heightDist; // height * widthOffset = width * heighOffset\n\n      if (isGetWidthOffset) {\n        // width : height = ? : heightOffset\n        nextWidthOffset = width * nextHeightOffset / height;\n      } else {\n        // width : height = widthOffset : ?\n        nextHeightOffset = height * nextWidthOffset / width;\n      }\n    }\n\n    widthOffset += nextWidthOffset;\n    heightOffset += nextHeightOffset;\n  }\n\n  if (direction[0] && direction[1]) {\n    var _b = checkMaxBounds(moveable, poses, direction, fixedPos, datas),\n        maxWidth = _b.maxWidth,\n        maxHeight = _b.maxHeight;\n\n    var _c = recheckSizeByTwoDirection(moveable, getNextPoses(widthOffset, heightOffset), width + widthOffset, height + heightOffset, maxWidth, maxHeight, direction, isRequest, datas),\n        nextWidthOffset = _c[0],\n        nextHeightOffset = _c[1];\n\n    widthOffset += nextWidthOffset;\n    heightOffset += nextHeightOffset;\n  }\n\n  return [widthOffset, heightOffset];\n}\nfunction checkSnapRotate(moveable, rect, origin, rotation) {\n  if (!hasGuidelines(moveable, \"rotatable\")) {\n    return rotation;\n  }\n\n  var pos1 = rect.pos1,\n      pos2 = rect.pos2,\n      pos3 = rect.pos3,\n      pos4 = rect.pos4;\n  var rad = rotation * Math.PI / 180;\n  var prevPoses = [pos1, pos2, pos3, pos4].map(function (pos) {\n    return minus(pos, origin);\n  });\n  var nextPoses = prevPoses.map(function (pos) {\n    return rotate(pos, rad);\n  });\n  var result = checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation).concat(checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation));\n  result.sort(function (a, b) {\n    return Math.abs(a - rotation) - Math.abs(b - rotation);\n  });\n\n  if (result.length) {\n    return result[0];\n  } else {\n    return rotation;\n  }\n}\nfunction checkSnapSize(moveable, width, height, direction, fixedPos, isRequest, datas) {\n  if (!hasGuidelines(moveable, \"resizable\")) {\n    return [0, 0];\n  }\n\n  var _a = moveable.state,\n      matrix = _a.matrix,\n      is3d = _a.is3d;\n  return checkSizeDist(moveable, function (widthOffset, heightOffset) {\n    return getNextFixedPoses(matrix, width + widthOffset, height + heightOffset, fixedPos, direction, is3d);\n  }, width, height, direction, fixedPos, isRequest, datas);\n}\nfunction checkSnapScale(moveable, scale, direction, fixedPos, isRequest, datas) {\n  var width = datas.width,\n      height = datas.height;\n\n  if (!hasGuidelines(moveable, \"scalable\")) {\n    return [0, 0];\n  }\n\n  var is3d = datas.is3d;\n  var sizeDist = checkSizeDist(moveable, function (widthOffset, heightOffset) {\n    return getNextFixedPoses(scaleMatrix(datas, plus(scale, [widthOffset / width, heightOffset / height])), width, height, fixedPos, direction, is3d);\n  }, width, height, direction, fixedPos, isRequest, datas);\n  return [sizeDist[0] / width, sizeDist[1] / height];\n}\nfunction solveEquation(pos1, pos2, snapOffset, isVertical) {\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  }\n\n  if (!dx) {\n    // y = 0 * x + b\n    // only horizontal\n    if (!isVertical) {\n      return [0, snapOffset];\n    }\n\n    return [0, 0];\n  }\n\n  if (!dy) {\n    // only vertical\n    if (isVertical) {\n      return [snapOffset, 0];\n    }\n\n    return [0, 0];\n  } // y = ax + b\n\n\n  var a = dy / dx;\n  var b = pos1[1] - a * pos1[0];\n\n  if (isVertical) {\n    // y = a * x + b\n    var y = a * (pos2[0] + snapOffset) + b;\n    return [snapOffset, y - pos2[1]];\n  } else {\n    // x = (y - b) / a\n    var x = (pos2[1] + snapOffset - b) / a;\n    return [x - pos2[0], snapOffset];\n  }\n}\nfunction startCheckSnapDrag(moveable, datas) {\n  datas.absolutePoses = getAbsolutePosesByState(moveable.state);\n}\nfunction checkThrottleDragRotate(throttleDragRotate, _a, _b, _c, _d) {\n  var distX = _a[0],\n      distY = _a[1];\n  var isVerticalBound = _b[0],\n      isHorizontalBound = _b[1];\n  var isVerticalSnap = _c[0],\n      isHorizontalSnap = _c[1];\n  var verticalOffset = _d[0],\n      horizontalOffset = _d[1];\n  var offsetX = -verticalOffset;\n  var offsetY = -horizontalOffset;\n\n  if (throttleDragRotate && distX && distY) {\n    offsetX = 0;\n    offsetY = 0;\n    var adjustPoses = [];\n\n    if (isVerticalBound && isHorizontalBound) {\n      adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\n    } else if (isVerticalBound) {\n      adjustPoses.push([verticalOffset, 0]);\n    } else if (isHorizontalBound) {\n      adjustPoses.push([0, horizontalOffset]);\n    } else if (isVerticalSnap && isHorizontalSnap) {\n      adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\n    } else if (isVerticalSnap) {\n      adjustPoses.push([verticalOffset, 0]);\n    } else if (isHorizontalSnap) {\n      adjustPoses.push([0, horizontalOffset]);\n    }\n\n    if (adjustPoses.length) {\n      adjustPoses.sort(function (a, b) {\n        return getDistSize(minus([distX, distY], a)) - getDistSize(minus([distX, distY], b));\n      });\n      var adjustPos = adjustPoses[0];\n\n      if (adjustPos[0] && Math.abs(distX) > TINY_NUM) {\n        offsetX = -adjustPos[0];\n        offsetY = distY * Math.abs(distX + offsetX) / Math.abs(distX) - distY;\n      } else if (adjustPos[1] && Math.abs(distY) > TINY_NUM) {\n        var prevDistY = distY;\n        offsetY = -adjustPos[1];\n        offsetX = distX * Math.abs(distY + offsetY) / Math.abs(prevDistY) - distX;\n      }\n\n      if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\n        if (Math.abs(offsetX) > TINY_NUM && Math.abs(offsetX) < Math.abs(verticalOffset)) {\n          var scale = Math.abs(verticalOffset) / Math.abs(offsetX);\n          offsetX *= scale;\n          offsetY *= scale;\n        } else if (Math.abs(offsetY) > TINY_NUM && Math.abs(offsetY) < Math.abs(horizontalOffset)) {\n          var scale = Math.abs(horizontalOffset) / Math.abs(offsetY);\n          offsetX *= scale;\n          offsetY *= scale;\n        } else {\n          offsetX = maxOffset(-verticalOffset, offsetX);\n          offsetY = maxOffset(-horizontalOffset, offsetY);\n        }\n      }\n    }\n  } else {\n    offsetX = distX || isVerticalBound ? -verticalOffset : 0;\n    offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\n  }\n\n  return [offsetX, offsetY];\n}\nfunction checkSnapDrag(moveable, distX, distY, throttleDragRotate, isRequest, datas) {\n  if (!hasGuidelines(moveable, \"draggable\")) {\n    return [{\n      isSnap: false,\n      isBound: false,\n      offset: 0\n    }, {\n      isSnap: false,\n      isBound: false,\n      offset: 0\n    }];\n  }\n\n  var poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\n\n  var _a = getRect(poses),\n      left = _a.left,\n      right = _a.right,\n      top = _a.top,\n      bottom = _a.bottom;\n\n  var snapCenter = moveable.props.snapCenter;\n  var snapPoses = [[left, top], [right, top], [left, bottom], [right, bottom]];\n\n  if (snapCenter) {\n    snapPoses.push([(left + right) / 2, (top + bottom) / 2]);\n  }\n\n  var _b = checkSnapBounds(moveable, isRequest, snapPoses, poses),\n      verticalSnapBoundInfo = _b.vertical,\n      horizontalSnapBoundInfo = _b.horizontal;\n\n  var _c = getInnerBoundDragInfo(moveable, poses, datas),\n      verticalInnerBoundInfo = _c.vertical,\n      horizontalInnerBoundInfo = _c.horizontal;\n\n  var isVerticalSnap = verticalSnapBoundInfo.isSnap;\n  var isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\n  var isVerticalBound = verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\n  var isHorizontalBound = horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\n  var verticalOffset = maxOffset(verticalSnapBoundInfo.offset, verticalInnerBoundInfo.offset);\n  var horizontalOffset = maxOffset(horizontalSnapBoundInfo.offset, horizontalInnerBoundInfo.offset);\n\n  var _d = checkThrottleDragRotate(throttleDragRotate, [distX, distY], [isVerticalBound, isHorizontalBound], [isVerticalSnap, isHorizontalSnap], [verticalOffset, horizontalOffset]),\n      offsetX = _d[0],\n      offsetY = _d[1];\n\n  return [{\n    isBound: isVerticalBound,\n    isSnap: isVerticalSnap,\n    offset: offsetX\n  }, {\n    isBound: isHorizontalBound,\n    isSnap: isHorizontalSnap,\n    offset: offsetY\n  }];\n}\n\nfunction getSnapGuidelines(posInfos) {\n  var guidelines = [];\n  posInfos.forEach(function (posInfo) {\n    posInfo.guidelineInfos.forEach(function (_a) {\n      var guideline = _a.guideline;\n\n      if (guidelines.indexOf(guideline) > -1) {\n        return;\n      }\n\n      guidelines.push(guideline);\n    });\n  });\n  return guidelines;\n}\n\nfunction getElementGuidelineDist(elementPos, elementSize, targetPos, targetSize) {\n  // relativePos < 0  => element(l)  ---  (r)target\n  // relativePos > 0  => target(l)   ---  (r)element\n  var relativePos = elementPos - targetPos;\n  var startPos = relativePos < 0 ? relativePos + elementSize : targetSize;\n  var endPos = relativePos < 0 ? 0 : relativePos;\n  var size = endPos - startPos;\n  return {\n    size: size,\n    pos: startPos\n  };\n}\n\nfunction groupByElementGuidelines(guidelines, clientPos, size, index) {\n  var groupInfos = [];\n  var group = groupBy(guidelines.filter(function (_a) {\n    var element = _a.element,\n        gap = _a.gap;\n    return element && !gap;\n  }), function (_a) {\n    var element = _a.element,\n        pos = _a.pos;\n    var elementPos = pos[index];\n    var sign = Math.min(0, elementPos - clientPos) < 0 ? -1 : 1;\n    var groupKey = sign + \"_\" + pos[index ? 0 : 1];\n    var groupInfo = find(groupInfos, function (_a) {\n      var groupElement = _a[0],\n          groupPos = _a[1];\n      return element === groupElement && elementPos === groupPos;\n    });\n\n    if (groupInfo) {\n      return groupInfo[2];\n    }\n\n    groupInfos.push([element, elementPos, groupKey]);\n    return groupKey;\n  });\n  group.forEach(function (elementGuidelines) {\n    elementGuidelines.sort(function (a, b) {\n      var result = getElementGuidelineDist(a.pos[index], a.size, clientPos, size).size - getElementGuidelineDist(b.pos[index], a.size, clientPos, size).size;\n      return result || a.pos[index ? 0 : 1] - b.pos[index ? 0 : 1];\n    });\n  });\n  return group;\n}\n\nfunction renderElementGroup(group, _a, minPos, clientPos, clientSize, targetPos, snapThreshold, isDisplaySnapDigit, snapDigit, index, snapDistFormat, React) {\n  var directionName = _a[0],\n      posName1 = _a[1],\n      posName2 = _a[2],\n      sizeName = _a[3];\n  return flat(group.map(function (elementGuidelines, i) {\n    var isFirstRenderSize = true;\n    return elementGuidelines.map(function (_a, j) {\n      var _b;\n\n      var pos = _a.pos,\n          size = _a.size;\n\n      var _c = getElementGuidelineDist(pos[index], size, clientPos, clientSize),\n          linePos = _c.pos,\n          lineSize = _c.size;\n\n      if (lineSize < snapThreshold) {\n        return null;\n      }\n\n      var isRenderSize = isFirstRenderSize;\n      isFirstRenderSize = false;\n      var snapSize = isDisplaySnapDigit && isRenderSize ? parseFloat(lineSize.toFixed(snapDigit)) : 0;\n      return React.createElement(\"div\", {\n        className: prefix(\"line\", directionName, \"guideline\", \"dashed\"),\n        \"data-size\": snapSize > 0 ? snapDistFormat(snapSize) : \"\",\n        key: directionName + \"LinkGuidline\" + i + \"-\" + j,\n        style: (_b = {}, _b[posName1] = minPos + linePos + \"px\", _b[posName2] = -targetPos + pos[index ? 0 : 1] + \"px\", _b[sizeName] = lineSize + \"px\", _b)\n      });\n    });\n  }));\n}\n\nfunction renderSnapPoses(snapPoses, _a, minPos, targetPos, size, React) {\n  var directionName = _a[0],\n      posName1 = _a[1],\n      posName2 = _a[2],\n      sizeName = _a[3];\n  return snapPoses.map(function (pos, i) {\n    var _a;\n\n    return React.createElement(\"div\", {\n      className: prefix(\"line\", directionName, \"guideline\", \"target\", \"bold\"),\n      key: directionName + \"TargetGuidline\" + i,\n      style: (_a = {}, _a[posName1] = minPos + \"px\", _a[posName2] = -targetPos + pos + \"px\", _a[sizeName] = size + \"px\", _a)\n    });\n  });\n}\n\nfunction renderGuidelines(guidelines, _a, targetPos1, targetPos2, index, React) {\n  var directionName = _a[0],\n      posName1 = _a[1],\n      posName2 = _a[2],\n      sizeName = _a[3];\n  return guidelines.map(function (guideline, i) {\n    var _a;\n\n    var pos = guideline.pos,\n        size = guideline.size,\n        element = guideline.element;\n    return React.createElement(\"div\", {\n      className: prefix(\"line\", directionName, \"guideline\", element ? \"bold\" : \"\"),\n      key: directionName + \"Guidline\" + i,\n      style: (_a = {}, _a[posName1] = -targetPos1 + pos[index] + \"px\", _a[posName2] = -targetPos2 + pos[index ? 0 : 1] + \"px\", _a[sizeName] = size + \"px\", _a)\n    });\n  });\n}\n\nfunction getGapGuidelinesToStart(guidelines, index, targetPos, targetSizes, guidelinePos, gap, otherPos) {\n  var absGap = Math.abs(gap);\n  var start = guidelinePos[index] + (gap > 0 ? targetSizes[0] : 0);\n  return guidelines.filter(function (_a) {\n    var gapPos = _a.pos;\n    return gapPos[index] <= targetPos[index];\n  }).sort(function (_a, _b) {\n    var aPos = _a.pos;\n    var bPos = _b.pos;\n    return bPos[index] - aPos[index];\n  }).filter(function (_a) {\n    var gapPos = _a.pos,\n        gapSizes = _a.sizes;\n    var nextPos = gapPos[index];\n\n    if (throttle(nextPos + gapSizes[index], 0.0001) === throttle(start - absGap, 0.0001)) {\n      start = nextPos;\n      return true;\n    }\n\n    return false;\n  }).map(function (gapGuideline) {\n    var renderPos = -targetPos[index] + gapGuideline.pos[index] + gapGuideline.sizes[index];\n    return __assign({}, gapGuideline, {\n      gap: gap,\n      renderPos: index ? [otherPos, renderPos] : [renderPos, otherPos]\n    });\n  });\n}\n\nfunction getGapGuidelinesToEnd(guidelines, index, targetPos, targetSizes, guidelinePos, gap, otherPos) {\n  var absGap = Math.abs(gap);\n  var start = guidelinePos[index] + (gap < 0 ? targetSizes[index] : 0);\n  return guidelines.filter(function (_a) {\n    var gapPos = _a.pos;\n    return gapPos[index] > targetPos[index];\n  }).sort(function (_a, _b) {\n    var aPos = _a.pos;\n    var bPos = _b.pos;\n    return aPos[index] - bPos[index];\n  }).filter(function (_a) {\n    var gapPos = _a.pos,\n        gapSizes = _a.sizes;\n    var nextPos = gapPos[index];\n\n    if (throttle(nextPos, 0.0001) === throttle(start + absGap, 0.0001)) {\n      start = nextPos + gapSizes[index];\n      return true;\n    }\n\n    return false;\n  }).map(function (gapGuideline) {\n    var renderPos = -targetPos[index] + gapGuideline.pos[index] - absGap;\n    return __assign({}, gapGuideline, {\n      gap: gap,\n      renderPos: index ? [otherPos, renderPos] : [renderPos, otherPos]\n    });\n  });\n}\n\nfunction getGapGuidelines$1(guidelines, type, targetPos, targetSizes) {\n  var elementGuidelines = guidelines.filter(function (_a) {\n    var element = _a.element,\n        gap = _a.gap,\n        guidelineType = _a.type;\n    return element && gap && guidelineType === type;\n  });\n\n  var _a = type === \"vertical\" ? [0, 1] : [1, 0],\n      index = _a[0],\n      otherIndex = _a[1];\n\n  return flat(elementGuidelines.map(function (guideline, i) {\n    var pos = guideline.pos;\n    var gap = guideline.gap;\n    var gapGuidelines = guideline.gapGuidelines;\n    var sizes = guideline.sizes;\n    var offset = minOffset(pos[otherIndex] + sizes[otherIndex] - targetPos[otherIndex], pos[otherIndex] - targetPos[otherIndex] - targetSizes[otherIndex]);\n    var minSize = Math.min(sizes[otherIndex], targetSizes[otherIndex]);\n\n    if (offset > 0 && offset > minSize) {\n      offset = (offset - minSize / 2) * 2;\n    } else if (offset < 0 && offset < -minSize) {\n      offset = (offset + minSize / 2) * 2;\n    }\n\n    var otherPos = (offset > 0 ? 0 : targetSizes[otherIndex]) + offset / 2;\n    return getGapGuidelinesToStart(gapGuidelines, index, targetPos, targetSizes, pos, gap, otherPos).concat(getGapGuidelinesToEnd(gapGuidelines, index, targetPos, targetSizes, pos, gap, otherPos));\n  }));\n}\n\nfunction renderGapGuidelines(moveable, gapGuidelines, type, _a, snapDistFormat, React) {\n  var directionName = _a[0],\n      posName1 = _a[1],\n      posName2 = _a[2],\n      sizeName = _a[3];\n  var _b = moveable.props,\n      _c = _b.snapDigit,\n      snapDigit = _c === void 0 ? 0 : _c,\n      _d = _b.isDisplaySnapDigit,\n      isDisplaySnapDigit = _d === void 0 ? true : _d;\n  var otherType = type === \"vertical\" ? \"horizontal\" : \"vertical\";\n\n  var _e = type === \"vertical\" ? [0, 1] : [1, 0],\n      index = _e[0],\n      otherIndex = _e[1];\n\n  return gapGuidelines.map(function (_a, i) {\n    var _b;\n\n    var renderPos = _a.renderPos,\n        gap = _a.gap;\n    var absGap = Math.abs(gap);\n    var snapSize = isDisplaySnapDigit ? parseFloat(absGap.toFixed(snapDigit)) : 0;\n    return React.createElement(\"div\", {\n      className: prefix(\"line\", directionName, \"guideline\", \"gap\"),\n      \"data-size\": snapSize > 0 ? snapDistFormat(snapSize) : \"\",\n      key: otherType + \"GapGuideline\" + i,\n      style: (_b = {}, _b[posName1] = renderPos[index] + \"px\", _b[posName2] = renderPos[otherIndex] + \"px\", _b[sizeName] = absGap + \"px\", _b)\n    });\n  });\n}\n\nfunction addBoundGuidelines(moveable, verticalPoses, horizontalPoses, verticalSnapPoses, horizontalSnapPoses) {\n  var _a = checkBoundPoses(moveable, verticalPoses, horizontalPoses),\n      _b = _a.vertical,\n      isVerticalBound = _b.isBound,\n      verticalBoundPos = _b.pos,\n      _c = _a.horizontal,\n      isHorizontalBound = _c.isBound,\n      horizontalBoundPos = _c.pos;\n\n  if (isVerticalBound && verticalSnapPoses.indexOf(verticalBoundPos) < 0) {\n    verticalSnapPoses.push(verticalBoundPos);\n  }\n\n  if (isHorizontalBound && horizontalSnapPoses.indexOf(horizontalBoundPos) < 0) {\n    horizontalSnapPoses.push(horizontalBoundPos);\n  }\n\n  var _d = checkInnerBoundPoses(moveable),\n      verticalInnerBoundPoses = _d.vertical,\n      horizontalInnerBoundPoses = _d.horizontal;\n\n  verticalSnapPoses.push.apply(verticalSnapPoses, verticalInnerBoundPoses.filter(function (pos) {\n    return verticalSnapPoses.indexOf(pos) < 0;\n  }));\n  horizontalSnapPoses.push.apply(horizontalSnapPoses, horizontalInnerBoundPoses.filter(function (pos) {\n    return horizontalSnapPoses.indexOf(pos) < 0;\n  }));\n}\n\nvar Snappable = {\n  name: \"snappable\",\n  props: {\n    snappable: [Boolean, Array],\n    snapCenter: Boolean,\n    snapHorizontal: Boolean,\n    snapVertical: Boolean,\n    snapElement: Boolean,\n    snapGap: Boolean,\n    isDisplaySnapDigit: Boolean,\n    snapDigit: Number,\n    snapThreshold: Number,\n    horizontalGuidelines: Array,\n    verticalGuidelines: Array,\n    elementGuidelines: Array,\n    bounds: Object,\n    innerBounds: Object\n  },\n  render: function (moveable, React) {\n    var _a = moveable.state,\n        targetTop = _a.top,\n        targetLeft = _a.left,\n        pos1 = _a.pos1,\n        pos2 = _a.pos2,\n        pos3 = _a.pos3,\n        pos4 = _a.pos4,\n        snapRenderInfo = _a.snapRenderInfo,\n        targetClientRect = _a.targetClientRect,\n        containerClientRect = _a.containerClientRect,\n        is3d = _a.is3d,\n        rootMatrix = _a.rootMatrix;\n\n    if (!snapRenderInfo || !hasGuidelines(moveable, \"\")) {\n      return [];\n    }\n\n    var n = is3d ? 4 : 3;\n    var minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\n    var minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\n    var containerPos = caculateContainerPos(rootMatrix, containerClientRect, n);\n\n    var _b = caculateInversePosition(rootMatrix, [targetClientRect.left - containerPos[0], targetClientRect.top - containerPos[1]], n),\n        clientLeft = _b[0],\n        clientTop = _b[1];\n\n    var _c = moveable.props,\n        _d = _c.snapThreshold,\n        snapThreshold = _d === void 0 ? 5 : _d,\n        _e = _c.snapDigit,\n        snapDigit = _e === void 0 ? 0 : _e,\n        _f = _c.isDisplaySnapDigit,\n        isDisplaySnapDigit = _f === void 0 ? true : _f,\n        _g = _c.snapDistFormat,\n        snapDistFormat = _g === void 0 ? function (v) {\n      return v;\n    } : _g;\n    var poses = getAbsolutePosesByState(moveable.state);\n\n    var _h = getRect(poses),\n        width = _h.width,\n        height = _h.height,\n        top = _h.top,\n        left = _h.left,\n        bottom = _h.bottom,\n        right = _h.right;\n\n    var verticalSnapPoses = [];\n    var horizontalSnapPoses = [];\n    var verticalGuidelines = [];\n    var horizontalGuidelines = [];\n    var snapInfos = [];\n\n    if (!snapRenderInfo.request) {\n      if (snapRenderInfo.direction) {\n        snapInfos.push(getSnapInfosByDirection(moveable, poses, snapRenderInfo.direction));\n      }\n\n      if (snapRenderInfo.snap) {\n        var rect = getRect(poses);\n\n        if (snapRenderInfo.center) {\n          rect.middle = (rect.top + rect.bottom) / 2;\n          rect.center = (rect.left + rect.right) / 2;\n        }\n\n        snapInfos.push(checkSnaps(moveable, rect, true, 1));\n      }\n\n      snapInfos.forEach(function (snapInfo) {\n        var verticalPosInfos = snapInfo.vertical.posInfos,\n            horizontalPosInfos = snapInfo.horizontal.posInfos;\n        verticalSnapPoses.push.apply(verticalSnapPoses, verticalPosInfos.map(function (posInfo) {\n          return posInfo.pos;\n        }));\n        horizontalSnapPoses.push.apply(horizontalSnapPoses, horizontalPosInfos.map(function (posInfo) {\n          return posInfo.pos;\n        }));\n        verticalGuidelines.push.apply(verticalGuidelines, getSnapGuidelines(verticalPosInfos));\n        horizontalGuidelines.push.apply(horizontalGuidelines, getSnapGuidelines(horizontalPosInfos));\n      });\n    }\n\n    addBoundGuidelines(moveable, [left, right], [top, bottom], verticalSnapPoses, horizontalSnapPoses);\n    var elementHorizontalGroup = groupByElementGuidelines(horizontalGuidelines, clientLeft, width, 0);\n    var elementVerticalGroup = groupByElementGuidelines(verticalGuidelines, clientTop, height, 1);\n    var horizontalNames = [\"horizontal\", \"left\", \"top\", \"width\"];\n    var verticalNames = [\"vertical\", \"top\", \"left\", \"height\"];\n    var gapVerticalGuidelines = getGapGuidelines$1(verticalGuidelines, \"vertical\", [targetLeft, targetTop], [width, height]);\n    var gapHorizontalGuidelines = getGapGuidelines$1(horizontalGuidelines, \"horizontal\", [targetLeft, targetTop], [width, height]);\n    var allGuidelines = verticalGuidelines.concat(horizontalGuidelines);\n    triggerEvent(moveable, \"onSnap\", {\n      guidelines: allGuidelines.filter(function (_a) {\n        var element = _a.element;\n        return !element;\n      }),\n      elements: groupBy(allGuidelines.filter(function (_a) {\n        var element = _a.element;\n        return element;\n      }), function (_a) {\n        var element = _a.element;\n        return element;\n      }),\n      gaps: gapVerticalGuidelines.concat(gapHorizontalGuidelines)\n    }, true);\n    return renderGapGuidelines(moveable, gapVerticalGuidelines, \"vertical\", horizontalNames, snapDistFormat, React).concat(renderGapGuidelines(moveable, gapHorizontalGuidelines, \"horizontal\", verticalNames, snapDistFormat, React), renderElementGroup(elementHorizontalGroup, horizontalNames, minLeft, clientLeft, width, targetTop, snapThreshold, isDisplaySnapDigit, snapDigit, 0, snapDistFormat, React), renderElementGroup(elementVerticalGroup, verticalNames, minTop, clientTop, height, targetLeft, snapThreshold, isDisplaySnapDigit, snapDigit, 1, snapDistFormat, React), renderSnapPoses(horizontalSnapPoses, horizontalNames, minLeft, targetTop, width, React), renderSnapPoses(verticalSnapPoses, verticalNames, minTop, targetLeft, height, React), renderGuidelines(horizontalGuidelines, horizontalNames, targetLeft, targetTop, 0, React), renderGuidelines(verticalGuidelines, verticalNames, targetTop, targetLeft, 1, React));\n  },\n  dragStart: function (moveable, e) {\n    moveable.state.snapRenderInfo = {\n      request: e.isRequest,\n      snap: true,\n      center: true\n    };\n    snapStart(moveable);\n  },\n  pinchStart: function (moveable) {\n    this.unset(moveable);\n  },\n  dragEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  dragControlCondition: function (e) {\n    return directionCondition(e) || dragControlCondition(e);\n  },\n  dragControlStart: function (moveable, e) {\n    moveable.state.snapRenderInfo = null;\n    snapStart(moveable);\n  },\n  dragControlEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  dragGroupStart: function (moveable, e) {\n    this.dragStart(moveable, e);\n  },\n  dragGroupEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  dragGroupControlStart: function (moveable, e) {\n    moveable.state.snapRenderInfo = null;\n    snapStart(moveable);\n  },\n  dragGroupControlEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  unset: function (moveable) {\n    var state = moveable.state;\n    state.enableSnap = false;\n    state.guidelines = [];\n    state.snapRenderInfo = null;\n  }\n};\n\n/**\n * @namespace Draggable\n * @memberof Moveable\n */\n\nvar Draggable = {\n  name: \"draggable\",\n  props: {\n    draggable: Boolean,\n    throttleDrag: Number,\n    throttleDragRotate: Number\n  },\n  render: function (moveable, React) {\n    var throttleDragRotate = moveable.props.throttleDragRotate;\n    var _a = moveable.state,\n        dragInfo = _a.dragInfo,\n        beforeOrigin = _a.beforeOrigin;\n\n    if (!throttleDragRotate || !dragInfo) {\n      return;\n    }\n\n    var dist = dragInfo.dist;\n\n    if (!dist[0] && !dist[1]) {\n      return;\n    }\n\n    var width = getDistSize(dist);\n    var rad = getRad(dist, [0, 0]);\n    return React.createElement(\"div\", {\n      className: prefix(\"line\", \"horizontal\", \"dragline\", \"dashed\"),\n      key: \"dragRotateGuideline\",\n      style: {\n        width: width + \"px\",\n        transform: \"translate(\" + beforeOrigin[0] + \"px, \" + beforeOrigin[1] + \"px) rotate(\" + rad + \"rad)\"\n      }\n    });\n  },\n  dragStart: function (moveable, e) {\n    var datas = e.datas,\n        parentEvent = e.parentEvent,\n        parentDragger = e.parentDragger;\n    var state = moveable.state;\n    var targetTransform = state.targetTransform,\n        target = state.target,\n        dragger = state.dragger;\n\n    if (dragger) {\n      return false;\n    }\n\n    state.dragger = parentDragger || moveable.targetDragger;\n    var style = window.getComputedStyle(target);\n    datas.datas = {};\n    datas.left = parseFloat(style.left || \"\") || 0;\n    datas.top = parseFloat(style.top || \"\") || 0;\n    datas.bottom = parseFloat(style.bottom || \"\") || 0;\n    datas.right = parseFloat(style.right || \"\") || 0;\n    datas.transform = targetTransform;\n    datas.startTranslate = [0, 0];\n    setDragStart(moveable, {\n      datas: datas\n    });\n    datas.prevDist = [0, 0];\n    datas.prevBeforeDist = [0, 0];\n    datas.isDrag = false;\n    startCheckSnapDrag(moveable, datas);\n    var params = fillParams(moveable, e, {\n      set: function (translate) {\n        datas.startTranslate = translate;\n      }\n    });\n    var result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\n\n    if (result !== false) {\n      datas.isDrag = true;\n      moveable.state.dragInfo = {\n        startRect: moveable.getRect(),\n        dist: [0, 0]\n      };\n    } else {\n      state.dragger = null;\n      datas.isPinch = false;\n    }\n\n    return datas.isDrag ? params : false;\n  },\n  drag: function (moveable, e) {\n    var datas = e.datas,\n        parentEvent = e.parentEvent,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        isRequest = e.isRequest;\n    var distX = e.distX,\n        distY = e.distY;\n    var isDrag = datas.isDrag,\n        prevDist = datas.prevDist,\n        prevBeforeDist = datas.prevBeforeDist,\n        transform = datas.transform,\n        startTranslate = datas.startTranslate;\n\n    if (!isDrag) {\n      return;\n    }\n\n    var props = moveable.props;\n    var parentMoveable = props.parentMoveable;\n    var throttleDrag = parentEvent ? 0 : props.throttleDrag || 0;\n    var throttleDragRotate = parentEvent ? 0 : props.throttleDragRotate || 0;\n    var isSnap = false;\n    var dragRotateRad = 0;\n\n    if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\n      var deg = throttle(getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate);\n      var r = getDistSize([distX, distY]);\n      dragRotateRad = deg * Math.PI / 180;\n      distX = r * Math.cos(dragRotateRad);\n      distY = r * Math.sin(dragRotateRad);\n    }\n\n    if (!isPinch && !parentEvent && !parentFlag && (distX || distY)) {\n      var _a = checkSnapDrag(moveable, distX, distY, throttleDragRotate, isRequest, datas),\n          verticalInfo = _a[0],\n          horizontalInfo = _a[1];\n\n      var isVerticalSnap = verticalInfo.isSnap,\n          isVerticalBound = verticalInfo.isBound,\n          verticalOffset = verticalInfo.offset;\n      var isHorizontalSnap = horizontalInfo.isSnap,\n          isHorizontalBound = horizontalInfo.isBound,\n          horizontalOffset = horizontalInfo.offset;\n      isSnap = isVerticalSnap || isHorizontalSnap || isVerticalBound || isHorizontalBound;\n      distX += verticalOffset;\n      distY += horizontalOffset;\n    }\n\n    datas.passDeltaX = distX - (datas.passDistX || 0);\n    datas.passDeltaY = distY - (datas.passDistY || 0);\n    datas.passDistX = distX;\n    datas.passDistY = distY;\n    var beforeTranslate = plus(getDragDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    }, true), startTranslate);\n    var translate = plus(getDragDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    }, false), startTranslate);\n\n    if (!throttleDragRotate && !isSnap) {\n      throttleArray(translate, throttleDrag);\n      throttleArray(beforeTranslate, throttleDrag);\n    }\n\n    var beforeDist = minus(beforeTranslate, startTranslate);\n    var dist = minus(translate, startTranslate);\n    var delta = minus(dist, prevDist);\n    var beforeDelta = minus(beforeDist, prevBeforeDist);\n    datas.prevDist = dist;\n    datas.prevBeforeDist = beforeDist;\n    var left = datas.left + beforeDist[0];\n    var top = datas.top + beforeDist[1];\n    var right = datas.right - beforeDist[0];\n    var bottom = datas.bottom - beforeDist[1];\n    var nextTransform = transform + \" translate(\" + dist[0] + \"px, \" + dist[1] + \"px)\";\n    moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\n\n    if (!parentEvent && !parentMoveable && delta.every(function (num) {\n      return !num;\n    }) && beforeDelta.some(function (num) {\n      return !num;\n    })) {\n      return;\n    }\n\n    var params = fillParams(moveable, e, {\n      transform: nextTransform,\n      dist: dist,\n      delta: delta,\n      translate: translate,\n      beforeDist: beforeDist,\n      beforeDelta: beforeDelta,\n      beforeTranslate: beforeTranslate,\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      isPinch: isPinch\n    });\n    !parentEvent && triggerEvent(moveable, \"onDrag\", params);\n    return params;\n  },\n  dragEnd: function (moveable, e) {\n    var parentEvent = e.parentEvent,\n        datas = e.datas,\n        isDrag = e.isDrag;\n    moveable.state.dragger = null;\n    moveable.state.dragInfo = null;\n\n    if (!datas.isDrag) {\n      return;\n    }\n\n    datas.isDrag = false;\n    !parentEvent && triggerEvent(moveable, \"onDragEnd\", fillParams(moveable, e, {\n      isDrag: isDrag\n    }));\n    return isDrag;\n  },\n  dragGroupStart: function (moveable, e) {\n    var datas = e.datas,\n        clientX = e.clientX,\n        clientY = e.clientY;\n    var params = this.dragStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    var events = triggerChildDragger(moveable, this, \"dragStart\", [clientX || 0, clientY || 0], e, false);\n\n    var nextParams = __assign({}, params, {\n      targets: moveable.props.targets,\n      events: events\n    });\n\n    var result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\n    datas.isDrag = result !== false;\n    return datas.isDrag ? params : false;\n  },\n  dragGroup: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isDrag) {\n      return;\n    }\n\n    var params = this.drag(moveable, e);\n    var _a = e.datas,\n        passDeltaX = _a.passDeltaX,\n        passDeltaY = _a.passDeltaY;\n    var events = triggerChildDragger(moveable, this, \"drag\", [passDeltaX, passDeltaY], e, false);\n\n    if (!params) {\n      return;\n    }\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events\n    }, params);\n\n    triggerEvent(moveable, \"onDragGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isDrag) {\n      return;\n    }\n\n    this.dragEnd(moveable, e);\n    triggerChildDragger(moveable, this, \"dragEnd\", [0, 0], e, false);\n    triggerEvent(moveable, \"onDragGroupEnd\", fillParams(moveable, e, {\n      targets: moveable.props.targets,\n      isDrag: isDrag\n    }));\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Draggable#request\n   * @param {object} [e] - the draggable's request parameter\n   * @param {number} [e.x] - x position\n   * @param {number} [e.y] - y position\n   * @param {number} [e.deltaX] - X number to move\n   * @param {number} [e.deltaY] - Y number to move\n   * @param {number} [e.isInstant] - Whether to execute the request instantly\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * // Use Relative Value\n   * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10, isInstant: true });\n   * // Use Absolute Value\n   * moveable.request(\"draggable\", { x: 200, y: 100, isInstant: true });\n   *\n   * // requestStart\n   * const requester = moveable.request(\"draggable\");\n   *\n   * // request\n   * // Use Relative Value\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * // Use Absolute Value\n   * moveable.request(\"draggable\", { x: 200, y: 100, isInstant: true });\n   * moveable.request(\"draggable\", { x: 220, y: 100, isInstant: true });\n   * moveable.request(\"draggable\", { x: 240, y: 100, isInstant: true });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function (moveable) {\n    var datas = {};\n    var rect = moveable.getRect();\n    var distX = 0;\n    var distY = 0;\n    return {\n      isControl: false,\n      requestStart: function (e) {\n        return {\n          datas: datas\n        };\n      },\n      request: function (e) {\n        if (\"x\" in e) {\n          distX = e.x - rect.left;\n        } else if (\"deltaX\" in e) {\n          distX += e.deltaX;\n        }\n\n        if (\"y\" in e) {\n          distY = e.y - rect.top;\n        } else if (\"deltaY\" in e) {\n          distY += e.deltaY;\n        }\n\n        return {\n          datas: datas,\n          distX: distX,\n          distY: distY\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  },\n  unset: function (moveable) {\n    moveable.state.dragInfo = null;\n  }\n};\n\n/**\n * @namespace Rotatable\n * @memberof Moveable\n */\n\nfunction setRotateStartInfo(moveable, datas, clientX, clientY, origin, rect) {\n  var n = moveable.state.is3d ? 4 : 3;\n  var nextOrigin = caculatePosition(moveable.state.rootMatrix, origin, n);\n  var startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\n  datas.startAbsoluteOrigin = startAbsoluteOrigin;\n  datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\n  datas.prevSnapDeg = datas.prevDeg;\n  datas.startDeg = datas.prevDeg;\n  datas.loop = 0;\n}\n\nfunction getParentDeg(moveable, moveableRect, datas, parentDist, direction, startRotate) {\n  var prevDeg = datas.prevDeg;\n  var absoluteDeg = startRotate + parentDist;\n  var dist = checkSnapRotate(moveable, moveableRect, datas.origin, parentDist);\n  datas.prevDeg = dist;\n  var delta = direction * (dist - prevDeg);\n  return [delta, dist, absoluteDeg];\n}\n\nfunction getDeg(moveable, moveableRect, datas, deg, direction, startRotate, throttleRotate, isSnap) {\n  var prevDeg = datas.prevDeg,\n      prevSnapDeg = datas.prevSnapDeg,\n      startDeg = datas.startDeg,\n      prevLoop = datas.loop;\n\n  if (prevDeg > deg && prevDeg > 270 && deg < 90) {\n    // 360 => 0\n    ++datas.loop;\n  } else if (prevDeg < deg && prevDeg < 90 && deg > 270) {\n    // 0 => 360\n    --datas.loop;\n  }\n\n  var loop = datas.loop;\n  var absolutePrevSnapDeg = prevLoop * 360 + prevSnapDeg - startDeg + startRotate;\n  var absoluteDeg = loop * 360 + deg - startDeg + startRotate;\n  datas.prevDeg = absoluteDeg - loop * 360 + startDeg - startRotate;\n  absoluteDeg = throttle(absoluteDeg, throttleRotate);\n  var dist = direction * (absoluteDeg - startRotate);\n\n  if (isSnap) {\n    dist = checkSnapRotate(moveable, moveableRect, datas.origin, dist);\n    absoluteDeg = dist / direction + startRotate;\n  }\n\n  datas.prevSnapDeg = absoluteDeg - loop * 360 + startDeg - startRotate;\n  var delta = direction * (absoluteDeg - absolutePrevSnapDeg);\n  return [delta, dist, absoluteDeg];\n}\n\nfunction getRotateInfo(moveable, moveableRect, datas, direction, clientX, clientY, startRotate, throttleRotate) {\n  return getDeg(moveable, moveableRect, datas, getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180, direction, startRotate, throttleRotate, true);\n}\n\nfunction getPositions(rotationPosition, _a) {\n  var pos1 = _a[0],\n      pos2 = _a[1],\n      pos3 = _a[2],\n      pos4 = _a[3];\n\n  if (rotationPosition === \"left\") {\n    return [pos3, pos1];\n  } else if (rotationPosition === \"right\") {\n    return [pos2, pos4];\n  } else if (rotationPosition === \"bottom\") {\n    return [pos4, pos3];\n  }\n\n  return [pos1, pos2];\n}\nfunction dragControlCondition(e) {\n  if (e.isRequest) {\n    return true;\n  }\n\n  return hasClass(e.inputEvent.target, prefix(\"rotation\"));\n}\nvar Rotatable = {\n  name: \"rotatable\",\n  canPinch: true,\n  props: {\n    rotatable: Boolean,\n    rotationPosition: String,\n    throttleRotate: Number\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        rotatable = _a.rotatable,\n        rotationPosition = _a.rotationPosition;\n\n    if (!rotatable) {\n      return null;\n    }\n\n    var _b = moveable.state,\n        renderPoses = _b.renderPoses,\n        direction = _b.direction;\n    var poses = getPositions(rotationPosition, renderPoses);\n    var rotationRad = getRotationRad(poses, direction);\n    return React.createElement(\"div\", {\n      key: \"rotation\",\n      className: prefix(\"line rotation-line\"),\n      style: {\n        // tslint:disable-next-line: max-line-length\n        transform: \"translate(-50%) translate(\" + (poses[0][0] + poses[1][0]) / 2 + \"px, \" + (poses[0][1] + poses[1][1]) / 2 + \"px) rotate(\" + rotationRad + \"rad)\"\n      }\n    }, React.createElement(\"div\", {\n      className: prefix(\"control\", \"rotation\")\n    }));\n  },\n  dragControlCondition: dragControlCondition,\n  dragControlStart: function (moveable, e) {\n    var datas = e.datas,\n        clientX = e.clientX,\n        clientY = e.clientY,\n        parentRotate = e.parentRotate,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        isRequest = e.isRequest;\n    var _a = moveable.state,\n        target = _a.target,\n        left = _a.left,\n        top = _a.top,\n        origin = _a.origin,\n        beforeOrigin = _a.beforeOrigin,\n        direction = _a.direction,\n        beforeDirection = _a.beforeDirection,\n        targetTransform = _a.targetTransform;\n\n    if (!isRequest && !target) {\n      return false;\n    }\n\n    var rect = moveable.getRect();\n    datas.rect = rect;\n    datas.transform = targetTransform;\n    datas.left = left;\n    datas.top = top;\n\n    if (isRequest || isPinch || parentFlag) {\n      var externalRotate = parentRotate || 0;\n      datas.beforeInfo = {\n        origin: rect.beforeOrigin,\n        prevDeg: externalRotate,\n        startDeg: externalRotate,\n        prevSnapDeg: externalRotate,\n        loop: 0\n      };\n      datas.afterInfo = {\n        origin: rect.origin,\n        prevDeg: externalRotate,\n        startDeg: externalRotate,\n        prevSnapDeg: externalRotate,\n        loop: 0\n      };\n    } else {\n      datas.beforeInfo = {\n        origin: rect.beforeOrigin\n      };\n      datas.afterInfo = {\n        origin: rect.origin\n      };\n      var controlRect = getClientRect(moveable.controlBox.getElement());\n      setRotateStartInfo(moveable, datas.beforeInfo, clientX, clientY, beforeOrigin, controlRect);\n      setRotateStartInfo(moveable, datas.afterInfo, clientX, clientY, origin, controlRect);\n    }\n\n    datas.direction = direction;\n    datas.beforeDirection = beforeDirection;\n    datas.startRotate = 0;\n    datas.datas = {};\n    var params = fillParams(moveable, e, {\n      set: function (rotatation) {\n        datas.startRotate = rotatation;\n      }\n    });\n    var result = triggerEvent(moveable, \"onRotateStart\", params);\n    datas.isRotate = result !== false;\n    moveable.state.snapRenderInfo = {\n      request: e.isRequest\n    };\n    return datas.isRotate ? params : false;\n  },\n  dragControl: function (moveable, e) {\n    var _a, _b, _c, _d, _e, _f;\n\n    var datas = e.datas,\n        clientX = e.clientX,\n        clientY = e.clientY,\n        parentRotate = e.parentRotate,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch;\n    var direction = datas.direction,\n        beforeDirection = datas.beforeDirection,\n        beforeInfo = datas.beforeInfo,\n        afterInfo = datas.afterInfo,\n        isRotate = datas.isRotate,\n        startRotate = datas.startRotate,\n        rect = datas.rect;\n\n    if (!isRotate) {\n      return;\n    }\n\n    var _g = moveable.props,\n        _h = _g.throttleRotate,\n        throttleRotate = _h === void 0 ? 0 : _h,\n        parentMoveable = _g.parentMoveable;\n    var delta;\n    var dist;\n    var rotate;\n    var beforeDelta;\n    var beforeDist;\n    var beforeRotate;\n\n    if (\"parentDist\" in e) {\n      var parentDist = e.parentDist;\n      _a = getParentDeg(moveable, rect, afterInfo, parentDist, direction, startRotate), delta = _a[0], dist = _a[1], rotate = _a[2];\n      _b = getParentDeg(moveable, rect, beforeInfo, parentDist, direction, startRotate), beforeDelta = _b[0], beforeDist = _b[1], beforeRotate = _b[2];\n    } else if (isPinch || parentFlag) {\n      _c = getDeg(moveable, rect, afterInfo, parentRotate, direction, startRotate, throttleRotate), delta = _c[0], dist = _c[1], rotate = _c[2];\n      _d = getDeg(moveable, rect, beforeInfo, parentRotate, direction, startRotate, throttleRotate), beforeDelta = _d[0], beforeDist = _d[1], beforeRotate = _d[2];\n    } else {\n      _e = getRotateInfo(moveable, rect, afterInfo, direction, clientX, clientY, startRotate, throttleRotate), delta = _e[0], dist = _e[1], rotate = _e[2];\n      _f = getRotateInfo(moveable, rect, beforeInfo, beforeDirection, clientX, clientY, startRotate, throttleRotate), beforeDelta = _f[0], beforeDist = _f[1], beforeRotate = _f[2];\n    }\n\n    if (!delta && !beforeDelta && !parentMoveable) {\n      return;\n    }\n\n    var params = fillParams(moveable, e, {\n      delta: delta,\n      dist: dist,\n      rotate: rotate,\n      beforeDist: beforeDist,\n      beforeDelta: beforeDelta,\n      beforeRotate: beforeRotate,\n      transform: datas.transform + \" rotate(\" + dist + \"deg)\",\n      isPinch: !!isPinch\n    });\n    triggerEvent(moveable, \"onRotate\", params);\n    return params;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas,\n        isDrag = e.isDrag;\n\n    if (!datas.isRotate) {\n      return false;\n    }\n\n    datas.isRotate = false;\n    triggerEvent(moveable, \"onRotateEnd\", fillParams(moveable, e, {\n      isDrag: isDrag\n    }));\n    return isDrag;\n  },\n  dragGroupControlCondition: dragControlCondition,\n  dragGroupControlStart: function (moveable, e) {\n    var datas = e.datas,\n        inputEvent = e.inputEvent;\n    var _a = moveable.state,\n        parentLeft = _a.left,\n        parentTop = _a.top,\n        parentBeforeOrigin = _a.beforeOrigin;\n    var params = this.dragControlStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    params.set(moveable.rotation);\n    var events = triggerChildAble(moveable, this, \"dragControlStart\", datas, __assign({}, e, {\n      parentRotate: 0\n    }), function (child, childDatas, eventParams) {\n      var _a = child.state,\n          left = _a.left,\n          top = _a.top,\n          beforeOrigin = _a.beforeOrigin;\n      var childClient = plus(minus([left, top], [parentLeft, parentTop]), minus(beforeOrigin, parentBeforeOrigin));\n      childDatas.prevClient = childClient;\n      eventParams.dragStart = Draggable.dragStart(child, new CustomDragger().dragStart(childClient, inputEvent));\n    });\n\n    var nextParams = __assign({}, params, {\n      targets: moveable.props.targets,\n      events: events\n    });\n\n    var result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\n    datas.isRotate = result !== false;\n    return datas.isRotate ? params : false;\n  },\n  dragGroupControl: function (moveable, e) {\n    var inputEvent = e.inputEvent,\n        datas = e.datas;\n\n    if (!datas.isRotate) {\n      return;\n    }\n\n    var params = this.dragControl(moveable, e);\n\n    if (!params) {\n      return;\n    }\n\n    var parentRotate = params.beforeDist;\n    var deg = params.beforeDelta;\n    var rad = deg / 180 * Math.PI;\n    var events = triggerChildAble(moveable, this, \"dragControl\", datas, __assign({}, e, {\n      parentRotate: parentRotate\n    }), function (child, childDatas, result, i) {\n      var _a = childDatas.prevClient,\n          prevX = _a[0],\n          prevY = _a[1];\n\n      var _b = rotate([prevX, prevY], rad),\n          clientX = _b[0],\n          clientY = _b[1];\n\n      var delta = [clientX - prevX, clientY - prevY];\n      childDatas.prevClient = [clientX, clientY];\n      var dragResult = Draggable.drag(child, setCustomDrag(child.state, delta, inputEvent, !!e.isPinch, false));\n      result.drag = dragResult;\n    });\n    moveable.rotation = params.beforeRotate;\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events,\n      set: function (rotation) {\n        moveable.rotation = rotation;\n      }\n    }, params);\n\n    triggerEvent(moveable, \"onRotateGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isRotate) {\n      return;\n    }\n\n    this.dragControlEnd(moveable, e);\n    triggerChildAble(moveable, this, \"dragControlEnd\", datas, e);\n    var nextParams = fillParams(moveable, e, {\n      targets: moveable.props.targets,\n      isDrag: isDrag\n    });\n    triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Rotatable#request\n   * @param {object} [e] - the Resizable's request parameter\n   * @param {number} [e.deltaRotate=0] -  delta number of rotation\n   * @param {number} [e.isInstant] - Whether to execute the request instantly\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * moveable.request(\"rotatable\", { deltaRotate: 10, isInstant: true });\n   *\n   * // requestStart\n   * const requester = moveable.request(\"rotatable\");\n   *\n   * // request\n   * requester.request({ deltaRotate: 10 });\n   * requester.request({ deltaRotate: 10 });\n   * requester.request({ deltaRotate: 10 });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function () {\n    var datas = {};\n    var distRotate = 0;\n    return {\n      isControl: true,\n      requestStart: function (e) {\n        return {\n          datas: datas\n        };\n      },\n      request: function (e) {\n        distRotate += e.deltaRotate;\n        return {\n          datas: datas,\n          parentDist: distRotate\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  }\n};\n\nfunction renderControls(moveable, defaultDirections, React) {\n  var _a = moveable.state,\n      renderPoses = _a.renderPoses,\n      rotation = _a.rotation;\n  var _b = moveable.props.renderDirections,\n      directions = _b === void 0 ? defaultDirections : _b;\n  var directionMap = {};\n  directions.forEach(function (direction) {\n    directionMap[direction] = true;\n  });\n  return directions.map(function (direction) {\n    var indexes = DIRECTION_INDEXES[direction];\n\n    if (!indexes || !directionMap[direction]) {\n      return null;\n    }\n\n    var directionRotation = (throttle(rotation / Math.PI * 180, 15) + DIRECTION_ROTATIONS[direction]) % 180;\n    return React.createElement(\"div\", {\n      className: prefix(\"control\", \"direction\", direction),\n      \"data-rotation\": directionRotation,\n      \"data-direction\": direction,\n      key: \"direction-\" + direction,\n      style: getControlTransform.apply(void 0, [rotation].concat(indexes.map(function (index) {\n        return renderPoses[index];\n      })))\n    });\n  });\n}\nfunction renderAllDirections(moveable, React) {\n  return renderControls(moveable, DIRECTIONS, React);\n}\nfunction renderDiagonalDirections(moveable, React) {\n  return renderControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], React);\n}\n\n/**\n * @namespace Resizable\n * @memberof Moveable\n */\n\nvar Resizable = {\n  name: \"resizable\",\n  ableGroup: \"size\",\n  updateRect: true,\n  canPinch: true,\n  props: {\n    resizable: Boolean,\n    throttleResize: Number,\n    renderDirections: Array,\n    baseDirection: Array,\n    keepRatio: Boolean\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        resizable = _a.resizable,\n        edge = _a.edge;\n\n    if (resizable) {\n      if (edge) {\n        return renderDiagonalDirections(moveable, React);\n      }\n\n      return renderAllDirections(moveable, React);\n    }\n  },\n  dragControlCondition: directionCondition,\n  dragControlStart: function (moveable, e) {\n    var _a;\n\n    var inputEvent = e.inputEvent,\n        isPinch = e.isPinch,\n        parentDirection = e.parentDirection,\n        datas = e.datas,\n        parentFlag = e.parentFlag;\n    var direction = parentDirection || (isPinch ? [0, 0] : getDirection(inputEvent.target));\n    var _b = moveable.state,\n        target = _b.target,\n        width = _b.width,\n        height = _b.height;\n\n    if (!direction || !target) {\n      return false;\n    }\n\n    !isPinch && setDragStart(moveable, {\n      datas: datas\n    });\n    datas.datas = {};\n    datas.direction = direction;\n    datas.startOffsetWidth = width;\n    datas.startOffsetHeight = height;\n    datas.prevWidth = 0;\n    datas.prevHeight = 0;\n    _a = getCSSSize(target), datas.startWidth = _a[0], datas.startHeight = _a[1];\n    var padding = [Math.max(0, width - datas.startWidth), Math.max(0, height - datas.startHeight)];\n    datas.minSize = padding;\n    datas.maxSize = [Infinity, Infinity];\n\n    if (!parentFlag) {\n      var style = window.getComputedStyle(target);\n      datas.minSize = plus([parseFloat(style.minWidth) || 0, parseFloat(style.minHeight) || 0], padding);\n      datas.maxSize = plus([parseFloat(style.maxWidth) || Infinity, parseFloat(style.maxHeight) || Infinity], padding);\n    }\n\n    var transformOrigin = moveable.props.transformOrigin || \"% %\";\n    datas.transformOrigin = transformOrigin && isString(transformOrigin) ? transformOrigin.split(\" \") : transformOrigin;\n    datas.startDirection = getStartDirection(moveable, direction);\n    datas.fixedPosition = getAbsoluteFixedPosition(moveable, datas.startDirection);\n    datas.fixedOriginalPosition = getAbsoluteFixedPosition(moveable, direction);\n    var params = fillParams(moveable, e, {\n      direction: direction,\n      set: function (_a) {\n        var startWidth = _a[0],\n            startHeight = _a[1];\n        datas.startWidth = startWidth;\n        datas.startHeight = startHeight;\n      },\n      setOrigin: function (origin) {\n        datas.transformOrigin = origin;\n      },\n      dragStart: Draggable.dragStart(moveable, new CustomDragger().dragStart([0, 0], inputEvent))\n    });\n    var result = triggerEvent(moveable, \"onResizeStart\", params);\n\n    if (result !== false) {\n      datas.isResize = true;\n      moveable.state.snapRenderInfo = {\n        request: e.isRequest,\n        direction: direction\n      };\n    }\n\n    return datas.isResize ? params : false;\n  },\n  dragControl: function (moveable, e) {\n    var _a;\n\n    var datas = e.datas,\n        distX = e.distX,\n        distY = e.distY,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        parentDistance = e.parentDistance,\n        parentScale = e.parentScale,\n        inputEvent = e.inputEvent,\n        parentKeepRatio = e.parentKeepRatio,\n        dragClient = e.dragClient,\n        parentDist = e.parentDist,\n        isRequest = e.isRequest;\n    var direction = datas.direction,\n        isResize = datas.isResize,\n        transformOrigin = datas.transformOrigin;\n\n    if (!isResize) {\n      return;\n    }\n\n    var startWidth = datas.startWidth,\n        startHeight = datas.startHeight,\n        startOffsetWidth = datas.startOffsetWidth,\n        startOffsetHeight = datas.startOffsetHeight,\n        prevWidth = datas.prevWidth,\n        prevHeight = datas.prevHeight,\n        minSize = datas.minSize,\n        maxSize = datas.maxSize;\n    var _b = moveable.props,\n        _c = _b.throttleResize,\n        throttleResize = _c === void 0 ? 0 : _c,\n        parentMoveable = _b.parentMoveable;\n    var sizeDirection = direction;\n\n    if (!direction[0] && !direction[1]) {\n      sizeDirection = [1, 1];\n    }\n\n    var keepRatio = moveable.props.keepRatio || parentKeepRatio;\n    var isWidth = sizeDirection[0] || !sizeDirection[1];\n    var ratio = isWidth ? startOffsetHeight / startOffsetWidth : startOffsetWidth / startOffsetHeight;\n    var startDirection = keepRatio || parentFlag ? direction : datas.startDirection;\n    var fixedPosition = dragClient;\n    var distWidth = 0;\n    var distHeight = 0;\n\n    if (!dragClient) {\n      if (!parentFlag && isPinch) {\n        fixedPosition = getAbsoluteFixedPosition(moveable, [0, 0]);\n      } else {\n        fixedPosition = keepRatio ? datas.fixedOriginalPosition : datas.fixedPosition;\n      }\n    }\n\n    if (parentDist) {\n      distWidth = parentDist[0];\n      distHeight = parentDist[1];\n    } else if (parentScale) {\n      distWidth = (parentScale[0] - 1) * startOffsetWidth;\n      distHeight = (parentScale[1] - 1) * startOffsetHeight;\n    } else if (isPinch) {\n      if (parentDistance) {\n        distWidth = parentDistance;\n        distHeight = parentDistance * startOffsetHeight / startOffsetWidth;\n      }\n    } else {\n      var dist = getDragDist({\n        datas: datas,\n        distX: distX,\n        distY: distY\n      });\n      distWidth = sizeDirection[0] * dist[0];\n      distHeight = sizeDirection[1] * dist[1];\n\n      if (keepRatio && startOffsetWidth && startOffsetHeight) {\n        var rad = getRad([0, 0], dist);\n        var standardRad = getRad([0, 0], sizeDirection);\n        var ratioRad = getRad([0, 0], [startOffsetWidth, startOffsetHeight]);\n        var size = getDistSize([distWidth, distHeight]);\n        var signSize = Math.cos(rad - standardRad) * size;\n\n        if (!sizeDirection[0]) {\n          // top, bottom\n          distHeight = signSize;\n          distWidth = getKeepRatioWidth(distHeight, isWidth, ratio);\n        } else if (!sizeDirection[1]) {\n          // left, right\n          distWidth = signSize;\n          distHeight = getKeepRatioHeight(distWidth, isWidth, ratio);\n        } else {\n          // two-way\n          distWidth = Math.cos(ratioRad) * signSize;\n          distHeight = Math.sin(ratioRad) * signSize;\n        }\n      }\n    }\n\n    var nextWidth = sizeDirection[0] || keepRatio ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\n    var nextHeight = sizeDirection[1] || keepRatio ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\n\n    if (keepRatio && startOffsetWidth && startOffsetHeight) {\n      // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\n      nextHeight = nextWidth * startOffsetHeight / startOffsetWidth;\n    }\n\n    var snapDist = [0, 0];\n\n    if (!isPinch) {\n      snapDist = checkSnapSize(moveable, nextWidth, nextHeight, direction, datas.fixedOriginalPosition, isRequest, datas);\n    }\n\n    if (parentDist) {\n      !parentDist[0] && (snapDist[0] = 0);\n      !parentDist[1] && (snapDist[1] = 0);\n    }\n\n    if (keepRatio) {\n      if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\n        if (Math.abs(snapDist[0]) > Math.abs(snapDist[1])) {\n          snapDist[1] = 0;\n        } else {\n          snapDist[0] = 0;\n        }\n      }\n\n      var isNoSnap = !snapDist[0] && !snapDist[1];\n\n      if (isNoSnap) {\n        if (isWidth) {\n          nextWidth = throttle(nextWidth, throttleResize);\n        } else {\n          nextHeight = throttle(nextHeight, throttleResize);\n        }\n      }\n\n      if (sizeDirection[0] && !sizeDirection[1] || snapDist[0] && !snapDist[1] || isNoSnap && isWidth) {\n        nextWidth += snapDist[0];\n        nextHeight = getKeepRatioHeight(nextWidth, isWidth, ratio);\n      } else if (!sizeDirection[0] && sizeDirection[1] || !snapDist[0] && snapDist[1] || isNoSnap && !isWidth) {\n        nextHeight += snapDist[1];\n        nextWidth = getKeepRatioWidth(nextHeight, isWidth, ratio);\n      }\n    } else {\n      nextWidth += snapDist[0];\n      nextHeight += snapDist[1];\n\n      if (!snapDist[0]) {\n        nextWidth = throttle(nextWidth, throttleResize);\n      }\n\n      if (!snapDist[1]) {\n        nextHeight = throttle(nextHeight, throttleResize);\n      }\n    }\n\n    _a = caculateBoundSize([nextWidth, nextHeight], minSize, maxSize, keepRatio), nextWidth = _a[0], nextHeight = _a[1];\n    nextWidth = Math.round(nextWidth);\n    nextHeight = Math.round(nextHeight);\n    distWidth = nextWidth - startOffsetWidth;\n    distHeight = nextHeight - startOffsetHeight;\n    var delta = [distWidth - prevWidth, distHeight - prevHeight];\n    datas.prevWidth = distWidth;\n    datas.prevHeight = distHeight;\n    var inverseDelta = getResizeDist(moveable, nextWidth, nextHeight, startDirection, fixedPosition, transformOrigin);\n\n    if (!parentMoveable && delta.every(function (num) {\n      return !num;\n    }) && inverseDelta.every(function (num) {\n      return !num;\n    })) {\n      return;\n    }\n\n    var params = fillParams(moveable, e, {\n      width: startWidth + distWidth,\n      height: startHeight + distHeight,\n      offsetWidth: nextWidth,\n      offsetHeight: nextHeight,\n      direction: direction,\n      dist: [distWidth, distHeight],\n      delta: delta,\n      isPinch: !!isPinch,\n      drag: Draggable.drag(moveable, setCustomDrag(moveable.state, inverseDelta, inputEvent, !!isPinch, false))\n    });\n    triggerEvent(moveable, \"onResize\", params);\n    return params;\n  },\n  dragControlAfter: function (moveable, e) {\n    var datas = e.datas;\n    var isResize = datas.isResize,\n        startOffsetWidth = datas.startOffsetWidth,\n        startOffsetHeight = datas.startOffsetHeight,\n        prevWidth = datas.prevWidth,\n        prevHeight = datas.prevHeight;\n\n    if (!isResize) {\n      return;\n    }\n\n    var _a = moveable.state,\n        width = _a.width,\n        height = _a.height;\n    var errorWidth = width - (startOffsetWidth + prevWidth);\n    var errorHeight = height - (startOffsetHeight + prevHeight);\n    var isErrorWidth = Math.abs(errorWidth) > 3;\n    var isErrorHeight = Math.abs(errorHeight) > 3;\n\n    if (isErrorWidth) {\n      datas.startWidth += errorWidth;\n      datas.startOffsetWidth += errorWidth;\n      datas.prevWidth += errorWidth;\n    }\n\n    if (isErrorHeight) {\n      datas.startHeight += errorHeight;\n      datas.startOffsetHeight += errorHeight;\n      datas.prevHeight += errorHeight;\n    }\n\n    if (isErrorWidth || isErrorHeight) {\n      this.dragControl(moveable, e);\n      return true;\n    }\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas,\n        isDrag = e.isDrag;\n\n    if (!datas.isResize) {\n      return false;\n    }\n\n    datas.isResize = false;\n    var params = fillParams(moveable, e, {\n      isDrag: isDrag\n    });\n    triggerEvent(moveable, \"onResizeEnd\", params);\n    return isDrag;\n  },\n  dragGroupControlCondition: directionCondition,\n  dragGroupControlStart: function (moveable, e) {\n    var datas = e.datas;\n    var params = this.dragControlStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    var direction = params.direction;\n    var startPos = getAbsoluteFixedPosition(moveable, direction);\n    var events = triggerChildAble(moveable, this, \"dragControlStart\", datas, function (child, childDatas) {\n      var pos = getAbsoluteFixedPosition(child, direction);\n\n      var _a = caculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - startPos[0], pos[1] - startPos[1], 1], 3),\n          originalX = _a[0],\n          originalY = _a[1];\n\n      childDatas.originalX = originalX;\n      childDatas.originalY = originalY;\n      return e;\n    });\n\n    var nextParams = __assign({}, params, {\n      targets: moveable.props.targets,\n      events: events\n    });\n\n    var result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\n    datas.isResize = result !== false;\n    return datas.isResize ? params : false;\n  },\n  dragGroupControl: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isResize) {\n      return;\n    }\n\n    var params = this.dragControl(moveable, e);\n\n    if (!params) {\n      return;\n    }\n\n    var offsetWidth = params.offsetWidth,\n        offsetHeight = params.offsetHeight,\n        dist = params.dist;\n    var keepRatio = moveable.props.keepRatio;\n    var parentScale = [offsetWidth / (offsetWidth - dist[0]), offsetHeight / (offsetHeight - dist[1])];\n    var fixedPosition = getAbsoluteFixedPosition(moveable, datas.direction);\n    var events = triggerChildAble(moveable, this, \"dragControl\", datas, function (_, childDatas) {\n      var _a = caculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [childDatas.originalX * parentScale[0], childDatas.originalY * parentScale[1], 1], 3),\n          clientX = _a[0],\n          clientY = _a[1];\n\n      return __assign({}, e, {\n        parentDist: null,\n        parentScale: parentScale,\n        dragClient: plus(fixedPosition, [clientX, clientY]),\n        parentKeepRatio: keepRatio\n      });\n    });\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events\n    }, params);\n\n    triggerEvent(moveable, \"onResizeGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isResize) {\n      return;\n    }\n\n    this.dragControlEnd(moveable, e);\n    triggerChildAble(moveable, this, \"dragControlEnd\", datas, e);\n    var nextParams = fillParams(moveable, e, {\n      targets: moveable.props.targets,\n      isDrag: isDrag\n    });\n    triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Resizable#request\n   * @param {object} [e] - the Resizable's request parameter\n   * @param {number} [e.direction=[1, 1]] - Direction to resize\n   * @param {number} [e.deltaWidth] - delta number of width\n   * @param {number} [e.deltaHeight] - delta number of height\n   * @param {number} [e.isInstant] - Whether to execute the request instantly\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * // Use Relative Value\n   * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10, isInstant: true });\n   *\n   * // Use Absolute Value\n   * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100, isInstant: true });\n   *\n   * // requestStart\n   * const requester = moveable.request(\"resizable\");\n   *\n   * // request\n   * // Use Relative Value\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   *\n   * // Use Absolute Value\n   * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100, isInstant: true });\n   * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100, isInstant: true });\n   * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100, isInstant: true });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function (moveable) {\n    var datas = {};\n    var distWidth = 0;\n    var distHeight = 0;\n    var rect = moveable.getRect();\n    return {\n      isControl: true,\n      requestStart: function (e) {\n        return {\n          datas: datas,\n          parentDirection: e.direction || [1, 1]\n        };\n      },\n      request: function (e) {\n        if (\"offsetWidth\" in e) {\n          distWidth = e.offsetWidth - rect.offsetWidth;\n        } else if (\"deltaWidth\" in e) {\n          distWidth += e.deltaWidth;\n        }\n\n        if (\"offsetHeight\" in e) {\n          distHeight = e.offsetHeight - rect.offsetHeight;\n        } else if (\"deltaHeight\" in e) {\n          distHeight += e.deltaHeight;\n        }\n\n        return {\n          datas: datas,\n          parentDist: [distWidth, distHeight]\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  }\n};\n\n/**\n * @namespace Scalable\n * @memberof Moveable\n */\n\nvar Scalable = {\n  name: \"scalable\",\n  ableGroup: \"size\",\n  canPinch: true,\n  props: {\n    scalable: Boolean,\n    throttleScale: Number,\n    renderDirections: String,\n    keepRatio: Boolean\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        resizable = _a.resizable,\n        scalable = _a.scalable,\n        edge = _a.edge;\n\n    if (!resizable && scalable) {\n      if (edge) {\n        return renderDiagonalDirections(moveable, React);\n      }\n\n      return renderAllDirections(moveable, React);\n    }\n  },\n  dragControlCondition: directionCondition,\n  dragControlStart: function (moveable, e) {\n    var datas = e.datas,\n        isPinch = e.isPinch,\n        inputEvent = e.inputEvent,\n        parentDirection = e.parentDirection;\n    var direction = parentDirection || (isPinch ? [0, 0] : getDirection(inputEvent.target));\n    var _a = moveable.state,\n        width = _a.width,\n        height = _a.height,\n        targetTransform = _a.targetTransform,\n        target = _a.target;\n\n    if (!direction || !target) {\n      return false;\n    }\n\n    if (!isPinch) {\n      setDragStart(moveable, {\n        datas: datas\n      });\n    }\n\n    datas.datas = {};\n    datas.transform = targetTransform;\n    datas.prevDist = [1, 1];\n    datas.direction = direction;\n    datas.width = width;\n    datas.height = height;\n    datas.startScale = [1, 1];\n    datas.fixedPosition = getAbsoluteFixedPosition(moveable, direction);\n    var params = fillParams(moveable, e, {\n      direction: direction,\n      set: function (scale) {\n        datas.startScale = scale;\n      },\n      dragStart: Draggable.dragStart(moveable, new CustomDragger().dragStart([0, 0], inputEvent))\n    });\n    var result = triggerEvent(moveable, \"onScaleStart\", params);\n\n    if (result !== false) {\n      datas.isScale = true;\n      moveable.state.snapRenderInfo = {\n        request: e.isRequest,\n        direction: direction\n      };\n    }\n\n    return datas.isScale ? params : false;\n  },\n  dragControl: function (moveable, e) {\n    var datas = e.datas,\n        distX = e.distX,\n        distY = e.distY,\n        parentScale = e.parentScale,\n        parentDistance = e.parentDistance,\n        parentKeepRatio = e.parentKeepRatio,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        inputEvent = e.inputEvent,\n        dragClient = e.dragClient,\n        parentDist = e.parentDist,\n        isRequest = e.isRequest;\n    var prevDist = datas.prevDist,\n        direction = datas.direction,\n        width = datas.width,\n        height = datas.height,\n        transform = datas.transform,\n        isScale = datas.isScale,\n        startScale = datas.startScale;\n\n    if (!isScale) {\n      return false;\n    }\n\n    var _a = moveable.props,\n        throttleScale = _a.throttleScale,\n        parentMoveable = _a.parentMoveable;\n    var sizeDirection = direction;\n\n    if (!direction[0] && !direction[1]) {\n      sizeDirection = [1, 1];\n    }\n\n    var keepRatio = moveable.props.keepRatio || parentKeepRatio;\n    var state = moveable.state;\n    var isWidth = sizeDirection[0] || !sizeDirection[1];\n    var startWidth = width * startScale[0];\n    var startHeight = height * startScale[1];\n    var ratio = isWidth ? startHeight / startWidth : startWidth / startHeight;\n    var scaleX = 1;\n    var scaleY = 1;\n    var fixedPosition = dragClient;\n\n    if (!dragClient) {\n      if (!parentFlag && isPinch) {\n        fixedPosition = getAbsoluteFixedPosition(moveable, [0, 0]);\n      } else {\n        fixedPosition = datas.fixedPosition;\n      }\n    }\n\n    if (parentDist) {\n      scaleX = (width + parentDist[0]) / width;\n      scaleY = (height + parentDist[1]) / height;\n    } else if (parentScale) {\n      scaleX = parentScale[0];\n      scaleY = parentScale[1];\n    } else if (isPinch) {\n      if (parentDistance) {\n        scaleX = (width + parentDistance) / width;\n        scaleY = (height + parentDistance * height / width) / height;\n      }\n    } else {\n      var dist = getDragDist({\n        datas: datas,\n        distX: distX,\n        distY: distY\n      });\n      var distWidth = sizeDirection[0] * dist[0];\n      var distHeight = sizeDirection[1] * dist[1];\n\n      if (keepRatio && width && height) {\n        var rad = getRad([0, 0], dist);\n        var standardRad = getRad([0, 0], sizeDirection);\n        var ratioRad = getRad([0, 0], [startWidth, startHeight]);\n        var size = getDistSize([distWidth, distHeight]);\n        var signSize = Math.cos(rad - standardRad) * size;\n\n        if (!sizeDirection[0]) {\n          // top, bottom\n          distHeight = signSize;\n          distWidth = getKeepRatioWidth(distHeight, isWidth, ratio);\n        } else if (!sizeDirection[1]) {\n          // left, right\n          distWidth = signSize;\n          distHeight = getKeepRatioHeight(distWidth, isWidth, ratio);\n        } else {\n          // two-way\n          distWidth = Math.cos(ratioRad) * signSize;\n          distHeight = Math.sin(ratioRad) * signSize;\n        }\n      }\n\n      scaleX = (width + distWidth) / width;\n      scaleY = (height + distHeight) / height;\n    }\n\n    scaleX = sizeDirection[0] || keepRatio ? scaleX * startScale[0] : startScale[0];\n    scaleY = sizeDirection[1] || keepRatio ? scaleY * startScale[1] : startScale[1];\n\n    if (scaleX === 0) {\n      scaleX = (prevDist[0] > 0 ? 1 : -1) * MIN_SCALE;\n    }\n\n    if (scaleY === 0) {\n      scaleY = (prevDist[1] > 0 ? 1 : -1) * MIN_SCALE;\n    }\n\n    var nowDist = [scaleX / startScale[0], scaleY / startScale[1]];\n    var scale = [scaleX, scaleY];\n\n    if (!isPinch && moveable.props.groupable) {\n      var snapRenderInfo = state.snapRenderInfo || {};\n      var stateDirection = snapRenderInfo.direction;\n\n      if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\n        state.snapRenderInfo = {\n          direction: direction,\n          request: e.isRequest\n        };\n      }\n    }\n\n    var snapDist = [0, 0];\n\n    if (!isPinch) {\n      snapDist = checkSnapScale(moveable, nowDist, direction, datas.fixedPosition, isRequest, datas);\n    }\n\n    if (keepRatio) {\n      if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\n        if (Math.abs(snapDist[0]) > Math.abs(snapDist[1])) {\n          snapDist[1] = 0;\n        } else {\n          snapDist[0] = 0;\n        }\n      }\n\n      var isNoSnap = !snapDist[0] && !snapDist[1];\n\n      if (isNoSnap) {\n        if (isWidth) {\n          nowDist[0] = throttle(nowDist[0] * startScale[0], throttleScale) / startScale[0];\n        } else {\n          nowDist[1] = throttle(nowDist[1] * startScale[1], throttleScale) / startScale[1];\n        }\n      }\n\n      if (sizeDirection[0] && !sizeDirection[1] || snapDist[0] && !snapDist[1] || isNoSnap && isWidth) {\n        nowDist[0] += snapDist[0];\n        var snapHeight = getKeepRatioHeight(width * nowDist[0] * startScale[0], isWidth, ratio);\n        nowDist[1] = snapHeight / height / startScale[1];\n      } else if (!sizeDirection[0] && sizeDirection[1] || !snapDist[0] && snapDist[1] || isNoSnap && !isWidth) {\n        nowDist[1] += snapDist[1];\n        var snapWidth = getKeepRatioWidth(height * nowDist[1] * startScale[1], isWidth, ratio);\n        nowDist[0] = snapWidth / width / startScale[0];\n      }\n    } else {\n      nowDist[0] += snapDist[0];\n      nowDist[1] += snapDist[1];\n\n      if (!snapDist[0]) {\n        nowDist[0] = throttle(nowDist[0] * startScale[0], throttleScale) / startScale[0];\n      }\n\n      if (!snapDist[1]) {\n        nowDist[1] = throttle(nowDist[1] * startScale[1], throttleScale) / startScale[1];\n      }\n    }\n\n    if (nowDist[0] === 0) {\n      nowDist[0] = (prevDist[0] > 0 ? 1 : -1) * MIN_SCALE;\n    }\n\n    if (nowDist[1] === 0) {\n      nowDist[1] = (prevDist[1] > 0 ? 1 : -1) * MIN_SCALE;\n    }\n\n    var delta = [nowDist[0] / prevDist[0], nowDist[1] / prevDist[1]];\n    scale = multiply2(nowDist, startScale);\n    datas.prevDist = nowDist;\n    var inverseDelta = getScaleDist(moveable, delta, direction, fixedPosition);\n\n    if (scaleX === prevDist[0] && scaleY === prevDist[1] && inverseDelta.every(function (num) {\n      return !num;\n    }) && !parentMoveable) {\n      return false;\n    }\n\n    var params = fillParams(moveable, e, {\n      scale: scale,\n      direction: direction,\n      dist: nowDist,\n      delta: delta,\n      transform: transform + \" scale(\" + scaleX + \", \" + scaleY + \")\",\n      isPinch: !!isPinch,\n      drag: Draggable.drag(moveable, setCustomDrag(moveable.state, inverseDelta, inputEvent, isPinch, false))\n    });\n    triggerEvent(moveable, \"onScale\", params);\n    return params;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas,\n        isDrag = e.isDrag;\n\n    if (!datas.isScale) {\n      return false;\n    }\n\n    datas.isScale = false;\n    triggerEvent(moveable, \"onScaleEnd\", fillParams(moveable, e, {\n      isDrag: isDrag\n    }));\n    return isDrag;\n  },\n  dragGroupControlCondition: directionCondition,\n  dragGroupControlStart: function (moveable, e) {\n    var datas = e.datas;\n    var params = this.dragControlStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    var direction = params.direction;\n    var startPos = getAbsoluteFixedPosition(moveable, direction);\n    var events = triggerChildAble(moveable, this, \"dragControlStart\", datas, function (child, childDatas) {\n      var pos = getAbsoluteFixedPosition(child, direction);\n\n      var _a = caculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - startPos[0], pos[1] - startPos[1], 1], 3),\n          originalX = _a[0],\n          originalY = _a[1];\n\n      childDatas.originalX = originalX;\n      childDatas.originalY = originalY;\n      return e;\n    });\n\n    var nextParams = __assign({}, params, {\n      targets: moveable.props.targets,\n      events: events\n    });\n\n    var result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\n    datas.isScale = result !== false;\n    return datas.isScale ? nextParams : false;\n  },\n  dragGroupControl: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isScale) {\n      return;\n    }\n\n    var params = this.dragControl(moveable, e);\n\n    if (!params) {\n      return;\n    }\n\n    var keepRatio = moveable.props.keepRatio;\n    var scale = params.scale;\n    var startPos = getAbsoluteFixedPosition(moveable, datas.direction);\n    var events = triggerChildAble(moveable, this, \"dragControl\", datas, function (_, childDatas) {\n      var _a = caculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [childDatas.originalX * scale[0], childDatas.originalY * scale[1], 1], 3),\n          clientX = _a[0],\n          clientY = _a[1];\n\n      return __assign({}, e, {\n        parentDist: null,\n        parentScale: scale,\n        parentKeepRatio: keepRatio,\n        dragClient: plus(startPos, [clientX, clientY])\n      });\n    });\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events\n    }, params);\n\n    triggerEvent(moveable, \"onScaleGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isScale) {\n      return;\n    }\n\n    this.dragControlEnd(moveable, e);\n    triggerChildAble(moveable, this, \"dragControlEnd\", datas, e);\n    var nextParams = fillParams(moveable, e, {\n      targets: moveable.props.targets,\n      isDrag: isDrag\n    });\n    triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Scalable#request\n   * @param {object} [e] - the Resizable's request parameter\n   * @param {number} [e.direction=[1, 1]] - Direction to scale\n   * @param {number} [e.deltaWidth] - delta number of width\n   * @param {number} [e.deltaHeight] - delta number of height\n   * @param {number} [e.isInstant] - Whether to execute the request instantly\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10, isInstant: true });\n   *\n   * // requestStart\n   * const requester = moveable.request(\"scalable\");\n   *\n   * // request\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function () {\n    var datas = {};\n    var distWidth = 0;\n    var distHeight = 0;\n    return {\n      isControl: true,\n      requestStart: function (e) {\n        return {\n          datas: datas,\n          parentDirection: e.direction || [1, 1]\n        };\n      },\n      request: function (e) {\n        distWidth += e.deltaWidth;\n        distHeight += e.deltaHeight;\n        return {\n          datas: datas,\n          parentDist: [distWidth, distHeight]\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  }\n};\n\nfunction getMiddleLinePos(pos1, pos2) {\n  return pos1.map(function (pos, i) {\n    return dot(pos, pos2[i], 1, 2);\n  });\n}\n\nfunction getTriangleRad(pos1, pos2, pos3) {\n  // pos1 Rad\n  var rad1 = getRad(pos1, pos2);\n  var rad2 = getRad(pos1, pos3);\n  var rad = rad2 - rad1;\n  return rad >= 0 ? rad : rad + 2 * Math.PI;\n}\n\nfunction isValidPos(poses1, poses2) {\n  var rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\n  var rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\n  var pi = Math.PI;\n\n  if (rad1 >= pi && rad2 <= pi || rad1 <= pi && rad2 >= pi) {\n    return false;\n  }\n\n  return true;\n}\n\nvar Warpable = {\n  name: \"warpable\",\n  ableGroup: \"size\",\n  props: {\n    warpable: Boolean,\n    renderDirections: Array\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        resizable = _a.resizable,\n        scalable = _a.scalable,\n        warpable = _a.warpable;\n\n    if (resizable || scalable || !warpable) {\n      return;\n    }\n\n    var _b = moveable.state,\n        pos1 = _b.pos1,\n        pos2 = _b.pos2,\n        pos3 = _b.pos3,\n        pos4 = _b.pos4;\n    var linePosFrom1 = getMiddleLinePos(pos1, pos2);\n    var linePosFrom2 = getMiddleLinePos(pos2, pos1);\n    var linePosFrom3 = getMiddleLinePos(pos1, pos3);\n    var linePosFrom4 = getMiddleLinePos(pos3, pos1);\n    var linePosTo1 = getMiddleLinePos(pos3, pos4);\n    var linePosTo2 = getMiddleLinePos(pos4, pos3);\n    var linePosTo3 = getMiddleLinePos(pos2, pos4);\n    var linePosTo4 = getMiddleLinePos(pos4, pos2);\n    return [React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine1\",\n      style: getLineStyle(linePosFrom1, linePosTo1)\n    }), React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine2\",\n      style: getLineStyle(linePosFrom2, linePosTo2)\n    }), React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine3\",\n      style: getLineStyle(linePosFrom3, linePosTo3)\n    }), React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine4\",\n      style: getLineStyle(linePosFrom4, linePosTo4)\n    })].concat(renderAllDirections(moveable, React));\n  },\n  dragControlCondition: function (e) {\n    if (e.isRequest) {\n      return false;\n    }\n\n    return hasClass(e.inputEvent.target, prefix(\"direction\"));\n  },\n  dragControlStart: function (moveable, e) {\n    var datas = e.datas,\n        inputEvent = e.inputEvent;\n    var target = moveable.props.target;\n    var inputTarget = inputEvent.target;\n    var direction = getDirection(inputTarget);\n\n    if (!direction || !target) {\n      return false;\n    }\n\n    var state = moveable.state;\n    var transformOrigin = state.transformOrigin,\n        is3d = state.is3d,\n        targetTransform = state.targetTransform,\n        targetMatrix = state.targetMatrix,\n        width = state.width,\n        height = state.height,\n        left = state.left,\n        top = state.top;\n    datas.datas = {};\n    datas.targetTransform = targetTransform;\n    datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\n    datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\n    datas.direction = direction;\n    datas.left = left;\n    datas.top = top;\n    setDragStart(moveable, {\n      datas: datas\n    });\n    datas.poses = [[0, 0], [width, 0], [0, height], [width, height]].map(function (p) {\n      return minus(p, transformOrigin);\n    });\n    datas.nextPoses = datas.poses.map(function (_a) {\n      var x = _a[0],\n          y = _a[1];\n      return caculate(datas.warpTargetMatrix, [x, y, 0, 1], 4);\n    });\n    datas.startMatrix = createIdentityMatrix(4);\n    datas.prevMatrix = createIdentityMatrix(4);\n    datas.absolutePoses = getAbsolutePosesByState(state);\n    datas.posIndexes = getPosIndexesByDirection(direction);\n    state.snapRenderInfo = {\n      request: e.isRequest,\n      direction: direction\n    };\n    var params = fillParams(moveable, e, {\n      set: function (matrix) {\n        datas.startMatrix = matrix;\n      }\n    });\n    var result = triggerEvent(moveable, \"onWarpStart\", params);\n\n    if (result !== false) {\n      datas.isWarp = true;\n    }\n\n    return datas.isWarp;\n  },\n  dragControl: function (moveable, e) {\n    var datas = e.datas,\n        isRequest = e.isRequest;\n    var distX = e.distX,\n        distY = e.distY;\n    var targetInverseMatrix = datas.targetInverseMatrix,\n        prevMatrix = datas.prevMatrix,\n        isWarp = datas.isWarp,\n        startMatrix = datas.startMatrix,\n        poses = datas.poses,\n        posIndexes = datas.posIndexes,\n        absolutePoses = datas.absolutePoses;\n\n    if (!isWarp) {\n      return false;\n    }\n\n    if (hasGuidelines(moveable, \"warpable\")) {\n      var selectedPoses = posIndexes.map(function (index) {\n        return absolutePoses[index];\n      });\n\n      if (selectedPoses.length > 1) {\n        selectedPoses.push([(selectedPoses[0][0] + selectedPoses[1][0]) / 2, (selectedPoses[0][1] + selectedPoses[1][1]) / 2]);\n      }\n\n      var _a = checkSnapBounds(moveable, isRequest, selectedPoses.map(function (pos) {\n        return [pos[0] + distX, pos[1] + distY];\n      })),\n          horizontalSnapInfo = _a.horizontal,\n          verticalSnapInfo = _a.vertical;\n\n      distY -= horizontalSnapInfo.offset;\n      distX -= verticalSnapInfo.offset;\n    }\n\n    var dist = getDragDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    }, true);\n    var nextPoses = datas.nextPoses.slice();\n    posIndexes.forEach(function (index) {\n      nextPoses[index] = plus(nextPoses[index], dist);\n    });\n\n    if (!NEARBY_POS.every(function (nearByPoses) {\n      return isValidPos(nearByPoses.map(function (i) {\n        return poses[i];\n      }), nearByPoses.map(function (i) {\n        return nextPoses[i];\n      }));\n    })) {\n      return false;\n    }\n\n    var h = createWarpMatrix(poses[0], poses[1], poses[2], poses[3], nextPoses[0], nextPoses[1], nextPoses[2], nextPoses[3]);\n\n    if (!h.length) {\n      return false;\n    }\n\n    var matrix = convertMatrixtoCSS(multiply(targetInverseMatrix, h, 4));\n    var transform = datas.targetTransform + \" matrix3d(\" + matrix.join(\",\") + \")\";\n    var delta = multiplyCSS(invert(prevMatrix, 4), matrix, 4);\n    datas.prevMatrix = matrix;\n    triggerEvent(moveable, \"onWarp\", fillParams(moveable, e, {\n      delta: delta,\n      matrix: multiplyCSS(startMatrix, matrix, 4),\n      multiply: multiplyCSS,\n      dist: matrix,\n      transform: transform\n    }));\n    return true;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas,\n        isDrag = e.isDrag;\n\n    if (!datas.isWarp) {\n      return false;\n    }\n\n    datas.isWarp = false;\n    triggerEvent(moveable, \"onWarpEnd\", fillParams(moveable, e, {\n      isDrag: isDrag\n    }));\n    return isDrag;\n  }\n};\n\nvar AREA = prefix(\"area\");\nvar AREA_PIECES = prefix(\"area-pieces\");\nvar AREA_PIECE = prefix(\"area-piece\");\nvar AVOID = prefix(\"avoid\");\n\nfunction restoreStyle(moveable) {\n  var el = moveable.areaElement;\n  var _a = moveable.state,\n      width = _a.width,\n      height = _a.height;\n  removeClass(el, AVOID);\n  el.style.cssText += \"left: 0px; top: 0px; width: \" + width + \"px; height: \" + height + \"px\";\n}\n\nfunction renderPieces(React) {\n  return React.createElement(\"div\", {\n    key: \"area_pieces\",\n    className: AREA_PIECES\n  }, React.createElement(\"div\", {\n    className: AREA_PIECE\n  }), React.createElement(\"div\", {\n    className: AREA_PIECE\n  }), React.createElement(\"div\", {\n    className: AREA_PIECE\n  }), React.createElement(\"div\", {\n    className: AREA_PIECE\n  }));\n}\n\nvar DragArea = {\n  name: \"dragArea\",\n  props: {\n    dragArea: Boolean\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        target = _a.target,\n        dragArea = _a.dragArea,\n        groupable = _a.groupable;\n    var _b = moveable.state,\n        width = _b.width,\n        height = _b.height,\n        renderPoses = _b.renderPoses;\n\n    if (groupable) {\n      return [React.createElement(\"div\", {\n        key: \"area\",\n        ref: ref(moveable, \"areaElement\"),\n        className: AREA\n      }), renderPieces(React)];\n    }\n\n    if (!target || !dragArea) {\n      return [];\n    }\n\n    var h = createWarpMatrix([0, 0], [width, 0], [0, height], [width, height], renderPoses[0], renderPoses[1], renderPoses[2], renderPoses[3]);\n    var transform = h.length ? \"matrix3d(\" + convertMatrixtoCSS(h).join(\",\") + \")\" : \"none\";\n    return [React.createElement(\"div\", {\n      key: \"area\",\n      ref: ref(moveable, \"areaElement\"),\n      className: AREA,\n      style: {\n        top: \"0px\",\n        left: \"0px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        transformOrigin: \"0 0\",\n        transform: transform\n      }\n    }), renderPieces(React)];\n  },\n  dragStart: function (moveable, _a) {\n    var datas = _a.datas,\n        clientX = _a.clientX,\n        clientY = _a.clientY,\n        inputEvent = _a.inputEvent;\n\n    if (!inputEvent) {\n      return false;\n    }\n\n    datas.isDragArea = false;\n    datas.inputTarget = inputEvent.target;\n    var areaElement = moveable.areaElement;\n    var _b = moveable.state,\n        moveableClientRect = _b.moveableClientRect,\n        renderPoses = _b.renderPoses,\n        rootMatrix = _b.rootMatrix,\n        is3d = _b.is3d;\n    var left = moveableClientRect.left,\n        top = moveableClientRect.top;\n\n    var _c = getRect(renderPoses),\n        relativeLeft = _c.left,\n        relativeTop = _c.top,\n        width = _c.width,\n        height = _c.height;\n\n    var n = is3d ? 4 : 3;\n\n    var _d = caculateInversePosition(rootMatrix, [clientX - left, clientY - top], n),\n        posX = _d[0],\n        posY = _d[1];\n\n    posX -= relativeLeft;\n    posY -= relativeTop;\n    var rects = [{\n      left: relativeLeft,\n      top: relativeTop,\n      width: width,\n      height: posY - 10\n    }, {\n      left: relativeLeft,\n      top: relativeTop,\n      width: posX - 10,\n      height: height\n    }, {\n      left: relativeLeft,\n      top: relativeTop + posY + 10,\n      width: width,\n      height: height - posY - 10\n    }, {\n      left: relativeLeft + posX + 10,\n      top: relativeTop,\n      width: width - posX - 10,\n      height: height\n    }];\n    var children = [].slice.call(areaElement.nextElementSibling.children);\n    rects.forEach(function (rect, i) {\n      children[i].style.cssText = \"left: \" + rect.left + \"px;top: \" + rect.top + \"px; width: \" + rect.width + \"px; height: \" + rect.height + \"px;\";\n    });\n    addClass(areaElement, AVOID);\n    return true;\n  },\n  drag: function (moveable, _a) {\n    var datas = _a.datas,\n        inputEvent = _a.inputEvent;\n\n    if (!inputEvent) {\n      return false;\n    }\n\n    if (!datas.isDragArea) {\n      datas.isDragArea = true;\n      restoreStyle(moveable);\n    }\n  },\n  dragEnd: function (moveable, e) {\n    if (!e.inputEvent) {\n      return false;\n    }\n\n    var inputEvent = e.inputEvent,\n        datas = e.datas;\n    var isDragArea = datas.isDragArea;\n\n    if (!isDragArea) {\n      restoreStyle(moveable);\n    }\n\n    var target = moveable.state.target;\n    var inputTarget = inputEvent.target;\n\n    if (isDragArea || moveable.isMoveableElement(inputTarget)) {\n      return;\n    }\n\n    var containsTarget = target.contains(inputTarget);\n    triggerEvent(moveable, \"onClick\", fillParams(moveable, e, {\n      isDouble: e.isDouble,\n      inputTarget: inputTarget,\n      isTarget: target === inputTarget,\n      containsTarget: containsTarget\n    }));\n  },\n  dragGroupStart: function (moveable, e) {\n    return this.dragStart(moveable, e);\n  },\n  dragGroup: function (moveable, e) {\n    return this.drag(moveable, e);\n  },\n  dragGroupEnd: function (moveable, e) {\n    var inputEvent = e.inputEvent,\n        isDragArea = e.isDragArea,\n        datas = e.datas;\n\n    if (!inputEvent) {\n      return false;\n    }\n\n    if (!isDragArea) {\n      restoreStyle(moveable);\n    }\n\n    var prevInputTarget = datas.inputTarget;\n    var inputTarget = inputEvent.target;\n\n    if (isDragArea || moveable.isMoveableElement(inputTarget) || prevInputTarget === inputTarget) {\n      return;\n    }\n\n    var targets = moveable.props.targets;\n    var targetIndex = targets.indexOf(inputTarget);\n    var isTarget = targetIndex > -1;\n    var containsTarget = false;\n\n    if (targetIndex === -1) {\n      targetIndex = findIndex(targets, function (parentTarget) {\n        return parentTarget.contains(inputTarget);\n      });\n      containsTarget = targetIndex > -1;\n    }\n\n    triggerEvent(moveable, \"onClickGroup\", fillParams(moveable, e, {\n      isDouble: e.isDouble,\n      targets: targets,\n      inputTarget: inputTarget,\n      targetIndex: targetIndex,\n      isTarget: isTarget,\n      containsTarget: containsTarget\n    }));\n  }\n};\n\nvar Origin = {\n  name: \"origin\",\n  props: {\n    origin: Boolean\n  },\n  render: function (moveable, React) {\n    if (!moveable.props.origin) {\n      return null;\n    }\n\n    var _a = moveable.state,\n        beforeOrigin = _a.beforeOrigin,\n        rotation = _a.rotation;\n    return [React.createElement(\"div\", {\n      className: prefix(\"control\", \"origin\"),\n      style: getControlTransform(rotation, beforeOrigin),\n      key: \"beforeOrigin\"\n    })];\n  }\n};\n\nfunction getDefaultScrollPosition(e) {\n  var scrollContainer = e.scrollContainer;\n  return [scrollContainer.scrollLeft, scrollContainer.scrollTop];\n}\n\nvar Scrollable = {\n  name: \"scrollable\",\n  canPinch: true,\n  props: {\n    scrollable: Boolean,\n    scrollContainer: Object,\n    scrollThreshold: Number\n  },\n  dragStart: function (moveable, e) {\n    var props = moveable.props;\n    var _a = props.scrollContainer,\n        scrollContainer = _a === void 0 ? moveable.getContainer() : _a;\n    var dragScroll = new DragScroll();\n    e.datas.dragScroll = dragScroll;\n    var draggerName = e.isControl ? \"controlDragger\" : \"targetDragger\";\n    var targets = e.targets;\n    dragScroll.on(\"scroll\", function (_a) {\n      var container = _a.container,\n          direction = _a.direction;\n      var params = fillParams(moveable, e, {\n        scrollContainer: container,\n        direction: direction\n      });\n      var eventName = targets ? \"onScrollGroup\" : \"onScroll\";\n\n      if (targets) {\n        params.targets = targets;\n      }\n\n      triggerEvent(moveable, eventName, params);\n    }).on(\"move\", function (_a) {\n      var offsetX = _a.offsetX,\n          offsetY = _a.offsetY;\n      moveable[draggerName].scrollBy(offsetX, offsetY, e.inputEvent, false);\n    });\n    dragScroll.dragStart(e, {\n      container: scrollContainer\n    });\n  },\n  checkScroll: function (moveable, e) {\n    var dragScroll = e.datas.dragScroll;\n\n    if (!dragScroll) {\n      return;\n    }\n\n    var _a = moveable.props,\n        _b = _a.scrollContainer,\n        scrollContainer = _b === void 0 ? moveable.getContainer() : _b,\n        _c = _a.scrollThreshold,\n        scrollThreshold = _c === void 0 ? 0 : _c,\n        _d = _a.getScrollPosition,\n        getScrollPosition = _d === void 0 ? getDefaultScrollPosition : _d;\n    dragScroll.drag(e, {\n      container: scrollContainer,\n      threshold: scrollThreshold,\n      getScrollPosition: function (ev) {\n        return getScrollPosition({\n          scrollContainer: ev.container,\n          direction: ev.direction\n        });\n      }\n    });\n    return true;\n  },\n  drag: function (moveable, e) {\n    return this.checkScroll(moveable, e);\n  },\n  dragEnd: function (moveable, e) {\n    e.datas.dragScroll.dragEnd();\n    e.datas.dragScroll = null;\n  },\n  dragControlStart: function (moveable, e) {\n    return this.dragStart(moveable, __assign({}, e, {\n      isControl: true\n    }));\n  },\n  dragControl: function (moveable, e) {\n    return this.drag(moveable, e);\n  },\n  dragControlEnd: function (moveable, e) {\n    return this.dragEnd(moveable, e);\n  },\n  dragGroupStart: function (moveable, e) {\n    return this.dragStart(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroup: function (moveable, e) {\n    return this.drag(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroupEnd: function (moveable, e) {\n    return this.dragEnd(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroupControlStart: function (moveable, e) {\n    return this.dragStart(moveable, __assign({}, e, {\n      targets: moveable.props.targets,\n      isControl: true\n    }));\n  },\n  dragGroupContro: function (moveable, e) {\n    return this.drag(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroupControEnd: function (moveable, e) {\n    return this.dragEnd(moveable, __assign({}, e, {\n      targets: moveable.props.targets\n    }));\n  }\n};\n\nvar Default = {\n  name: \"\",\n  props: {\n    target: Object,\n    container: Object,\n    dragArea: Boolean,\n    origin: Boolean,\n    transformOrigin: Array,\n    edge: Boolean,\n    ables: Array,\n    className: String,\n    pinchThreshold: Number\n  }\n};\n\nvar Padding = {\n  name: \"padding\",\n  props: {\n    padding: Object\n  },\n  render: function (moveable, React) {\n    var props = moveable.props;\n\n    if (props.dragArea) {\n      return [];\n    }\n\n    var padding = props.padding || {};\n    var _a = padding.left,\n        left = _a === void 0 ? 0 : _a,\n        _b = padding.top,\n        top = _b === void 0 ? 0 : _b,\n        _c = padding.right,\n        right = _c === void 0 ? 0 : _c,\n        _d = padding.bottom,\n        bottom = _d === void 0 ? 0 : _d;\n    var _e = moveable.state,\n        renderPoses = _e.renderPoses,\n        pos1 = _e.pos1,\n        pos2 = _e.pos2,\n        pos3 = _e.pos3,\n        pos4 = _e.pos4;\n    var poses = [pos1, pos2, pos3, pos4];\n    var paddingDirections = [];\n\n    if (left > 0) {\n      paddingDirections.push([0, 2]);\n    }\n\n    if (top > 0) {\n      paddingDirections.push([0, 1]);\n    }\n\n    if (right > 0) {\n      paddingDirections.push([1, 3]);\n    }\n\n    if (bottom > 0) {\n      paddingDirections.push([2, 3]);\n    }\n\n    return paddingDirections.map(function (_a, i) {\n      var dir1 = _a[0],\n          dir2 = _a[1];\n      var paddingPos1 = poses[dir1];\n      var paddingPos2 = poses[dir2];\n      var paddingPos3 = renderPoses[dir1];\n      var paddingPos4 = renderPoses[dir2];\n      var h = createWarpMatrix([0, 0], [100, 0], [0, 100], [100, 100], paddingPos1, paddingPos2, paddingPos3, paddingPos4);\n\n      if (!h.length) {\n        return undefined;\n      }\n\n      return React.createElement(\"div\", {\n        key: \"padding\" + i,\n        className: prefix(\"padding\"),\n        style: {\n          transform: \"matrix3d(\" + convertMatrixtoCSS(h).join(\",\") + \")\"\n        }\n      });\n    });\n  }\n};\n\nvar MOVEABLE_ABLES = [Default, Snappable, Pinchable, Draggable, Rotatable, Resizable, Scalable, Warpable, Scrollable, DragArea, Padding, Origin];\n\nvar Groupable = {\n  name: \"groupable\",\n  props: {\n    defaultGroupRotate: Number,\n    groupable: Boolean\n  },\n  render: function (moveable, React) {\n    var targets = moveable.props.targets || [];\n    moveable.moveables = [];\n    var _a = moveable.state,\n        left = _a.left,\n        top = _a.top;\n    var position = {\n      left: left,\n      top: top\n    };\n    return targets.map(function (target, i) {\n      return React.createElement(MoveableManager, {\n        key: \"moveable\" + i,\n        ref: refs(moveable, \"moveables\", i),\n        target: target,\n        origin: false,\n        parentMoveable: moveable,\n        parentPosition: position\n      });\n    });\n  }\n};\n\nfunction getMaxPos(poses, index) {\n  return Math.max.apply(Math, poses.map(function (_a) {\n    var pos1 = _a[0],\n        pos2 = _a[1],\n        pos3 = _a[2],\n        pos4 = _a[3];\n    return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\n  }));\n}\n\nfunction getMinPos(poses, index) {\n  return Math.min.apply(Math, poses.map(function (_a) {\n    var pos1 = _a[0],\n        pos2 = _a[1],\n        pos3 = _a[2],\n        pos4 = _a[3];\n    return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\n  }));\n}\n\nfunction getGroupRect(moveables, rotation) {\n  if (!moveables.length) {\n    return [0, 0, 0, 0];\n  }\n\n  var moveablePoses = moveables.map(function (_a) {\n    var state = _a.state;\n    return getAbsolutePosesByState(state);\n  });\n  var minX = MAX_NUM;\n  var minY = MAX_NUM;\n  var groupWidth = 0;\n  var groupHeight = 0;\n  var fixedRotation = throttle(rotation, TINY_NUM);\n\n  if (fixedRotation % 90) {\n    var rad_1 = rotation / 180 * Math.PI;\n    var a1_1 = Math.tan(rad_1);\n    var a2_1 = -1 / a1_1;\n    var b1s_1 = [MIN_NUM, MAX_NUM];\n    var b2s_1 = [MIN_NUM, MAX_NUM];\n    moveablePoses.forEach(function (poses) {\n      poses.forEach(function (pos) {\n        // ax + b = y\n        // ㅠ = y - ax\n        var b1 = pos[1] - a1_1 * pos[0];\n        var b2 = pos[1] - a2_1 * pos[0];\n        b1s_1[0] = Math.max(b1s_1[0], b1);\n        b1s_1[1] = Math.min(b1s_1[1], b1);\n        b2s_1[0] = Math.max(b2s_1[0], b2);\n        b2s_1[1] = Math.min(b2s_1[1], b2);\n      });\n    });\n    b1s_1.forEach(function (b1) {\n      // a1x + b1 = a2x + b2\n      b2s_1.forEach(function (b2) {\n        // (a1 - a2)x = b2 - b1\n        var x = (b2 - b1) / (a1_1 - a2_1);\n        var y = a1_1 * x + b1;\n        minX = Math.min(minX, x);\n        minY = Math.min(minY, y);\n      });\n    });\n    var rotatePoses = moveablePoses.map(function (_a) {\n      var pos1 = _a[0],\n          pos2 = _a[1],\n          pos3 = _a[2],\n          pos4 = _a[3];\n      return [rotate(pos1, -rad_1), rotate(pos2, -rad_1), rotate(pos3, -rad_1), rotate(pos4, -rad_1)];\n    });\n    groupWidth = getMaxPos(rotatePoses, 0) - getMinPos(rotatePoses, 0);\n    groupHeight = getMaxPos(rotatePoses, 1) - getMinPos(rotatePoses, 1);\n  } else {\n    minX = getMinPos(moveablePoses, 0);\n    minY = getMinPos(moveablePoses, 1);\n    groupWidth = getMaxPos(moveablePoses, 0) - minX;\n    groupHeight = getMaxPos(moveablePoses, 1) - minY;\n\n    if (fixedRotation % 180) {\n      var changedWidth = groupWidth;\n      groupWidth = groupHeight;\n      groupHeight = changedWidth;\n    }\n  }\n\n  return [minX, minY, groupWidth, groupHeight];\n}\n\nvar MoveableGroup =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(MoveableGroup, _super);\n\n  function MoveableGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.differ = new ChildrenDiffer();\n    _this.moveables = [];\n    _this.rotation = 0;\n    return _this;\n  }\n\n  var __proto = MoveableGroup.prototype;\n\n  __proto.updateEvent = function (prevProps) {\n    var state = this.state;\n    var props = this.props;\n\n    if (!state.target) {\n      state.target = this.areaElement;\n      this.controlBox.getElement().style.display = \"block\";\n      this.targetDragger = getTargetAbleDragger(this, state.target, \"Group\");\n      this.controlDragger = getAbleDragger(this, this.controlBox.getElement(), \"controlAbles\", \"GroupControl\");\n    }\n\n    var isContainerChanged = !equals(prevProps.container, props.container);\n\n    if (isContainerChanged) {\n      state.container = props.container;\n    }\n\n    var _a = this.differ.update(props.targets),\n        added = _a.added,\n        changed = _a.changed,\n        removed = _a.removed;\n\n    if (isContainerChanged || added.length || changed.length || removed.length) {\n      this.updateRect();\n    }\n  };\n\n  __proto.checkUpdate = function () {\n    this.updateAbles();\n  };\n\n  __proto.updateRect = function (type, isTarget, isSetState) {\n    var _a;\n\n    if (isSetState === void 0) {\n      isSetState = true;\n    }\n\n    if (!this.controlBox) {\n      return;\n    }\n\n    this.moveables.forEach(function (moveable) {\n      moveable.updateRect(type, false, false);\n    });\n    var state = this.state;\n    var props = this.props;\n    var target = state.target || props.target;\n\n    if (!isTarget || type !== \"\" && props.updateGroup) {\n      // reset rotataion\n      this.rotation = props.defaultGroupRotate;\n    }\n\n    var rotation = this.rotation;\n\n    var _b = getGroupRect(this.moveables, rotation),\n        left = _b[0],\n        top = _b[1],\n        width = _b[2],\n        height = _b[3]; // tslint:disable-next-line: max-line-length\n\n\n    target.style.cssText += \"left:0px;top:0px;width:\" + width + \"px; height:\" + height + \"px;transform:rotate(\" + rotation + \"deg)\";\n    state.width = width;\n    state.height = height;\n    var container = this.getContainer();\n    var info = getTargetInfo(this.controlBox.getElement(), target, this.controlBox.getElement(), this.getContainer(), this.props.rootContainer || container, state);\n    var pos = [info.left, info.top];\n    _a = getAbsolutePosesByState(info), info.pos1 = _a[0], info.pos2 = _a[1], info.pos3 = _a[2], info.pos4 = _a[3];\n    info.origin = plus(pos, info.origin);\n    info.beforeOrigin = plus(pos, info.beforeOrigin);\n    var clientRect = info.targetClientRect;\n    clientRect.top += top - info.top - state.top;\n    clientRect.left += left - info.left - state.left;\n    this.updateState(__assign({}, info, {\n      left: left - info.left,\n      top: top - info.top\n    }), isSetState);\n  };\n\n  __proto.triggerEvent = function (name, e) {\n    if (name.indexOf(\"Group\") > -1) {\n      return _super.prototype.triggerEvent.call(this, name, e);\n    }\n  };\n\n  __proto.updateAbles = function () {\n    _super.prototype.updateAbles.call(this, this.props.ables.concat([Groupable]), \"Group\");\n  };\n\n  MoveableGroup.defaultProps = __assign({}, MoveableManager.defaultProps, {\n    transformOrigin: [\"50%\", \"50%\"],\n    groupable: true,\n    dragArea: true,\n    keepRatio: true,\n    targets: [],\n    defaultGroupRotate: 0\n  });\n  return MoveableGroup;\n}(MoveableManager);\n\nvar Moveable =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Moveable, _super);\n\n  function Moveable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = Moveable.prototype;\n\n  __proto.render = function () {\n    var props = this.props;\n    var ables = props.ables || [];\n    var target = this.props.target || this.props.targets;\n    var isArr = isArray(target);\n    var isGroup = isArr && target.length > 1;\n\n    if (isGroup) {\n      var nextProps = __assign({}, this.props, {\n        target: null,\n        targets: target,\n        ables: MOVEABLE_ABLES.concat([Groupable], ables)\n      });\n\n      return createElement(MoveableGroup, __assign({\n        key: \"group\",\n        ref: ref(this, \"moveable\")\n      }, nextProps));\n    } else {\n      var moveableTarget = isArr ? target[0] : target;\n      return createElement(MoveableManager, __assign({\n        key: \"single\",\n        ref: ref(this, \"moveable\")\n      }, __assign({}, this.props, {\n        target: moveableTarget,\n        ables: MOVEABLE_ABLES.concat(ables)\n      })));\n    }\n  };\n  /**\n   * Check if the target is an element included in the moveable.\n   * @method Moveable#isMoveableElement\n   * @param - the target\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * window.addEventListener(\"click\", e => {\n   *     if (!moveable.isMoveableElement(e.target)) {\n   *         moveable.target = e.target;\n   *     }\n   * });\n   */\n\n\n  __proto.isMoveableElement = function (target) {\n    return this.moveable.isMoveableElement(target);\n  };\n  /**\n   * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\n   * @method Moveable#dragStart\n   * @param - external `MouseEvent`or `TouchEvent`\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * document.body.addEventListener(\"mousedown\", e => {\n   *     if (!moveable.isMoveableElement(e.target)) {\n   *          moveable.dragStart(e);\n   *     }\n   * });\n   */\n\n\n  __proto.dragStart = function (e) {\n    this.moveable.dragStart(e);\n  };\n  /**\n   * Whether the coordinates are inside Moveable\n   * @method Moveable#isInside\n   * @param - x coordinate\n   * @param - y coordinate\n   * @return - True if the coordinate is in moveable or false\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * document.body.addEventListener(\"mousedown\", e => {\n   *     if (moveable.isInside(e.clientX, e.clientY)) {\n   *          console.log(\"inside\");\n   *     }\n   * });\n   */\n\n\n  __proto.isInside = function (clientX, clientY) {\n    return this.moveable.isInside(clientX, clientY);\n  };\n  /**\n   * Hit test an element or rect on a moveable target.\n   * @method Moveable#hitTest\n   * @param - element or rect to test\n   * @return - Get hit test rate (rate > 0 is hitted)\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * document.body.addEventListener(\"mousedown\", e => {\n   *     if (moveable.hitTest(e.target) > 0) {\n   *          console.log(\"hiited\");\n   *     }\n   * });\n   */\n\n\n  __proto.hitTest = function (el) {\n    return this.moveable.hitTest(el);\n  };\n  /**\n   * If the width, height, left, and top of all elements change, update the shape of the moveable.\n   * @method Moveable#updateRect\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * window.addEventListener(\"resize\", e => {\n   *     moveable.updateRect();\n   * });\n   */\n\n\n  __proto.updateRect = function () {\n    this.moveable.updateRect();\n  };\n  /**\n   * If the width, height, left, and top of the only target change, update the shape of the moveable.\n   * @method Moveable#updateTarget\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * moveable.updateTarget();\n   */\n\n\n  __proto.updateTarget = function () {\n    this.moveable.updateTarget();\n  };\n  /**\n   * Check if the moveable state is being dragged.\n   * @method Moveable#isDragging\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * // false\n   * console.log(moveable.isDragging());\n   *\n   * moveable.on(\"drag\", () => {\n   *   // true\n   *   console.log(moveable.isDragging());\n   * });\n   */\n\n\n  __proto.isDragging = function () {\n    return this.moveable.isDragging();\n  };\n  /**\n   * You can get the vertex information, position and offset size information of the target based on the container.\n   * @method Moveable#getRect\n   * @return - The Rect Info\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * const rectInfo = moveable.getRect();\n   */\n\n\n  __proto.getRect = function () {\n    return this.moveable.getRect();\n  };\n  /**\n   * Request able through a method rather than an event.\n   * At the moment of execution, requestStart is executed,\n   * and then request and requestEnd can be executed through Requester.\n   * @method Moveable#request\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\n   * @param - ableName\n   * @param - request to be able params. If isInstant is true, request and requestEnd are executed immediately.\n   * @return - Able Requester. If there is no request in able, nothing will work.\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * // Instantly Request (requestStart - request - requestEnd)\n   * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10, isInstant: true });\n   *\n   * // Start move\n   * const requester = moveable.request(\"draggable\");\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.requestEnd();\n   */\n\n\n  __proto.request = function (ableName, params) {\n    return this.moveable.request(ableName, params);\n  };\n  /**\n   * Remove the Moveable object and the events.\n   * @method Moveable#destroy\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * moveable.destroy();\n   */\n\n\n  __proto.destroy = function () {\n    this.moveable.componentWillUnmount();\n  };\n\n  return Moveable;\n}(PureComponent);\n\nexport default Moveable;\n//# sourceMappingURL=moveable.esm.js.map\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","getSVGCursor","scale","degree","agent","IS_WEBKIT","os","name","indexOf","browser","PREFIX","MOVEABLE_CSS","map","x1","x2","degree45","Math","round","defaultCursor","getCursorCSS","join","NEARBY_POS","TINY_NUM","MIN_SCALE","MAX_NUM","pow","MIN_NUM","DIRECTIONS","DIRECTION_INDEXES","w","e","nw","ne","sw","se","DIRECTION_ROTATIONS","prefix","classNames","_i","concat","createIdentityMatrix3","getAbsoluteMatrix","matrix","origin","a","getTransformOrigin","style","transformOrigin","split","getOffsetInfo","el","lastParent","isParent","body","document","target","parentElement","isEnd","position","getComputedStyle","transform","isStatic","offsetParent","getOffsetPosInfo","container","isFixed","_a","tagName","toLowerCase","offsetLeft","offsetTop","containerClientRect","documentElement","getBoundingClientRect","left","top","isSVG","hasOffset","pos","parseFloat","o","value","unit","isHorizontal","getSVGViewBox","ownerSVGElement","measureSVGSize","getBeforeTransformOrigin","getBBox","bbox","viewBox","x","y","getSVGGraphicsOffset","offset","getMatrixStackInfo","prevMatrix","targetMatrix","matrixes","is3d","offsetContainer","styleTransform","v","matrixesLength","offsetPos","push","getSVGMatrix","_b","isOffsetEnd","parentClientLeft","parentClientTop","clientLeft","clientTop","scrollLeft","scrollTop","clientWidth","clientHeight","baseVal","width","height","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","svgOrigin","translate","xAlign","yAlign","floor","scaleDimension","max","min","scaleMatrix","caculatePosition","caculatePoses","getRect","poses","posesX","posesY","right","bottom","caculateRect","caculateMoveablePosition","y1","_c","y2","_d","x3","y3","_e","x4","y4","_f","originX","originY","center","pos1Rad","pos2Rad","PI","getDistSize","vec","sqrt","getLineStyle","pos1","pos2","rad","getDiagonalSize","getControlTransform","rotation","reduce","prev","getSize","isOffset","isBoxSizing","window","boxSizing","offsetWidth","offsetHeight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","getRotationRad","direction","getTargetInfo","moveableElement","parentContainer","rootContainer","state","rootMatrix","offsetMatrix","beforeMatrix","beforeDirection","targetTransform","beforeOrigin","targetClientRect","scrollWidth","scrollHeight","moveableClientRect","undefined","prevRootMatrix","prevN","prevTargetMatrix","rootMatrixes","isRoot3d","isSVGGraphicElement","originalContainer","allMatrix","endContainer","reverse","forEach","slice","absoluteMatrix","rect","rectLeft","rectTop","rectWidth","rectHeight","mat","prevLeft","prevTop","prevWidth","prevHeight","posOrigin","prevOrigin","rectOrigin","count","inverseBeforeMatrix","distLeft","distTop","abs","getSVGOffset","isMatrix3d","caculateMatrixStack","beforePos","getClientRect","pos3","pos4","isExtends","getDirection","direciton","getAttribute","dir","getAbsolutePoses","dist","getAbsolutePosesByState","throttle","num","throttleArray","nums","_","unset","self","getOrientationDirection","fillParams","moveable","params","datas","clientX","clientY","inputEvent","currentTarget","triggerEvent","isManager","MoveableManager","pseudoElt","filterAbles","ables","methods","triggerAblesSimultaneously","enabledAbles","ableGroups","filter","able","some","method","ableGroup","getKeepRatioHeight","isWidth","ratio","getKeepRatioWidth","equals","a1","a2","groupBy","arr","func","groups","groupKeys","index","groupKey","keyIndex","group","flat","cur","maxOffset","args","sort","caculateInversePosition","convertDragDist","distX","distY","caculatePadding","checkSize","targetSize","compareSize","isMax","size","every","triggerAble","ableType","eventOperation","eventAffix","eventType","isReqeust","isStart","isRequest","areaElement","eventName","conditionName","isAfter","updateRect","isGroup","events","renderDatas","render","renderEvent","originalDatas","results","condition","ableName","nextDatas","isUpdate","dragger","moveables","childeMoveable","isPinch","targets","props","triggerRenderStart","sPinch","isDrag","triggerRenderEnd","triggerRender","isUnmounted","forceUpdate","getTargetAbleDragger","moveableTarget","controlBox","getElement","dragArea","startFunc","eventTarget","isMoveableElement","className","getAbleDragger","dragstart","pinchstart","conditionFunctions","pinchOutside","pinchThreshold","options","ControlBoxElement","renderLine","createElement","key","_super","_this","renderPoses","targetAbles","controlAbles","__proto","edge","parentPosition","propsTarget","zoom","checkUpdate","updateRenderPoses","parentLeft","parentTop","stateTarget","groupTargets","isDisplay","ref","renderAbles","componentDidMount","parentMoveable","updateEvent","componentDidUpdate","prevProps","componentWillUnmount","getContainer","dragStart","targetDragger","onDragStart","hitTest","Element","clientRect","rectRight","rectBottom","testLeft","testRight","testTop","testBottom","rectSize","isInside","signs1","signs2","sign","type","isTarget","isSetState","updateState","controlBoxElement","hasTargetAble","hasControlAble","dragTarget","prevTarget","prevDragArea","isTargetChanged","isUnset","controlDragger","unsetAbles","isDragging","isFlag","updateTarget","statePos","request","param","isInstant","groupable","requsetAble","requestEnd","ableRequester","isControl","requester","ableParam","requestStart","stateLeft","stateTop","padding","absoluteOrigin","stateContainer","updateAbles","callback","dragControlStart","nextState","setState","Renderer","defaultProps","PureComponent","getRotatiion","touches","Pinchable","pinchable","Boolean","Number","pinchStart","controlEventName","pinchAbles","canPinch","result","parentRotate","ableEvent","snapRenderInfo","pinch","pinchScale","distance","parentDistance","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","setCustomDrag","delta","isConvert","move","draggableDatas","draggable","parentEvent","CustomDragger","prevX","prevY","startX","startY","client","drag","deltaX","deltaY","parentDragger","triggerChildDragger","match","childs","child","childEvent","childDraggers","parentFlag","triggerChildAble","eachEvent","ableDatas","childDatas","setDragStart","inverseMatrix","startDragBeforeDist","startDragDist","getDragDist","isBefore","getPosIndexesByDirection","indexes","getPosesByDirection","getPosByDirection","nextPoses","getPosByReverseDirection","getDist","startPos","getNextMatrix","getAbsoluteFixedPosition","getStartPos","directionCondition","parentDirection","getGapGuidelines","guidelines","snapThreshold","start","end","otherStart","otherEnd","totalGuidelines","otherIndex","otherType","elementGuidelines","element","sizes","guideline1","elementStart","elementEnd","guideline2Pos","guideline2Sizes","guideline2Element","targetStart","targetEnd","gap","canSnap","gapGuidelines","centerPos","checkSnapPoses","snapCenter","customSnapThreshold","containerHeight","containerWidth","snapHorizontal","snapVertical","snapGap","verticalGuidelines","horizontalGuidelines","_g","getTotalGuidelines","snapElement","values","selectValue","vertical","checkSnap","horizontal","getNearestSnapGuidelineInfo","snapInfo","isSnap","guideline","posInfo","posInfos","guidelineInfo","guidelineInfos","targetType","targetPoses","posType","snapPosInfos","targetPos","snapPosInfo","getNearOffsetInfo","offsets","aSign","bSign","aOffset","bOffset","aDist","bDist","isBound","isStartLine","dot","line","cx","cy","hitTestLine","test1","test2","dx","dy","isSameStartLine","dots","error","centerSign","checkInnerBoundDot","threshold","checkLineBoundCollision","boundLine","dot1","dot2","boundDot1","boundDot2","dy1","dx1","dy2","getInnerBoundInfo","lines","multiple","bounds","innerBounds","isAllBound","isVerticalBound","isHorizontalBound","leftLine","topLine","rightLine","bottomLine","isHorizontalStart","isVerticalStart","topBoundInfo","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isAllHorizontalBound","verticalOffset","horizontalOffset","checkInnerBound","sizeOffset","getCheckSnapLines","keepRatio","lineDirections","getCheckSnapLineDirections","dir1","dir2","isBoundRotate","relativePoses","boundDots","checkBoundPoses","verticalPoses","horizontalPoses","Infinity","checkBound","isVertical","startBoundPos","endBoundPos","minPos","maxPos","isBoundRotate$1","boundRect","caculateContainerPos","containerRect","clientPos","snapStart","containerLeft","containerTop","targetLeft","targetTop","elementLeft","elementTop","elementRight","elementBottom","enableSnap","hasGuidelines","snappable","solveNextOffset","snapOffset","solveEquation","getNextFixedPoses","fixedPos","nextPos","getSnapBoundOffset","boundInfo","getSnapBound","checkSnapBounds","boundPoses","horizontalBoundInfo","verticalBoundInfo","horizontalSnapInfo","verticalSnapInfo","horizontalDist","verticalDist","normalized","getSizeOffsetInfo","directions","fixedDirection","getCheckSnapDirections","startDirection","endDirection","otherStartPos","otherEndPos","snapBoundInfo","endPos","endX","endY","isBottom","isRight","verticalInfo","horizontalInfo","checkBoundKeepRatio","isVerticalSnap","verticalGuideline","isHorizontalSnap","horizontalGuideline","horizontalPos","verticalPos","checkSnapKeepRatio","checkSnapBoundsKeepRatio","otherHorizontalDist","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalDist","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","getSnapBoundInfo","widthOffsetInfo","heightOffsetInfo","checkSizeDist","getNextPoses","widthOffset","heightOffset","isWidthBound","isHeightBound","nextWidthOffset","nextHeightOffset","widthDist","heightDist","maxWidth","maxHeight","left_1","top_1","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","verticalDirection","horizontalDirection","deg","nextOtherPos","isNaN","checkMaxBounds","recheckSizeByTwoDirection","checkSnapRotate","prevPoses","relativeLeft","relativeRight","relativeTop","relativeBottom","boundPos","relativeRad1","r","boundRotate","relativeRad2","nextRad","checkRotateBounds","dotInfos","lineRad","solveReverseLine","lineDist","getDistPointLine","dotDist","dotRad","distRad","acos","checkRotateInnerBounds","checkSnapDrag","throttleDragRotate","absolutePoses","snapPoses","verticalSnapBoundInfo","horizontalSnapBoundInfo","innerBoundInfo","getInverseDragDist","getInnerBoundDragInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","offsetX","offsetY","adjustPoses","adjustPos","prevDistY","checkThrottleDragRotate","getSnapGuidelines","getElementGuidelineDist","elementPos","elementSize","relativePos","groupByElementGuidelines","groupInfos","groupInfo","groupElement","groupPos","renderElementGroup","clientSize","isDisplaySnapDigit","snapDigit","snapDistFormat","React","directionName","posName1","posName2","sizeName","isFirstRenderSize","j","linePos","lineSize","isRenderSize","snapSize","toFixed","renderSnapPoses","renderGuidelines","targetPos1","targetPos2","getGapGuidelines$1","targetSizes","guidelineType","minOffset","minSize","guidelinePos","absGap","aPos","gapPos","gapSizes","gapGuideline","renderPos","getGapGuidelinesToStart","bPos","getGapGuidelinesToEnd","renderGapGuidelines","Snappable","minLeft","minTop","containerPos","_h","verticalSnapPoses","horizontalSnapPoses","snapInfos","snapDirection","alignPoses","getSnapInfosByDirection","snap","middle","isSnapCenter","verticalNames","horizontalNames","checkSnaps","verticalPosInfos","horizontalPosInfos","verticalBoundPos","horizontalBoundPos","boundMap","checkInnerBoundPoses","verticalInnerBoundPoses","horizontalInnerBoundPoses","addBoundGuidelines","elementHorizontalGroup","elementVerticalGroup","gapVerticalGuidelines","gapHorizontalGuidelines","allGuidelines","elements","gaps","dragEnd","dragControlCondition","dragControlEnd","dragGroupStart","dragGroupEnd","dragGroupControlStart","dragGroupControlEnd","Draggable","throttleDrag","dragInfo","startTranslate","prevDist","prevBeforeDist","startCheckSnapDrag","set","startRect","dragRotateRad","cos","sin","passDeltaX","passDistX","passDeltaY","passDistY","beforeTranslate","beforeDist","beforeDelta","nextTransform","dragGroup","nextParams","setRotateStartInfo","nextOrigin","startAbsoluteOrigin","prevDeg","prevSnapDeg","startDeg","loop","getParentDeg","moveableRect","parentDist","startRotate","absoluteDeg","getDeg","throttleRotate","prevLoop","absolutePrevSnapDeg","getRotateInfo","Rotatable","rotatable","rotationPosition","String","getPositions","rotationRad","externalRotate","beforeInfo","afterInfo","controlRect","rotatation","isRotate","dragControl","rotate","beforeRotate","dragGroupControlCondition","parentBeforeOrigin","eventParams","childClient","prevClient","dragGroupControl","dragResult","distRotate","deltaRotate","renderControls","defaultDirections","renderDirections","directionMap","directionRotation","renderAllDirections","renderDiagonalDirections","Resizable","resizable","throttleResize","baseDirection","startOffsetWidth","startOffsetHeight","getCSSSize","startWidth","startHeight","maxSize","minWidth","minHeight","getStartDirection","fixedPosition","fixedOriginalPosition","setOrigin","isResize","parentScale","parentKeepRatio","dragClient","sizeDirection","distWidth","distHeight","standardRad","ratioRad","signSize","nextWidth","nextHeight","snapDist","checkSnapSize","isNoSnap","caculateBoundSize","inverseDelta","prevSize","caculateTransformOrigin","groupLeft","groupTop","getResizeDist","dragControlAfter","errorWidth","errorHeight","isErrorWidth","isErrorHeight","originalX","originalY","deltaWidth","deltaHeight","Scalable","scalable","throttleScale","startScale","isScale","nowDist","stateDirection","sizeDist","checkSnapScale","snapHeight","snapWidth","getScaleDist","getMiddleLinePos","getTriangleRad","rad1","Warpable","warpable","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","warpTargetMatrix","targetInverseMatrix","startMatrix","posIndexes","isWarp","selectedPoses","nearByPoses","poses1","poses2","rad2","pi","h","multiply","AREA","AREA_PIECES","AREA_PIECE","AVOID","restoreStyle","cssText","renderPieces","DragArea","isDragArea","inputTarget","posX","posY","rects","children","nextElementSibling","containsTarget","contains","isDouble","prevInputTarget","targetIndex","parentTarget","Origin","getDefaultScrollPosition","scrollContainer","Scrollable","scrollable","scrollThreshold","dragScroll","draggerName","on","scrollBy","checkScroll","getScrollPosition","ev","dragGroupContro","dragGroupControEnd","MOVEABLE_ABLES","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","Groupable","defaultGroupRotate","getMaxPos","getMinPos","MoveableGroup","differ","display","isContainerChanged","update","added","changed","removed","updateGroup","moveablePoses","minX","minY","groupWidth","groupHeight","fixedRotation","rad_1","a1_1","tan","a2_1","b1s_1","b2s_1","b1","b2","rotatePoses","changedWidth","getGroupRect","info","Moveable","isArr","nextProps","destroy"],"sourceRoot":""}