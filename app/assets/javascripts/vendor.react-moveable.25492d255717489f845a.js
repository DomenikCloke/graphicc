"use strict";(self.webpackChunkGwaphics=self.webpackChunkGwaphics||[]).push([[44],{3859:(t,r,e)=>{e.d(r,{A:()=>Jr});var n=e(6540),a=e(1720),i=e(4111),o=e(7728),s=e(2243),u=e(7441),l=e(3646),f=e(4890),p=e(3089),c=function(t,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])},c(t,r)};function d(t,r){function e(){this.constructor=t}c(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var h=function(){return h=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},h.apply(this,arguments)};function g(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+r+'deg);transform-origin: 16px 16px"></path></svg>'}var v=(0,i.Ay)(),m=v.os.name.indexOf("ios")>-1||v.browser.name.indexOf("safari")>-1,b="moveable-",x=(0,a.SS)(b,"\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var r=g(1,t),e=g(2,t),n=45*Math.round(t/45)%180,a=135===n?"nwse-resize":45===n?"nesw-resize":90===n?"ew-resize":"ns-resize";return"cursor:"+a+";cursor: url('"+r+"') 16 16, "+a+";cursor: -webkit-image-set(url('"+r+"') 1x, url('"+e+"') 2x) 16 16, "+a+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n.control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: pointer;\n}\n"+(m?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n"),M=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],D=1e-7,S=1e-9,E=Math.pow(10,10),R=-E,z=["nw","ne","sw","se","n","w","s","e"],B={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},C={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function w(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return a.T6.apply(void 0,[b].concat(t))}function y(){return(0,s.k8)(3)}function G(t,r,e){return(0,s.B4)(r,(0,s.GD)(e,r),t,(0,s.GD)(e.map((function(t){return-t})),r))}function P(t){var r=t.transformOrigin;return r?r.split(" "):["0","0"]}function O(t,r,e){for(var n=document.body,a=!t||e?t:t.parentElement,i=!1,o="relative";a&&a!==n;){r===a&&(i=!0);var s=at(a),u=s.transform;if("static"!==(o=s.position)||u&&"none"!==u)break;a=a.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:i||!a||a===n,offsetParent:a||n}}function Y(t,r,e,n){var a,i=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;if(n){var l=(r||document.documentElement).getBoundingClientRect();s-=l.left,u-=l.top}var f,p=(0,o.b0)(s),c=!p;return c||"svg"===i?f=P(e).map((function(t){return parseFloat(t)})):(f=m?function(t){return P(at(t,":before")).map((function(r,e){var n=(0,o.hg)(r),a=n.value,i=n.unit;return a*function(t,r,e){return"%"===r?k(t.ownerSVGElement)[e?"width":"height"]/100:1}(t,i,0===e)}))}(t):P(e).map((function(t){return parseFloat(t)})),c=!0,"g"===i?(s=0,u=0):(a=function(t,r){if(!t.getBBox)return[0,0];var e=t.getBBox(),n=k(t.ownerSVGElement),a=e.x-n.x,i=e.y-n.y;return[a,i,r[0]-a,r[1]-i]}(t,f),s=a[0],u=a[1],f[0]=a[2],f[1]=a[3])),{isSVG:p,hasOffset:c,offset:[s,u],origin:f}}function I(t,r,e){var n,a,i,u=t,l=[],f=!1,p=!1,c=3,d=O(r,r,!0).offsetParent;for(e&&(f=t===r,e.length>10&&(p=!0,c=4),r=t.parentElement);u&&!f;){var h=at(u),g=u.tagName.toLowerCase(),v=h.position,b="fixed"===v,x=h.transform,M=(0,s.zs)((i=x)&&"none"!==i?(0,o.Gv)(i)?i:(0,o.ft)(i).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0]),D=M.length;if(!p&&16===D){p=!0,c=4;for(var S=l.length,E=0;E<S;++E)l[E]=(0,s._C)(l[E],3,4)}p&&9===D&&(M=(0,s._C)(M,3,4));var R=Y(u,r,h,b),z=R.hasOffset,B=R.isSVG,C=R.origin,w=R.offset,y=w[0],P=w[1];"svg"===g&&a&&l.push(A(u,c),(0,s.k8)(c));var I=O(u,r),k=I.offsetParent,T=I.isEnd,q=I.isStatic;m&&z&&!B&&q&&"relative"===v&&(y-=k.offsetLeft,P-=k.offsetTop,f=f||T);var W=0,H=0;if(z&&d!==k&&(W=k.clientLeft,H=k.clientTop),l.push(G(M,c,C),(0,s.GD)(z?[y-u.scrollLeft+W,P-u.scrollTop+H]:[u,C],c)),a||(a=M),n||(n=C),f||b)break;u=k,f=T}return a||(a=(0,s.k8)(c)),n||(n=[0,0]),{offsetContainer:d,matrixes:l,targetMatrix:a,transformOrigin:n,is3d:p}}function k(t){var r=t.clientWidth,e=t.clientHeight,n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||r,height:a.height||e}}function A(t,r){var e=t.clientWidth,n=t.clientHeight,a=k(t),i=a.width,o=a.height,u=e/i,l=n/o,f=t.preserveAspectRatio.baseVal,p=f.align,c=f.meetOrSlice,d=[0,0],h=[u,l],g=[0,0];if(1!==p){var v=(p-2)%3,m=Math.floor((p-2)/3);d[0]=i*v/2,d[1]=o*m/2;var b=2===c?Math.max(l,u):Math.min(u,l);h[0]=b,h[1]=b,g[0]=(e-i)/2*v,g[1]=(n-o)/2*m}var x=(0,s.kb)(h,r);return x[r-1]=g[0],x[2*r-1]=g[1],G(x,r,d)}function T(t,r,e){return(0,s.Dt)(t,(0,s.ez)(r,e),e)}function q(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map((function(r){return T(t,r,n)}))}function W(t){var r=t.map((function(t){return t[0]})),e=t.map((function(t){return t[1]})),n=Math.min.apply(Math,r),a=Math.min.apply(Math,e),i=Math.max.apply(Math,r),o=Math.max.apply(Math,e);return{left:n,top:a,right:i,bottom:o,width:i-n,height:o-a}}function H(t,r,e,n){return W(q(t,r,e,n))}function X(t,r,e,n){var a=16===t.length?4:3,i=q(t,e,n,a),o=i[0],u=o[0],l=o[1],f=i[1],p=f[0],c=f[1],d=i[2],h=d[0],g=d[1],v=i[3],m=v[0],b=v[1],x=T(t,r,a),M=x[0],D=x[1],S=Math.min(u,p,h,m),E=Math.min(l,c,g,b),R=Math.max(u,p,h,m),z=Math.max(l,c,g,b);M=M-S||0,D=D-E||0;var B=[((u=u-S||0)+(p=p-S||0)+(h=h-S||0)+(m=m-S||0))/4,((l=l-E||0)+(c=c-E||0)+(g=g-E||0)+(b=b-E||0))/4],C=(0,s.Mu)(B,[u,l]),w=(0,s.Mu)(B,[p,c]);return[[S,E,R,z],[M,D],[[u,l],[p,c],[h,g],[m,b]],C<w&&w-C<Math.PI||C>w&&w-C<-Math.PI?1:-1]}function N(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function F(t,r,e){void 0===e&&(e=(0,s.Mu)(t,r));var n=function(t,r){return N([r[0]-t[0],r[1]-t[1]])}(t,r);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+e+"rad)",width:n+"px"}}function L(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=r.length;return{transform:"translate("+r.reduce((function(t,r){return t+r[0]}),0)/n+"px, "+r.reduce((function(t,r){return t+r[1]}),0)/n+"px) rotate("+t+"rad)"}}function _(t,r,e,n){void 0===r&&(r=window.getComputedStyle(t)),void 0===n&&(n=e||"border-box"===r.boxSizing);var a=t.offsetWidth,i=t.offsetHeight,s=!(0,o.b0)(a);if((e||n)&&s)return[a,i];if(a=t.clientWidth,i=t.clientHeight,!s&&!a&&!i){var u=t.getBBox();return[u.width,u.height]}return e||n?[a+(parseFloat(r.borderLeftWidth)||0)+(parseFloat(r.borderRightWidth)||0),i+(parseFloat(r.borderTopWidth)||0)+(parseFloat(r.borderBottomWidth)||0)]:[a-(parseFloat(r.paddingLeft)||0)-(parseFloat(r.paddingRight)||0),i-(parseFloat(r.paddingTop)||0)-(parseFloat(r.paddingBottom)||0)]}function V(t,r){return(0,s.Mu)(r>0?t[0]:t[1],r>0?t[1]:t[0])}function j(t,r,e,n,a,i){var u,l,f,p,c,d=0,h=0,g=0,v=0,m=[0,0],b=[[0,0],[0,0],[0,0],[0,0]],x=y(),M=y(),D=y(),S=y(),E=y(),R=0,z=0,B=[0,0],C=1,w=1,G=!1,P="",Y=[0,0],k={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},A={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},q={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},W=0,N=i?i.beforeMatrix:void 0,F=i?i.rootMatrix:void 0,L=i?i.is3d?4:3:void 0;if(r){if(i)R=i.width,z=i.height;else{var j=at(r);R=r.offsetWidth,z=r.offsetHeight,(0,o.b0)(R)&&(R=(u=_(r,j,!0))[0],z=u[1])}x=(l=function(t,r,e,n,a,i){var u=I(t,r,n),l=u.matrixes,f=u.is3d,p=u.targetMatrix,c=u.transformOrigin,d=I(u.offsetContainer,e,a),h=d.matrixes,g=d.is3d,v=g||f?4:3,m="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,b=r||document.body,x=n?(0,s._C)(n,i,v):(0,s.k8)(v),M=p,D=a?(0,s._C)(a,i,v):(0,s.k8)(v),S=n?(0,s._C)(n,i,v):(0,s.k8)(v),E=(0,s.k8)(v),R=l.length,z=O(b,b,!0).offsetParent;h.reverse(),l.reverse(),!f&&g&&(M=(0,s._C)(M,3,4),l.forEach((function(t,r){l[r]=(0,s._C)(t,3,4)}))),f&&!g&&h.forEach((function(t,r){h[r]=(0,s._C)(t,3,4)})),a||h.forEach((function(t){D=(0,s.lw)(D,t,v)})),l.forEach((function(t,r){var e;R-2===r&&(S=x.slice()),R-1===r&&(E=x.slice()),(0,o.Gv)(t[v-1])&&(e=function(t,r,e,n,a,i){for(var o,u=_(t),l=u[0],f=u[1],p=r.getBoundingClientRect(),c=t.getBoundingClientRect(),d=c.left-p.left+r.scrollLeft,h=c.top-p.top+r.scrollTop,g=c.width,v=c.height,m=(0,s.B4)(e,a,i),b=H(m,l,f,e),x=b.left,M=b.top,D=b.width,S=b.height,E=T(m,n,e),R=(0,s.Rd)(E,[x,M]),z=[d+R[0]*g/D,h+R[1]*v/S],B=[0,0],C=0;++C<10;){var w=(0,s.B8)(a,e);o=(0,s.Rd)(T(w,z,e),T(w,E,e)),B[0]=o[0],B[1]=o[1];var y=H((0,s.B4)(e,a,(0,s.GD)(B,e),i),l,f,e),G=y.left-d,P=y.top-h;if(Math.abs(G)<2&&Math.abs(P)<2)break;z[0]-=G,z[1]-=P}return B.map((function(t){return Math.round(t)}))}(t[v-1],z,v,t[2*v-1],x,l[r+1]),t[v-1]=e[0],t[2*v-1]=e[1]),x=(0,s.lw)(x,t,v)}));var B=!m&&f;M||(M=(0,s.k8)(B?4:3));var C=(B?"matrix3d":"matrix")+"("+(0,s.ZB)(m&&16===M.length?(0,s._C)(M,4,3):M)+")";return[D=(0,s.bn)(D,v,v),S,E,x,M,C,c,f||g]}(r,e,a,N,F,L))[0],D=l[1],M=l[2],S=l[3],E=l[4],P=l[5],B=l[6],G=l[7],d=(p=(f=X(S,B,R,z))[0])[0],h=p[1],g=p[2],v=p[3],m=f[1],b=f[2],C=f[3];var $,K=G?4:3;$=(c=X(M,(0,s.tY)(B,(0,s.$z)(E,K)),R,z))[0],Y=c[1],w=c[3],Y=[Y[0]+$[0]-d,Y[1]+$[1]-h],k=U(r),A=U(O(n,n,!0).offsetParent||document.body,!0),t&&(q=U(t)),W=V([b[0],b[1]],C)}return{rotation:W,targetClientRect:k,containerClientRect:A,moveableClientRect:q,beforeDirection:w,direction:C,target:r,left:d,top:h,right:g,bottom:v,pos1:b[0],pos2:b[1],pos3:b[2],pos4:b[3],width:R,height:z,rootMatrix:x,beforeMatrix:D,offsetMatrix:M,targetMatrix:E,matrix:S,targetTransform:P,is3d:G,beforeOrigin:Y,origin:m,transformOrigin:B}}function U(t,r){var e=t.getBoundingClientRect(),n=e.left,a=e.width,i=e.top,o=e.bottom,s={left:n,right:e.right,top:i,bottom:o,width:a,height:e.height};return r&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function $(t){if(t){var r=t.getAttribute("data-direction");if(r){var e=[0,0];return r.indexOf("w")>-1&&(e[0]=-1),r.indexOf("e")>-1&&(e[0]=1),r.indexOf("n")>-1&&(e[1]=-1),r.indexOf("s")>-1&&(e[1]=1),e}}}function K(t,r){return[(0,s.tY)(r,t[0]),(0,s.tY)(r,t[1]),(0,s.tY)(r,t[2]),(0,s.tY)(r,t[3])]}function Z(t){var r=t.left,e=t.top;return K([t.pos1,t.pos2,t.pos3,t.pos4],[r,e])}function Q(t,r){return r?Math.round(t/r)*r:t}function J(t,r){return t.forEach((function(e,n){t[n]=Q(t[n],r)})),t}function tt(t,r){t[r]&&(t[r].unset(),t[r]=null)}function rt(t,r,e){return(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])}function et(t,r,e){var n=r.datas;return n.datas||(n.datas={}),h({},e,{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,datas:n.datas})}function nt(t,r,e,n){return n&&Dt.prototype.triggerEvent.call(t,r,e),t.triggerEvent(r,e)}function at(t,r){return window.getComputedStyle(t,r)}function it(t,r,e){var n={},a={};return t.filter((function(t){var i=t.name;if(n[i]||!r.some((function(r){return t[r]})))return!1;if(!e&&t.ableGroup){if(a[t.ableGroup])return!1;a[t.ableGroup]=!0}return n[i]=!0,!0}))}function ot(t,r,e){return t*(r?e:1/e)}function st(t,r,e){return t*(r?1/e:e)}function ut(t,r){return t===r||null==t&&null==r}function lt(t,r){var e=[],n=[];return t.forEach((function(a,i){var o=r(a,i,t),s=n.indexOf(o),u=e[s]||[];-1===s&&(n.push(o),e.push(u)),u.push(a)})),e}function ft(t){return t.reduce((function(t,r){return t.concat(r)}),[])}function pt(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort((function(t,r){return Math.abs(r)-Math.abs(t)})),t[0]}function ct(t,r,e){return(0,s.Dt)((0,s.B8)(t,e),(0,s.ez)(r,e),e)}function dt(t,r){var e,n=t.is3d?4:3;return e=ct(t.rootMatrix,[r.distX,r.distY],n),r.distX=e[0],r.distY=e[1],r}function ht(t,r,e,n,a){return(0,s.Rd)(T(t,(0,s.tY)(e,r),a),n)}function gt(t,r,e){return[[r[0],r[0]*t[1]/t[0]],[r[1]*t[0]/t[1],r[1]]].filter((function(t){return t.every((function(t,n){return e?t<=r[n]:t>=r[n]}))}))[0]||t}function vt(t,r,e,n,a,i,o){var s="Start"===a;if(s&&n.indexOf("Control")>-1&&!i.isRequest&&t.areaElement===i.inputEvent.target)return!1;var u=""+e+n+a,l=""+e+n+"Condition",f="End"===a,p=a.indexOf("After")>-1;s&&t.updateRect(a,!0,!1),""!==a||p||dt(t.state,i);var c=n.indexOf("Group")>-1,d=t[r];if(!d.length)return!1;var g=d.filter((function(t){return t[u]})),v=i.datas,m=v.render||(v.render={}),b=h({},i,{datas:m,originalDatas:v}),x=g.filter((function(r){var e=s&&r[l],n=r.name,a=v[n]||(v[n]={});return!(e&&!e(i,t))&&r[u](t,h({},i,{datas:a,originalDatas:v}))})),M=x.length;if(s){if(g.length&&!M)return t.state.dragger=null,t.moveables&&t.moveables.forEach((function(t){t.state.dragger=null})),!1;!function(t,r,e){var n=et(t,e,{isPinch:!!e.isPinch}),a=r?"Group":"";r&&(n.targets=t.props.targets),nt(t,"onRender"+a+"Start",n)}(t,c,b)}else f?function(t,r,e){var n=et(t,e,{isPinch:!!e.sPinch,isDrag:e.isDrag}),a=r?"Group":"";r&&(n.targets=t.props.targets),nt(t,"onRender"+a+"End",n)}(t,c,b):M&&function(t,r,e){var n=et(t,e,{isPinch:!!e.isPinch}),a=r?"Group":"";r&&(n.targets=t.props.targets),nt(t,"onRender"+a,n)}(t,c,b);if(f&&(t.state.dragger=null),t.isUnmounted)return!1;!s&&M&&(x.some((function(t){return t.updateRect}))&&!c?t.updateRect(a,!1,!1):t.updateRect(a,!0,!1)),(!s&&M||f&&!M)&&!o&&t.forceUpdate(),s||f||p||!M||vt(t,r,e,n,a+"After",i)}function mt(t,r,e){var n=t.controlBox.getElement(),a=[];a.push(n),t.props.dragArea||a.push(r);var i=function(r){var e=r.inputEvent.target;return e===t.areaElement||!t.isMoveableElement(e)||e.className.indexOf("moveable-area")>-1||e.className.indexOf("moveable-padding")>-1};return bt(t,a,"targetAbles",e,{dragstart:i,pinchstart:i})}function bt(t,r,e,n,a){void 0===a&&(a={});var i=t.props,o=i.pinchOutside,s=i.pinchThreshold,u={container:window,pinchThreshold:s,pinchOutside:o};return["drag","pinch"].forEach((function(r){["Start","","End"].forEach((function(i){var o=""+r+i.toLowerCase();u[o]=function(s){return!(a[o]&&!a[o](s))&&vt(t,e,r,n,i,s)}}))})),new l.A(r,u)}var xt=(0,u.A)("div",x);function Mt(t,r,e,a){var i=(0,s.Mu)(r,e),o=t?Q(i/Math.PI*180,15)%180:-1;return(0,n.createElement)("div",{key:"line"+a,className:w("line","direction",t),"data-rotation":o,"data-direction":t,style:F(r,e,i)})}var Dt=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.state={container:null,target:null,beforeMatrix:y(),matrix:y(),targetMatrix:y(),offsetMatrix:y(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},containerClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},moveableClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},rotation:0},r.targetAbles=[],r.controlAbles=[],r.isUnmounted=!1,r}d(r,t);var e=r.prototype;return e.render=function(){var t=this.props,r=this.state,e=t.edge,i=t.parentPosition,o=t.className,s=t.target,u=t.zoom;this.checkUpdate(),this.updateRenderPoses();var l=i||{left:0,top:0},f=l.left,p=l.top,c=r.left,d=r.top,h=r.target,g=r.direction,v=r.renderPoses,m=t.targets,b=(m&&m.length||s)&&h;return(0,n.createElement)(xt,{ref:(0,a.KR)(this,"controlBox"),className:w("control-box",-1===g?"reverse":"")+" "+o,style:{position:"absolute",display:b?"block":"none",transform:"translate("+(c-f)+"px, "+(d-p)+"px) translateZ(50px)","--zoom":u,"--zoompx":u+"px"}},this.renderAbles(),Mt(e?"n":"",v[0],v[1],0),Mt(e?"e":"",v[1],v[3],1),Mt(e?"w":"",v[0],v[2],2),Mt(e?"s":"",v[2],v[3],3))},e.componentDidMount=function(){this.controlBox.getElement();var t=this.props,r=t.parentMoveable,e=t.container;this.updateEvent(t),e||r||this.updateRect("End",!1,!0)},e.componentDidUpdate=function(t){this.updateEvent(t)},e.componentWillUnmount=function(){this.isUnmounted=!0,tt(this,"targetDragger"),tt(this,"controlDragger")},e.getContainer=function(){var t=this.props,r=t.parentMoveable;return t.container||r&&r.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(b)>-1},e.dragStart=function(t){return this.targetDragger&&this.targetDragger.onDragStart(t),this},e.hitTest=function(t){var r;if(t instanceof Element){var e=t.getBoundingClientRect();r={left:e.left,top:e.top,width:e.width,height:e.height}}else r=h({width:0,height:0},t);var n=this.state.targetClientRect,a=n.left,i=n.top,o=n.width,s=n.height,u=r.left,l=r.top,f=u+r.width,p=l+r.height,c=a+o,d=i+s,g=Math.max(a,u),v=Math.min(c,f),m=Math.max(i,l),b=Math.min(d,p);if(v<g||b<m)return 0;var x=(Math.min(c,f)-Math.max(u,a))*(Math.min(d,p)-Math.max(i,l));return Math.min(100,(v-g)*(b-m)/x*100)},e.isInside=function(t,r){var e=this.state,n=e.pos1,a=e.pos2,i=e.pos3,o=e.pos4,s=e.target,u=e.targetClientRect;return!!s&&function(t,r,e,n,a){var i=[rt(t,r,e),rt(t,e,n),rt(t,n,r)],o=[rt(t,e,n),rt(t,n,a),rt(t,a,e)];return!!(i.every((function(t){return t>=0}))||i.every((function(t){return t<=0}))||o.every((function(t){return t>=0}))||o.every((function(t){return t<=0})))}([t-u.left,r-u.top],n,a,i,o)},e.updateRect=function(t,r,e){void 0===e&&(e=!0);var n=this.props,a=n.parentMoveable,i=this.state,o=i.target||this.props.target,s=this.getContainer(),u=a?a.props.rootContainer:n.rootContainer;this.updateState(j(this.controlBox&&this.controlBox.getElement(),o,s,s,u||s,r?i:void 0),!a&&e)},e.updateEvent=function(t){var r=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,a=this.props,i=a.dragTarget||a.target,o=t.dragTarget||t.target,s=a.dragArea,u=t.dragArea,l=!s&&o!==i,f=!e&&this.targetDragger||l||u!==s;f&&(tt(this,"targetDragger"),this.updateState({dragger:null})),n||tt(this,"controlDragger"),i&&e&&!this.targetDragger&&(this.targetDragger=mt(this,i,"")),!this.controlDragger&&n&&(this.controlDragger=bt(this,r,"controlAbles","Control")),f&&this.unsetAbles()},e.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},e.updateTarget=function(t){this.updateRect(t,!0)},e.getRect=function(){var t=this.state,r=Z(this.state),e=r[0],n=r[1],a=r[2],i=r[3],o=W(r),u=t.width,l=t.height,f=o.width,p=o.height,c=o.left,d=o.top,h=[t.left,t.top],g=(0,s.tY)(h,t.origin);return{width:f,height:p,left:c,top:d,pos1:e,pos2:n,pos3:a,pos4:i,offsetWidth:u,offsetHeight:l,beforeOrigin:(0,s.tY)(h,t.beforeOrigin),origin:g}},e.request=function(t,r,e){void 0===r&&(r={});var n=this.props,a=n.ables,i=n.groupable,o=a.filter((function(r){return r.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=o.request(this),l=u.isControl?"controlAbles":"targetAbles",f=(i?"Group":"")+(u.isControl?"Control":""),p={request:function(t){return vt(s,l,"drag",f,"",h({},u.request(t),{isRequest:!0}),e),this},requestEnd:function(){return vt(s,l,"drag",f,"End",h({},u.requestEnd(),{isRequest:!0})),this}};return vt(s,l,"drag",f,"Start",h({},u.requestStart(r),{isRequest:!0}),e),r.isInstant?p.request(r).requestEnd():p},e.updateRenderPoses=function(){var t=this.state,r=this.props,e=t.beforeOrigin,n=t.transformOrigin,a=t.matrix,i=t.is3d,o=t.pos1,u=t.pos2,l=t.pos3,f=t.pos4,p=t.left,c=t.top,d=r.padding||{},h=d.left,g=void 0===h?0:h,v=d.top,m=void 0===v?0:v,b=d.bottom,x=void 0===b?0:b,M=d.right,D=void 0===M?0:M,S=i?4:3,E=r.groupable?e:(0,s.tY)(e,[p,c]);t.renderPoses=[(0,s.tY)(o,ht(a,[-g,-m],n,E,S)),(0,s.tY)(u,ht(a,[D,-m],n,E,S)),(0,s.tY)(l,ht(a,[-g,x],n,E,S)),(0,s.tY)(f,ht(a,[D,x],n,E,S))]},e.checkUpdate=function(){var t=this.props,r=t.target,e=t.container,n=t.parentMoveable,a=this.state,i=a.target,o=a.container;(i||r)&&(this.updateAbles(),(!ut(i,r)||!ut(o,e))&&(this.updateState({target:r,container:e}),n||!e&&!this.controlBox||this.updateRect("End",!1,!1)))},e.triggerEvent=function(t,r){var e=this.props[t];return e&&e(r)},e.unsetAbles=function(){var t=this;this.targetAbles.filter((function(r){return!!r.unset&&(r.unset(t),!0)})).length&&this.forceUpdate()},e.updateAbles=function(t,r){void 0===t&&(t=this.props.ables),void 0===r&&(r="");var e=this.props,n=e.triggerAblesSimultaneously,a=t.filter((function(t){return t&&e[t.name]})),i="drag"+r+"ControlStart",o=it(a,["drag"+r+"Start","pinch"+r+"Start"],n),s=it(a,[i],n);this.targetAbles=o,this.controlAbles=s},e.updateState=function(t,r){if(r)this.setState(t);else{var e=this.state;for(var n in t)e[n]=t[n]}},e.renderAbles=function(){var t,r,e,a,i=this,o=this.props,s=o.ables,u=o.triggerAblesSimultaneously,l=s.filter((function(t){return t&&o[t.name]})),f={createElement:n.createElement};return(t=ft(it(l,["render"],u).map((function(t){return(0,t.render)(i,f)||[]}))).filter((function(t){return t})),r=function(t){return t.key},e=[],a={},t.forEach((function(t,n){var i=r(t),o=a[i];o||(o=[],a[i]=o,e.push(o)),o.push(t)})),e).map((function(t){return t[0]}))},r.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0},r}(n.PureComponent);function St(t){return(0,s.Mu)([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Et={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchOutside:Boolean,pinchThreshold:Number},pinchStart:function(t,r){var e=r.datas,n=r.touches,a=r.targets,i=t.props,o=i.pinchable,s=i.ables;if(!o)return!1;var u="onPinch"+(a?"Group":"")+"Start",l="drag"+(a?"Group":"")+"ControlStart",f=(!0===o?t.controlAbles:s.filter((function(t){return o.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[l]})),p=et(t,r,{});a&&(p.targets=a);var c=nt(t,u,p);e.isPinch=!1!==c,e.ables=f;var d=e.isPinch;if(!d)return!1;var g=St(n);return f.forEach((function(n){if(e[n.name+"Datas"]={},n[l]){var a=h({},r,{datas:e[n.name+"Datas"],parentRotate:g,isPinch:!0});n[l](t,a)}})),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},d},pinch:function(t,r){var e=r.datas,n=r.scale,a=r.distance,i=r.touches,o=r.inputEvent,s=r.targets;if(e.isPinch){var u=St(i),l=a*(1-1/n),f=et(t,r,{});s&&(f.targets=s),nt(t,"onPinch"+(s?"Group":""),f);var p=e.ables,c="drag"+(s?"Group":"")+"Control";return p.forEach((function(n){n[c]&&n[c](t,h({},r,{datas:e[n.name+"Datas"],inputEvent:o,parentDistance:l,parentRotate:u,isPinch:!0}))})),f}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.targets;if(e.isPinch){var o="onPinch"+(i?"Group":"")+"End",s=et(t,r,{isDrag:n});i&&(s.targets=i),nt(t,o,s);var u=e.ables,l="drag"+(i?"Group":"")+"ControlEnd";return u.forEach((function(i){i[l]&&i[l](t,h({},r,{isDrag:n,datas:e[i.name+"Datas"],inputEvent:a,isPinch:!0}))})),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,h({},r,{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,h({},r,{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,h({},r,{targets:t.props.targets}))}};function Rt(t,r,e,n,a){var i=t.dragger.move(r,e),o=i.originalDatas||i.datas,s=o.draggable||(o.draggable={});return h({},a?dt(t,i):i,{isDrag:!0,isPinch:!!n,parentEvent:!0,datas:s})}var zt=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var r=t.prototype;return r.dragStart=function(t,r){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},h({},this.move(t,r),{type:"dragstart"})},r.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},r.move=function(t,r){var e,n;return this.isFlag?(e=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],n=t[1],this.isFlag=!0),this.prevX=e,this.prevY=n,{type:"drag",clientX:e,clientY:n,inputEvent:r,isDrag:this.isDrag,distX:e-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Bt(t,r,e,n,a,i){var o=!!e.match(/Start$/g),s=!!e.match(/End$/g),u=a.inputEvent,l=a.isPinch,f=a.datas,p=t.moveables.map((function(t,a){var p={};o?p=(new zt).dragStart(n,u):(t.state.dragger||(t.state.dragger=f.childDraggers[a]),p=Rt(t.state,n,u,l,i));var c=r[e](t,h({},p,{parentFlag:!0}));return s&&(t.state.dragger=null),c}));return o&&(f.childDraggers=t.moveables.map((function(t){return t.state.dragger}))),p}function Ct(t,r,e,n,a,i){var s=r.name,u=n[s]||(n[s]=[]),l=!!e.match(/End$/g);return t.moveables.map((function(t,n){var s=u[n]||(u[n]={}),f=(0,o.Tn)(a)?a(t,s):a,p=r[e](t,h({},f,{datas:s,parentFlag:!0}));return p&&i&&i(t,s,p,n),l&&(t.state.dragger=null),p}))}function wt(t,r){var e=r.datas,n=t.state,a=n.matrix,i=n.beforeMatrix,o=n.is3d,u=n.left,l=n.top,f=n.origin,p=n.offsetMatrix,c=n.targetMatrix,d=n.transformOrigin,h=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=c,e.beforeMatrix=i,e.offsetMatrix=p,e.transformOrigin=d,e.inverseMatrix=(0,s.B8)(a,h),e.inverseBeforeMatrix=(0,s.B8)(i,h),e.absoluteOrigin=(0,s.ez)((0,s.tY)([u,l],f),h),e.startDragBeforeDist=(0,s.Dt)(e.inverseBeforeMatrix,e.absoluteOrigin,h),e.startDragDist=(0,s.Dt)(e.inverseMatrix,e.absoluteOrigin,h)}function yt(t,r){var e=t.datas,n=t.distX,a=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,u=e.is3d,l=e.startDragBeforeDist,f=e.startDragDist,p=e.absoluteOrigin,c=u?4:3;return(0,s.Rd)((0,s.Dt)(r?i:o,(0,s.tY)(p,[n,a]),c),r?l:f)}function Gt(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function Pt(t,r){return Gt(r).map((function(r){return t[r]}))}function Ot(t,r){var e=Pt(t,r);return[s.G8.apply(void 0,e.map((function(t){return t[0]}))),s.G8.apply(void 0,e.map((function(t){return t[1]})))]}function Yt(t,r){var e=t[0],n=t[1],a=t[2];return Ot([t[3],a,n,e],r)}function It(t,r,e,n,a,i){var o=Yt(q(r,e,n,a),i);return[t[0]-o[0],t[1]-o[1]]}function kt(t,r,e,n){return(0,s.lw)(t,G(r,n,e),n)}function At(t,r){var e=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,o=a?4:3;return kt(n,(0,s.lw)(i,(0,s.kb)(r,o),o),e,o)}function Tt(t,r){return function(t,r){return Yt([t[0],t[1],t[2],t[3]],r)}(Z(t.state),r)}function qt(t){return t.isRequest?t.parentDirection:(0,o.nB)(t.inputEvent.target,w("direction"))}function Wt(t,r,e,n,a,i){var o=a[0],s=a[1],u=i[0],l=i[1],f=[],p=n?0:1,c="vertical"===r?"horizontal":"vertical",d=lt(t.filter((function(t){return t.type===r})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var r=t.pos,e=t.sizes;return r[p]<=l&&u<=r[p]+e[p]}));return d.forEach((function(t){var r=t.pos[n],a=r+t.sizes[n];d.forEach((function(t){var i=t.pos,u=t.sizes,l=t.element,p=i[n],h=p+u[n],g=0,v=0,m=!0;if(a<=p)o<(g=h-(v=a-p))-e&&(m=!1);else{if(!(h<=r))return;s>(g=p-(v=r-h))+e&&(m=!1)}if(m&&f.push({pos:"vertical"===c?[g,i[1]]:[i[0],g],element:l,sizes:u,size:0,type:c,gap:v,gapGuidelines:d}),a<=o&&s<=p){var b=(p+a-(s-o))/2;Q(o-(b-e),.1)>=0&&f.push({pos:"vertical"===c?[b,i[1]]:[i[0],b],element:l,sizes:u,size:0,type:c,gap:a-o,gapGuidelines:d})}}))})),f}function Ht(t,r,e,n,a){var i=function(t){var r=t.state,e=r.guidelines,n=r.containerClientRect,a=n.scrollHeight,i=n.scrollWidth,o=t.props,s=o.snapHorizontal,u=void 0===s||s,l=o.snapVertical,f=void 0===l||l,p=o.snapGap,c=void 0===p||p,d=o.verticalGuidelines,h=o.horizontalGuidelines,g=o.snapThreshold,v=void 0===g?5:g,m=e.slice();if(c){var b=W(Z(t.state)),x=b.top,M=b.left,D=b.bottom,S=b.right,E=e.filter((function(t){return t.element}));m.push.apply(m,Wt(E,"horizontal",v,0,[M,S],[x,D]).concat(Wt(E,"vertical",v,1,[x,D],[M,S])))}return u&&h&&h.forEach((function(t){m.push({type:"horizontal",pos:[0,Q(t,.1)],size:i})})),f&&d&&d.forEach((function(t){m.push({type:"vertical",pos:[Q(t,.1),0],size:a})})),m}(t),s=t.props,u=s.snapElement,l=void 0===u||u,f=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var a=t[n];if(!(0,o.b0)(a))return a}return t[e]}(a,s.snapThreshold,5);return{vertical:Nt(i,"vertical",r,f,n,l),horizontal:Nt(i,"horizontal",e,f,n,l)}}function Xt(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:r,offset:a,dist:i,pos:e.pos,guideline:o}}function Nt(t,r,e,n,a,i){if(!t||!t.length)return{isSnap:!1,posInfos:[]};var o="vertical"===r?0:1,s=e.map((function(e){var s=t.map((function(t){var r=t.pos,n=e-r[o];return{offset:n,dist:Math.abs(n),guideline:t}})).filter((function(t){var e=t.guideline,o=t.dist,s=e.type,u=e.center,l=e.element;return!(!i&&l||!a&&u||s!==r||o>n)})).sort((function(t,r){return t.dist-r.dist}));return{pos:e,guidelineInfos:s}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,r){return t.guidelineInfos[0].dist-r.guidelineInfos[0].dist}));return{isSnap:s.length>0,posInfos:s}}function Ft(t,r){return t.slice().sort((function(t,e){var n=t.sign[r],a=e.sign[r],i=t.offset[r],o=e.offset[r],s=Math.abs(i),u=Math.abs(o);return n?a?t.isBound&&e.isBound?u-s:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?s-u:t.isSnap?-1:e.isSnap||s<D?1:u<D?-1:s-u:-1:1}))[0]}function Lt(t,r){var e=(0,s.G8)(r[0][0],r[1][0]),n=(0,s.G8)(r[0][1],r[1][1]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function _t(t,r){var e,n,a=r[0],i=r[1],o=i[0]-a[0],s=i[1]-a[1];return Math.abs(o)<D&&(o=0),Math.abs(s)<D&&(s=0),o?s?(e=s/o*(t[0]-a[0])+a[1],n=t[1]):(e=a[1],n=t[1]):(e=a[0],n=t[0]),e-n}function Vt(t,r,e){void 0===e&&(e=D);var n=_t(t[0],r)<=0;return t.slice(1).every((function(t){var a=_t(t,r);return a<=0===n||Math.abs(a)<=e}))}function jt(t,r,e,n,a){return void 0===a&&(a=0),n&&r-a<=t||!n&&t<=e+a?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function Ut(t,r,e,n){var a=t[0],i=t[1],o=r[0],s=r[1],u=i[1]-a[1],l=i[0]-a[0],f=s[1]-o[1];if(s[0]-o[0]){if(!f&&u){var p=u/l;return jt(l?(o[1]-a[1])/p+a[0]:a[0],o[0],s[0],e,n)}}else if(l)return jt(u?u/l*(o[0]-a[0])+a[1]:a[1],o[1],s[1],e,n);return{isBound:!1,offset:0}}function $t(t,r,e,n){return r.map((function(r){var a=r[0],i=r[1],o=r[2],s=function(t,r,e){var n=t.props.innerBounds;if(!n)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=n.left,i=n.top,o=n.width,s=n.height,u=[[a,i],[a,i+s]],l=[[a,i],[a+o,i]],f=[[a+o,i],[a+o,i+s]],p=[[a,i+s],[a+o,i+s]],c=Lt(e,r),d=c.horizontal,h=c.vertical;if(Vt([e,[a,i],[a+o,i],[a,i+s],[a+o,i+s]],r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ut(r,l,h),v=Ut(r,p,h),m=Ut(r,u,d),b=Ut(r,f,d),x=g.isBound&&v.isBound,M=g.isBound||v.isBound,D=m.isBound&&b.isBound,S=m.isBound||b.isBound,E=pt(g.offset,v.offset),R=pt(m.offset,b.offset),z=[0,0],B=!1,C=!1;return Math.abs(R)<Math.abs(E)?(z=[E,0],B=M,C=x):(z=[0,R],B=S,C=D),{isAllBound:C,isVerticalBound:M,isHorizontalBound:S,isBound:B,offset:z}}(t,[i,o],e),u=s.isBound,l=s.offset,f=s.isVerticalBound,p=s.isHorizontalBound,c=yt({datas:n,distX:l[0],distY:l[1]}).map((function(t,r){return t*(a[r]?2/a[r]:0)}));return{sign:a,isBound:u,isVerticalBound:f,isHorizontalBound:p,isSnap:!1,offset:c}}))}function Kt(t,r,e){return function(t,r){var e=[],n=t[0],a=t[1];return n&&a?e.push([[0,2*a],t,[-n,a]],[[2*n,0],t,[n,-a]]):n?(e.push([[2*n,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,2*a],[1,a],[-1,a]]),r&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}(r,e).map((function(r){var e=r[0],n=r[1],a=r[2];return[e,Ot(t,n),Ot(t,a)]}))}function Zt(t,r,e,n){var a=n?t.map((function(t){return(0,s.e$)(t,n)})):t,i=[e].concat(r);return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some((function(t,r){return!Vt(i,t)}))}function Qt(t,r,e){var n=t.props.bounds||{},a=n.left,i=void 0===a?-1/0:a,o=n.top,s=void 0===o?-1/0:o,u=n.right,l=void 0===u?1/0:u,f=n.bottom,p={left:i,top:s,right:l,bottom:void 0===f?1/0:f};return{vertical:Jt(p,r,!0),horizontal:Jt(p,e,!1)}}function Jt(t,r,e){var n=t[e?"left":"top"],a=t[e?"right":"bottom"],i=Math.min.apply(Math,r),o=Math.max.apply(Math,r);return n+1>i?{isBound:!0,offset:i-n,pos:n}:a-1<o?{isBound:!0,offset:o-a,pos:a}:{isBound:!1,offset:0,pos:0}}function tr(t,r,e){return(e?t.map((function(t){return(0,s.e$)(t,e)})):t).some((function(t){return t[0]<r.left&&Math.abs(t[0]-r.left)>.1||t[0]>r.right&&Math.abs(t[0]-r.right)>.1||t[1]<r.top&&Math.abs(t[1]-r.top)>.1||t[1]>r.bottom&&Math.abs(t[1]-r.bottom)>.1}))}function rr(t,r,e){var n=T(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function er(t){var r=t.state;if(!r.guidelines||!r.guidelines.length){var e=t.props,n=e.horizontalGuidelines,a=void 0===n?[]:n,i=e.verticalGuidelines,o=void 0===i?[]:i,u=e.elementGuidelines,l=void 0===u?[]:u,f=e.bounds,p=e.snapCenter;if(f||a.length||o.length||l.length){var c=r.containerClientRect,d=r.targetClientRect,h=d.top,g=d.left,v=r.rootMatrix,m=r.is3d?4:3,b=rr(v,c,m),x=b[0],M=b[1],D=Z(r),S=Math.min.apply(Math,D.map((function(t){return t[0]}))),E=Math.min.apply(Math,D.map((function(t){return t[1]}))),R=(0,s.Rd)([S,E],ct(v,[g-x,h-M],m)).map((function(t){return r=t,Math.round(r%1==-.5?r-1:r);var r})),z=R[0],B=R[1],C=[];l.forEach((function(t){var r=t.getBoundingClientRect(),e=r.left-x,n=r.top-M,a=n+r.height,i=e+r.width,o=ct(v,[e,n],m),s=o[0],u=o[1],l=ct(v,[i,a],m),f=l[0],c=l[1],d=f-s,h=c-u,g=[d,h];C.push({type:"vertical",element:t,pos:[Q(s+z,.1),u],size:h,sizes:g}),C.push({type:"vertical",element:t,pos:[Q(f+z,.1),u],size:h,sizes:g}),C.push({type:"horizontal",element:t,pos:[s,Q(u+B,.1)],size:d,sizes:g}),C.push({type:"horizontal",element:t,pos:[s,Q(c+B,.1)],size:d,sizes:g}),p&&(C.push({type:"vertical",element:t,pos:[Q((s+f)/2+z,.1),u],size:h,sizes:g,center:!0}),C.push({type:"horizontal",element:t,pos:[s,Q((u+c)/2+B,.1)],size:d,sizes:g,center:!0}))})),r.guidelines=C,r.enableSnap=!0}}}function nr(t,r){var e=t.props,n=e.snappable,a=e.bounds,i=e.verticalGuidelines,o=e.horizontalGuidelines,s=t.state,u=s.guidelines,l=s.enableSnap;return!(!n||!l||r&&!0!==n&&n.indexOf(r)<0||!(a||u&&u.length||i&&i.length||o&&o.length))}function ar(t,r,e,n,a){var i=function(t,r,e,n){var a=r[0]-t[0],i=r[1]-t[1];if(Math.abs(a)<D&&(a=0),Math.abs(i)<D&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=t[1]-o*t[0];return n?[e,o*(r[0]+e)+s-r[1]]:[(r[1]+e-s)/o-r[0],e]}(t,r,e,n);if(!i)return[0,0];var o=yt({datas:a,distX:i[0],distY:i[1]});return[o[0],o[1]]}function ir(t,r,e,n,a,i){var o=q(t,r,e,i?4:3),u=Yt(o,a);return K(o,(0,s.Rd)(n,u))}function or(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function sr(t,r){return t.isBound?t.offset:r.isSnap?Xt(r).offset:0}function ur(t,r,e,n){void 0===n&&(n=e);var a=Qt(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]}))),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Ht(t,e.map((function(t){return t[0]})),e.map((function(t){return t[1]}))),u=s.horizontal,l=s.vertical,f=sr(i,u),p=sr(o,l),c=Math.abs(f),d=Math.abs(p);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:f,dist:c},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:p,dist:d}}}function lr(t){return t?t/Math.abs(t):0}function fr(t,r,e,n,a,i){var o=function(t,r){var e=[],n=[-t[0],-t[1]];return t[0]&&t[1]?(e.push([n,[t[0],-t[1]]],[n,[-t[0],t[1]]]),r&&e.push([n,t])):t[0]?r?e.push([n,[n[0],-1]],[n,[n[0],1]],[n,[t[0],-1]],[n,t],[n,[t[0],1]]):e.push([[n[0],-1],[t[0],-1]],[[n[0],0],[t[0],0]],[[n[0],1],[t[0],1]]):t[1]?r?e.push([n,[-1,n[1]]],[n,[1,n[1]]],[n,[-1,t[1]]],[n,[1,t[1]]],[n,t]):e.push([[-1,n[1]],[-1,t[1]]],[[0,n[1]],[0,t[1]]],[[1,n[1]],[1,t[1]]]):e.push([n,[1,0]],[n,[-1,0]],[n,[0,-1]],[n,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),e}(e,n),u=Kt(r,e,n),l=function(t,r,e,n,a,i){return e.map((function(e){var o=e[0],u=e[1],l=Ot(r,o),f=Ot(r,u),p=n?function(t,r,e,n){var a=function(t,r,e){var n=t.props.bounds||{},a=n.left,i=void 0===a?-1/0:a,o=n.top,u=void 0===o?-1/0:o,l=n.right,f=void 0===l?1/0:l,p=n.bottom,c=void 0===p?1/0:p,d=e[0],h=e[1],g=(0,s.Rd)(e,r),v=g[0],m=g[1];Math.abs(v)<D&&(v=0),Math.abs(m)<D&&(m=0);var b=m>0,x=v>0,M={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(0===v&&0===m)return{vertical:M,horizontal:S};if(0===v)b?c<h&&(S.pos=c,S.offset=h-c):u>h&&(S.pos=u,S.offset=h-u);else if(0===m)x?f<d&&(M.pos=f,M.offset=d-f):i>d&&(M.pos=i,M.offset=d-i);else{var E=m/v,R=e[1]-E*d,z=0,B=0,C=!1;x&&f<=d?(z=E*f+R,B=f,C=!0):!x&&d<=i&&(z=E*i+R,B=i,C=!0),C&&(z<u||z>c)&&(C=!1),C||(b&&c<=h?(B=((z=c)-R)/E,C=!0):!b&&h<=u&&(B=((z=u)-R)/E,C=!0)),C&&(M.isBound=!0,M.pos=B,M.offset=d-B,S.isBound=!0,S.pos=z,S.offset=h-z)}return{vertical:M,horizontal:S}}(t,r,e),i=a.horizontal,o=a.vertical,u=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,r,e){var n=e[0],a=e[1],i=r[0],o=r[1],u=(0,s.Rd)(e,r),l=u[0],f=u[1],p=f>0,c=l>0;l=Math.abs(l)<=D?0:l,f=Math.abs(f)<=D?0:f;var d={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(0===l&&0===f)return{vertical:d,horizontal:h};var g=Ht(t,l?[n]:[],f?[a]:[]),v=g.vertical,m=g.horizontal;v.posInfos.filter((function(t){var r=t.pos;return c?r>=i:r<=i})),m.posInfos.filter((function(t){var r=t.pos;return p?r>=o:r<=o})),v.isSnap=v.posInfos.length>0,m.isSnap=m.posInfos.length>0;var b=Xt(v),x=b.isSnap,M=b.guideline,S=Xt(m),E=S.isSnap,R=S.guideline,z=E?R.pos[1]:0,B=x?M.pos[0]:0;if(0===l)E&&(h.isSnap=!0,h.pos=R.pos[1],h.offset=a-h.pos);else if(0===f)x&&(d.isSnap=!0,d.pos=B,d.offset=n-B);else{var C=f/l,w=e[1]-C*n,y=0,G=0,P=!1;x?(y=C*(G=B)+w,P=!0):E&&(G=((y=z)-w)/C,P=!0),P&&(d.isSnap=!0,d.pos=G,d.offset=n-G,h.isSnap=!0,h.pos=y,h.offset=a-y)}return{vertical:d,horizontal:h}}(t,r,e),l=u.horizontal,f=u.vertical,p=or(i,l),c=or(o,f),d=Math.abs(p),h=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:p,dist:d},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:c,dist:h}}}(t,l,f,a):ur(t,a,[f]),c=p.horizontal,d=c.dist,h=c.offset,g=c.isBound,v=c.isSnap,m=p.vertical,b=m.dist,x=m.offset,M=m.isBound,S=m.isSnap,E=(0,s.Rd)(u,o);if(!x&&!h)return{isBound:M||g,isSnap:S||v,sign:E,offset:[0,0]};var R=d<b,z=ar(l,f,-(R?x:h),R,i).map((function(t,r){return t*(E[r]?2/E[r]:0)}));return{sign:E,isBound:R?M:g,isSnap:R?S:v,offset:z}}))}(t,r,o,n,a,i).concat($t(t,u,Ot(r,[0,0]),i)),f=Ft(l,0),p=Ft(l,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}function pr(t,r,e,n,a,i,o,u){for(var l=Z(t.state),f=t.props.keepRatio,p=0,c=0,d=0;d<2;++d){var h=fr(t,r(p,c),a,f,o,u),g=h.width,v=h.height,m=g.isBound,b=v.isBound,x=g.offset,M=v.offset;if(1===d&&(m||(x=0),b||(M=0)),0===d&&o&&!m&&!b)return[0,0];if(f){var D=Math.abs(x)*(e?1/e:1),S=Math.abs(M)*(n?1/n:1);(m&&b?D<S:b||!m&&D<S)?x=e*M/n:M=n*x/e}p+=x,c+=M}if(a[0]&&a[1]){var E=function(t,r,e,n,a){var i=[-e[0],-e[1]],o=t.state,u=o.width,l=o.height,f=t.props.bounds,p=1/0,c=1/0;if(f){var d=[[e[0],-e[1]],[-e[0],e[1]]],h=f.left,g=void 0===h?-1/0:h,v=f.top,m=void 0===v?-1/0:v,b=f.right,x=void 0===b?1/0:b,M=f.bottom,D=void 0===M?1/0:M;d.forEach((function(t){var e=t[0]!==i[0],o=t[1]!==i[1],f=Ot(r,t),d=lr(t[1]-i[1]),h=lr(t[0]-i[0]),v=360*(0,s.Mu)(n,f)/Math.PI;if(o){var b=f.slice();(Math.abs(v-360)<2||Math.abs(v-180)<2)&&(b[1]=n[1]);var M=ar(n,b,(n[1]<f[1]?D:m)-f[1],!1,a)[1];isNaN(M)||(c=l+d*M)}if(e){b=f.slice(),(Math.abs(v-90)<2||Math.abs(v-270)<2)&&(b[0]=n[0]);var S=ar(n,b,(n[0]<f[0]?x:g)-f[0],!0,a)[0];isNaN(S)||(p=u+h*S)}}))}return{maxWidth:p,maxHeight:c}}(t,l,a,i,u),R=E.maxWidth,z=E.maxHeight,B=function(t,r,e,n,a,i,o,s,u){var l=ur(t,s,[Ot(r,o)]),f=l.horizontal.offset,p=l.vertical.offset;if(p||f){var c=yt({datas:u,distX:-p,distY:-f}),d=c[0],h=c[1];return[Math.min(a||1/0,e+o[0]*d)-e,Math.min(i||1/0,n+o[1]*h)-n]}return[0,0]}(t,r(p,c),e+p,n+c,R,z,a,o,u);p+=x=B[0],c+=M=B[1]}return[p,c]}function cr(t,r,e,n){if(!nr(t,"rotatable"))return n;var a=r.pos1,i=r.pos2,o=r.pos3,u=r.pos4,l=n*Math.PI/180,f=[a,i,o,u].map((function(t){return(0,s.Rd)(t,e)})),p=f.map((function(t){return(0,s.e$)(t,l)})),c=function(t,r,e,n,a){var i=t.props.bounds,o=a*Math.PI/180;if(!i)return[];var u=i.left,l=void 0===u?-1/0:u,f=i.top,p=void 0===f?-1/0:f,c=i.right,d=void 0===c?1/0:c,h=i.bottom,g=void 0===h?1/0:h,v=l-n[0],m=d-n[0],b=p-n[1],x=g-n[1],M={left:v,top:b,right:m,bottom:x};if(!tr(e,M,0))return[];var S=[];return[[v,0],[m,0],[b,1],[x,1]].forEach((function(t,n){var a=t[0],i=t[1];e.forEach((function(t){var e=(0,s.Mu)([0,0],t);S.push.apply(S,function(t,r,e){var n=N(t),a=Math.sqrt(n*n-r*r)||0;return[a,-a].sort((function(r,n){return Math.abs(r-t[e?0:1])-Math.abs(n-t[e?0:1])})).map((function(t){return(0,s.Mu)([0,0],e?[t,r]:[r,t])}))}(t,a,i).map((function(t){return o+t-e})).filter((function(t){return!tr(r,M,t)})).map((function(t){return Q(180*t/Math.PI,D)})))}))})),S}(t,f,p,e,n).concat(function(t,r,e,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var u=i.left,l=i.top,f=i.width,p=i.height,c=u-n[0],d=u+f-n[0],h=l-n[1],g=l+p-n[1],v=[[c,h],[d,h],[c,g],[d,g]],m=Ot(e,[0,0]);if(!Zt(e,v,m,0))return[];var b=[],x=v.map((function(t){return[N(t),(0,s.Mu)([0,0],t)]}));return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach((function(t){var e=(0,s.Mu)([0,0],function(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return[r[0],0];if(!a)return[0,r[1]];var i=a/n,o=-i*r[0]+r[1];return[-o/(i+1/i),o/(i*i+1)]}(t)),n=function(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return Math.abs(r[0]);if(!a)return Math.abs(r[1]);var i=a/n;return Math.abs((-i*r[0]+r[1])/Math.sqrt(Math.pow(i,2)+1))}(t);b.push.apply(b,x.filter((function(t){var r=t[0];return r&&n<=r})).map((function(t){var r=t[0],a=t[1],i=Math.acos(r?n/r:0);return[o+(a+i)-e,o+(a-i)-e]})).reduce((function(t,r){return t.push.apply(t,r),t}),[]).filter((function(t){return!Zt(r,v,m,t)})).map((function(t){return Q(180*t/Math.PI,D)})))})),b}(t,f,p,e,n));return c.sort((function(t,r){return Math.abs(t-n)-Math.abs(r-n)})),c.length?c[0]:n}function dr(t,r,e,n,a,i){if(!nr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=K(i.absolutePoses,[r,e]),u=W(o),l=u.left,f=u.right,p=u.top,c=u.bottom,d=[[l,p],[f,p],[l,c],[f,c]];t.props.snapCenter&&d.push([(l+f)/2,(p+c)/2]);var h=ur(t,a,d,o),g=h.vertical,v=h.horizontal,m=function(t,r,e){var n,a=Kt(r,[0,0],!1).map((function(t){var r=t[0],e=t[1],n=t[2];return[r.map((function(t){return 2*Math.abs(t)})),e,n]})),i=$t(t,a,Ot(r,[0,0]),e),o=Ft(i,0),u=Ft(i,1),l=0,f=0,p=o.isVerticalBound||u.isVerticalBound,c=o.isHorizontalBound||u.isHorizontalBound;return(p||c)&&(n=function(t){var r=t.datas,e=t.distX,n=t.distY,a=(r.beforeMatrix,r.matrix),i=r.is3d,o=(r.startDragBeforeDist,r.startDragDist),u=r.absoluteOrigin,l=i?4:3;return(0,s.Rd)((0,s.Dt)(a,(0,s.tY)(o,[e,n]),l),u)}({datas:e,distX:-o.offset[0],distY:-u.offset[1]}),l=n[0],f=n[1]),{vertical:{isBound:p,offset:l},horizontal:{isBound:c,offset:f}}}(t,o,i),b=m.vertical,x=m.horizontal,M=g.isSnap,S=v.isSnap,E=g.isBound||b.isBound,R=v.isBound||x.isBound,z=function(t,r,e,n,a){var i=r[0],o=r[1],u=e[0],l=e[1],f=n[0],p=n[1],c=a[0],d=a[1],h=-c,g=-d;if(t&&i&&o){h=0,g=0;var v=[];if(u&&l?v.push([0,d],[c,0]):u?v.push([c,0]):l?v.push([0,d]):f&&p?v.push([0,d],[c,0]):f?v.push([c,0]):p&&v.push([0,d]),v.length){v.sort((function(t,r){return N((0,s.Rd)([i,o],t))-N((0,s.Rd)([i,o],r))}));var m=v[0];if(m[0]&&Math.abs(i)>D)h=-m[0],g=o*Math.abs(i+h)/Math.abs(i)-o;else if(m[1]&&Math.abs(o)>D){var b=o;g=-m[1],h=i*Math.abs(o+g)/Math.abs(b)-i}if(t&&l&&u)if(Math.abs(h)>D&&Math.abs(h)<Math.abs(c))h*=x=Math.abs(c)/Math.abs(h),g*=x;else if(Math.abs(g)>D&&Math.abs(g)<Math.abs(d)){var x;h*=x=Math.abs(d)/Math.abs(g),g*=x}else h=pt(-c,h),g=pt(-d,g)}}else h=i||u?-c:0,g=o||l?-d:0;return[h,g]}(n,[r,e],[E,R],[M,S],[pt(g.offset,b.offset),pt(v.offset,x.offset)]);return[{isBound:E,isSnap:M,offset:z[0]},{isBound:R,isSnap:S,offset:z[1]}]}function hr(t){var r=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var e=t.guideline;r.indexOf(e)>-1||r.push(e)}))})),r}function gr(t,r,e,n){var a=t-e,i=a<0?a+r:n;return{size:(a<0?0:a)-i,pos:i}}function vr(t,r,e,n){var a=[],i=lt(t.filter((function(t){var r=t.element,e=t.gap;return r&&!e})),(function(t){var e=t.element,i=t.pos,s=i[n],u=(Math.min(0,s-r)<0?-1:1)+"_"+i[n?0:1],l=(0,o.I6)(a,(function(t){var r=t[0],n=t[1];return e===r&&s===n}));return l?l[2]:(a.push([e,s,u]),u)}));return i.forEach((function(t){t.sort((function(t,a){return gr(t.pos[n],t.size,r,e).size-gr(a.pos[n],t.size,r,e).size||t.pos[n?0:1]-a.pos[n?0:1]}))})),i}function mr(t,r,e,n,a,i,o,s,u,l,f,p){var c=r[0],d=r[1],h=r[2],g=r[3];return ft(t.map((function(t,r){var v=!0;return t.map((function(t,m){var b,x=t.pos,M=t.size,D=gr(x[l],M,n,a),S=D.pos,E=D.size;if(E<o)return null;var R=v;v=!1;var z=s&&R?parseFloat(E.toFixed(u)):0;return p.createElement("div",{className:w("line",c,"guideline","dashed"),"data-size":z>0?f(z):"",key:c+"LinkGuidline"+r+"-"+m,style:(b={},b[d]=e+S+"px",b[h]=-i+x[l?0:1]+"px",b[g]=E+"px",b)})}))})))}function br(t,r,e,n,a,i){var o=r[0],s=r[1],u=r[2],l=r[3];return t.map((function(t,r){var f;return i.createElement("div",{className:w("line",o,"guideline","target","bold"),key:o+"TargetGuidline"+r,style:(f={},f[s]=e+"px",f[u]=-n+t+"px",f[l]=a+"px",f)})}))}function xr(t,r,e,n,a,i){var o=r[0],s=r[1],u=r[2],l=r[3];return t.map((function(t,r){var f,p=t.pos,c=t.size,d=t.element;return i.createElement("div",{className:w("line",o,"guideline",d?"bold":""),key:o+"Guidline"+r,style:(f={},f[s]=-e+p[a]+"px",f[u]=-n+p[a?0:1]+"px",f[l]=c+"px",f)})}))}function Mr(t,r,e,n){var a=t.filter((function(t){var e=t.element,n=t.gap,a=t.type;return e&&n&&a===r})),i="vertical"===r?[0,1]:[1,0],o=i[0],s=i[1];return ft(a.map((function(t,r){var a=t.pos,i=t.gap,u=t.gapGuidelines,l=t.sizes,f=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort((function(t,r){return Math.abs(t)-Math.abs(r)})),t[0]}(a[s]+l[s]-e[s],a[s]-e[s]-n[s]),p=Math.min(l[s],n[s]);f>0&&f>p?f=2*(f-p/2):f<0&&f<-p&&(f=2*(f+p/2));var c=(f>0?0:n[s])+f/2;return function(t,r,e,n,a,i,o){var s=Math.abs(i),u=a[r]+(i>0?n[0]:0);return t.filter((function(t){return t.pos[r]<=e[r]})).sort((function(t,e){var n=t.pos;return e.pos[r]-n[r]})).filter((function(t){var e=t.pos,n=t.sizes,a=e[r];return Q(a+n[r],1e-4)===Q(u-s,1e-4)&&(u=a,!0)})).map((function(t){var n=-e[r]+t.pos[r]+t.sizes[r];return h({},t,{gap:i,renderPos:r?[o,n]:[n,o]})}))}(u,o,e,n,a,i,c).concat(function(t,r,e,n,a,i,o){var s=Math.abs(i),u=a[r]+(i<0?n[r]:0);return t.filter((function(t){return t.pos[r]>e[r]})).sort((function(t,e){var n=t.pos,a=e.pos;return n[r]-a[r]})).filter((function(t){var e=t.pos,n=t.sizes,a=e[r];return Q(a,1e-4)===Q(u+s,1e-4)&&(u=a+n[r],!0)})).map((function(t){var n=-e[r]+t.pos[r]-s;return h({},t,{gap:i,renderPos:r?[o,n]:[n,o]})}))}(u,o,e,n,a,i,c))})))}function Dr(t,r,e,n,a,i){var o=n[0],s=n[1],u=n[2],l=n[3],f=t.props,p=f.snapDigit,c=void 0===p?0:p,d=f.isDisplaySnapDigit,h=void 0===d||d,g="vertical"===e?"horizontal":"vertical",v="vertical"===e?[0,1]:[1,0],m=v[0],b=v[1];return r.map((function(t,r){var e,n=t.renderPos,f=t.gap,p=Math.abs(f),d=h?parseFloat(p.toFixed(c)):0;return i.createElement("div",{className:w("line",o,"guideline","gap"),"data-size":d>0?a(d):"",key:g+"GapGuideline"+r,style:(e={},e[s]=n[m]+"px",e[u]=n[b]+"px",e[l]=p+"px",e)})}))}var Sr={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,r){var e=t.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo,f=e.targetClientRect,p=e.containerClientRect,c=e.is3d,d=e.rootMatrix;if(!l||!nr(t,""))return[];var h=c?4:3,g=Math.min(i[0],o[0],s[0],u[0]),v=Math.min(i[1],o[1],s[1],u[1]),m=rr(d,p,h),b=ct(d,[f.left-m[0],f.top-m[1]],h),x=b[0],M=b[1],D=t.props,S=D.snapThreshold,E=void 0===S?5:S,R=D.snapDigit,z=void 0===R?0:R,B=D.isDisplaySnapDigit,C=void 0===B||B,w=D.snapDistFormat,y=void 0===w?function(t){return t}:w,G=Z(t.state),P=W(G),O=P.width,Y=P.height,I=P.top,k=P.left,A=P.bottom,T=P.right,q=[],H=[],X=[],N=[],F=[];if(!l.request){if(l.direction&&F.push(function(t,r,e){var n=[];if(e[0]&&e[1])n=[e,[-e[0],e[1]],[e[0],-e[1]]].map((function(t){return Ot(r,t)}));else if(e[0]||e[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],e].map((function(t){return Ot(r,t)})):(n=Pt(r,e)).length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var a=[r[0],r[1],r[3],r[2],r[0]],i=0;i<4;++i)n.push(a[i]),n.push([(a[i][0]+a[i+1][0])/2,(a[i][1]+a[i+1][1])/2]);return Ht(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]})),!0,1)}(t,G,l.direction)),l.snap){var L=W(G);l.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),F.push(function(t,r){var e=t.props.snapCenter&&!0,n=["left","right"],a=["top","bottom"];return e&&(n.push("center"),a.push("middle")),n=n.filter((function(t){return t in r})),a=a.filter((function(t){return t in r})),Ht(t,n.map((function(t){return r[t]})),a.map((function(t){return r[t]})),e,1)}(t,L))}F.forEach((function(t){var r=t.vertical.posInfos,e=t.horizontal.posInfos;q.push.apply(q,r.map((function(t){return t.pos}))),H.push.apply(H,e.map((function(t){return t.pos}))),X.push.apply(X,hr(r)),N.push.apply(N,hr(e))}))}!function(t,r,e,n,a){var i=Qt(t,r,e),o=i.vertical,s=o.isBound,u=o.pos,l=i.horizontal,f=l.isBound,p=l.pos;s&&n.indexOf(u)<0&&n.push(u),f&&a.indexOf(p)<0&&a.push(p);var c=function(t){var r=t.props.innerBounds;if(!r)return{vertical:[],horizontal:[]};var e=t.getRect(),n=e.pos1,a=e.pos2,i=e.pos3,o=e.pos4,s=Ot([n,a,i,o],[0,0]),u=r.left,l=r.top,f=r.width,p=r.height,c=[[u,l],[u,l+p]],d=[[u,l],[u+f,l]],h=[[u+f,l],[u+f,l+p]],g=[[u,l+p],[u+f,l+p]],v=[],m=[],b={top:!1,bottom:!1,left:!1,right:!1};return[[n,a],[a,o],[o,i],[i,n]].forEach((function(t){var r=Lt(s,t),e=r.horizontal,n=r.vertical,a=Ut(t,d,n,1),i=Ut(t,g,n,1),o=Ut(t,c,e,1),x=Ut(t,h,e,1);a.isBound&&!b.top&&(v.push(l),b.top=!0),i.isBound&&!b.bottom&&(v.push(l+p),b.bottom=!0),o.isBound&&!b.left&&(m.push(u),b.left=!0),x.isBound&&!b.right&&(m.push(u+f),b.right=!0)})),{horizontal:v,vertical:m}}(t),d=c.vertical,h=c.horizontal;n.push.apply(n,d.filter((function(t){return n.indexOf(t)<0}))),a.push.apply(a,h.filter((function(t){return a.indexOf(t)<0})))}(t,[k,T],[I,A],q,H);var _=vr(N,x,O,0),V=vr(X,M,Y,1),j=["horizontal","left","top","width"],U=["vertical","top","left","height"],$=Mr(X,"vertical",[a,n],[O,Y]),K=Mr(N,"horizontal",[a,n],[O,Y]),Q=X.concat(N);return nt(t,"onSnap",{guidelines:Q.filter((function(t){return!t.element})),elements:lt(Q.filter((function(t){return t.element})),(function(t){return t.element})),gaps:$.concat(K)},!0),Dr(t,$,"vertical",j,y,r).concat(Dr(t,K,"horizontal",U,y,r),mr(_,j,g,x,O,n,E,C,z,0,y,r),mr(V,U,v,M,Y,a,E,C,z,1,y,r),br(H,j,g,n,O,r),br(q,U,v,a,Y,r),xr(N,j,a,n,0,r),xr(X,U,n,a,1,r))},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},er(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return qt(t)||wr(t)},dragControlStart:function(t,r){t.state.snapRenderInfo=null,er(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,r){t.state.snapRenderInfo=null,er(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null}},Er={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,r){var e=t.props.throttleDragRotate,n=t.state,a=n.dragInfo,i=n.beforeOrigin;if(e&&a){var o=a.dist;if(o[0]||o[1]){var u=N(o),l=(0,s.Mu)(o,[0,0]);return r.createElement("div",{className:w("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:u+"px",transform:"translate("+i[0]+"px, "+i[1]+"px) rotate("+l+"rad)"}})}}},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,a=r.parentDragger,i=t.state,o=i.targetTransform,s=i.target;if(i.dragger)return!1;i.dragger=a||t.targetDragger;var u=window.getComputedStyle(s);e.datas={},e.left=parseFloat(u.left||"")||0,e.top=parseFloat(u.top||"")||0,e.bottom=parseFloat(u.bottom||"")||0,e.right=parseFloat(u.right||"")||0,e.transform=o,e.startTranslate=[0,0],wt(t,{datas:e}),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,function(t,r){r.absolutePoses=Z(t.state)}(t,e);var l=et(t,r,{set:function(t){e.startTranslate=t}});return!1!==(n||nt(t,"onDragStart",l))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(i.dragger=null,e.isPinch=!1),!!e.isDrag&&l},drag:function(t,r){var e=r.datas,n=r.parentEvent,a=r.parentFlag,i=r.isPinch,o=r.isRequest,u=r.distX,l=r.distY,f=e.isDrag,p=e.prevDist,c=e.prevBeforeDist,d=e.transform,h=e.startTranslate;if(f){var g=t.props,v=g.parentMoveable,m=n?0:g.throttleDrag||0,b=n?0:g.throttleDragRotate||0,x=!1,M=0;if(!n&&b>0&&(u||l)){var D=Q(180*(0,s.Mu)([0,0],[u,l])/Math.PI,b),S=N([u,l]);M=D*Math.PI/180,u=S*Math.cos(M),l=S*Math.sin(M)}if(!i&&!n&&!a&&(u||l)){var E=dr(t,u,l,b,o,e),R=E[0],z=E[1],B=R.isSnap,C=R.isBound,w=R.offset,y=z.isSnap,G=z.isBound;x=B||y||C||G,u+=w,l+=z.offset}e.passDeltaX=u-(e.passDistX||0),e.passDeltaY=l-(e.passDistY||0),e.passDistX=u,e.passDistY=l;var P=(0,s.tY)(yt({datas:e,distX:u,distY:l},!0),h),O=(0,s.tY)(yt({datas:e,distX:u,distY:l},!1),h);b||x||(J(O,m),J(P,m));var Y=(0,s.Rd)(P,h),I=(0,s.Rd)(O,h),k=(0,s.Rd)(I,p),A=(0,s.Rd)(Y,c);e.prevDist=I,e.prevBeforeDist=Y;var T=e.left+Y[0],q=e.top+Y[1],W=e.right-Y[0],H=e.bottom-Y[1],X=d+" translate("+I[0]+"px, "+I[1]+"px)";if(t.state.dragInfo.dist=n?[0,0]:I,n||v||!k.every((function(t){return!t}))||!A.some((function(t){return!t}))){var F=et(t,r,{transform:X,dist:I,delta:k,translate:O,beforeDist:Y,beforeDelta:A,beforeTranslate:P,left:T,top:q,right:W,bottom:H,isPinch:i});return!n&&nt(t,"onDrag",F),F}}},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas,a=r.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,n.isDrag)return n.isDrag=!1,!e&&nt(t,"onDragEnd",et(t,r,{isDrag:a})),a},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=this.dragStart(t,r);if(!i)return!1;var o=Bt(t,this,"dragStart",[n||0,a||0],r,!1),s=nt(t,"onDragGroupStart",h({},i,{targets:t.props.targets,events:o}));return e.isDrag=!1!==s,!!e.isDrag&&i},dragGroup:function(t,r){if(r.datas.isDrag){var e=this.drag(t,r),n=r.datas,a=Bt(t,this,"drag",[n.passDeltaX,n.passDeltaY],r,!1);if(e){var i=h({targets:t.props.targets,events:a},e);return nt(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,r){var e=r.isDrag;if(r.datas.isDrag)return this.dragEnd(t,r),Bt(t,this,"dragEnd",[0,0],r,!1),nt(t,"onDragGroupEnd",et(t,r,{targets:t.props.targets,isDrag:e})),e},request:function(t){var r={},e=t.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(t){return{datas:r}},request:function(t){return"x"in t?n=t.x-e.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?a=t.y-e.top:"deltaY"in t&&(a+=t.deltaY),{datas:r,distX:n,distY:a}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Rr(t,r,e,n,a,i){var o=t.state.is3d?4:3,u=T(t.state.rootMatrix,a,o),l=(0,s.tY)([i.left,i.top],u);r.startAbsoluteOrigin=l,r.prevDeg=(0,s.Mu)(l,[e,n])/Math.PI*180,r.prevSnapDeg=r.prevDeg,r.startDeg=r.prevDeg,r.loop=0}function zr(t,r,e,n,a,i){var o=e.prevDeg,s=i+n,u=cr(t,r,e.origin,n);return e.prevDeg=u,[a*(u-o),u,s]}function Br(t,r,e,n,a,i,o,s){var u=e.prevDeg,l=e.prevSnapDeg,f=e.startDeg,p=e.loop;u>n&&u>270&&n<90?++e.loop:u<n&&u<90&&n>270&&--e.loop;var c=e.loop,d=360*p+l-f+i,h=360*c+n-f+i;e.prevDeg=h-360*c+f-i;var g=a*((h=Q(h,o))-i);return s&&(h=(g=cr(t,r,e.origin,g))/a+i),e.prevSnapDeg=h-360*c+f-i,[a*(h-d),g,h]}function Cr(t,r,e,n,a,i,o,u){return Br(t,r,e,(0,s.Mu)(e.startAbsoluteOrigin,[a,i])/Math.PI*180,n,o,u,!0)}function wr(t){return!!t.isRequest||(0,o.nB)(t.inputEvent.target,w("rotation"))}var yr={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,r){var e=t.props,n=e.rotatable,a=e.rotationPosition;if(!n)return null;var i=t.state,o=i.renderPoses,s=i.direction,u=function(t,r){var e=r[0],n=r[1],a=r[2],i=r[3];return"left"===t?[a,e]:"right"===t?[n,i]:"bottom"===t?[i,a]:[e,n]}(a,o),l=V(u,s);return r.createElement("div",{key:"rotation",className:w("line rotation-line"),style:{transform:"translate(-50%) translate("+(u[0][0]+u[1][0])/2+"px, "+(u[0][1]+u[1][1])/2+"px) rotate("+l+"rad)"}},r.createElement("div",{className:w("control","rotation")}))},dragControlCondition:wr,dragControlStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.parentRotate,o=r.parentFlag,s=r.isPinch,u=r.isRequest,l=t.state,f=l.target,p=l.left,c=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform;if(!u&&!f)return!1;var b=t.getRect();if(e.rect=b,e.transform=m,e.left=p,e.top=c,u||s||o){var x=i||0;e.beforeInfo={origin:b.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},e.afterInfo={origin:b.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}}else{e.beforeInfo={origin:b.beforeOrigin},e.afterInfo={origin:b.origin};var M=U(t.controlBox.getElement());Rr(t,e.beforeInfo,n,a,h,M),Rr(t,e.afterInfo,n,a,d,M)}e.direction=g,e.beforeDirection=v,e.startRotate=0,e.datas={};var D=et(t,r,{set:function(t){e.startRotate=t}}),S=nt(t,"onRotateStart",D);return e.isRotate=!1!==S,t.state.snapRenderInfo={request:r.isRequest},!!e.isRotate&&D},dragControl:function(t,r){var e,n,a,i,o,s,u=r.datas,l=r.clientX,f=r.clientY,p=r.parentRotate,c=r.parentFlag,d=r.isPinch,h=u.direction,g=u.beforeDirection,v=u.beforeInfo,m=u.afterInfo,b=u.isRotate,x=u.startRotate,M=u.rect;if(b){var D,S,E,R,z,B,C=t.props,w=C.throttleRotate,y=void 0===w?0:w,G=C.parentMoveable;if("parentDist"in r){var P=r.parentDist;D=(e=zr(t,M,m,P,h,x))[0],S=e[1],E=e[2],R=(n=zr(t,M,v,P,h,x))[0],z=n[1],B=n[2]}else d||c?(D=(a=Br(t,M,m,p,h,x,y))[0],S=a[1],E=a[2],R=(i=Br(t,M,v,p,h,x,y))[0],z=i[1],B=i[2]):(D=(o=Cr(t,M,m,h,l,f,x,y))[0],S=o[1],E=o[2],R=(s=Cr(t,M,v,g,l,f,x,y))[0],z=s[1],B=s[2]);if(D||R||G){var O=et(t,r,{delta:D,dist:S,rotate:E,beforeDist:z,beforeDelta:R,beforeRotate:B,transform:u.transform+" rotate("+S+"deg)",isPinch:!!d});return nt(t,"onRotate",O),O}}},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isRotate&&(e.isRotate=!1,nt(t,"onRotateEnd",et(t,r,{isDrag:n})),n)},dragGroupControlCondition:wr,dragGroupControlStart:function(t,r){var e=r.datas,n=r.inputEvent,a=t.state,i=a.left,o=a.top,u=a.beforeOrigin,l=this.dragControlStart(t,r);if(!l)return!1;l.set(t.rotation);var f=Ct(t,this,"dragControlStart",e,h({},r,{parentRotate:0}),(function(t,r,e){var a=t.state,l=a.left,f=a.top,p=a.beforeOrigin,c=(0,s.tY)((0,s.Rd)([l,f],[i,o]),(0,s.Rd)(p,u));r.prevClient=c,e.dragStart=Er.dragStart(t,(new zt).dragStart(c,n))})),p=nt(t,"onRotateGroupStart",h({},l,{targets:t.props.targets,events:f}));return e.isRotate=!1!==p,!!e.isRotate&&l},dragGroupControl:function(t,r){var e=r.inputEvent,n=r.datas;if(n.isRotate){var a=this.dragControl(t,r);if(a){var i=a.beforeDist,o=a.beforeDelta/180*Math.PI,u=Ct(t,this,"dragControl",n,h({},r,{parentRotate:i}),(function(t,n,a,i){var u=n.prevClient,l=u[0],f=u[1],p=(0,s.e$)([l,f],o),c=p[0],d=p[1],h=[c-l,d-f];n.prevClient=[c,d];var g=Er.drag(t,Rt(t.state,h,e,!!r.isPinch,!1));a.drag=g}));t.rotation=a.beforeRotate;var l=h({targets:t.props.targets,events:u,set:function(r){t.rotation=r}},a);return nt(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate)return this.dragControlEnd(t,r),Ct(t,this,"dragControlEnd",n,r),nt(t,"onRotateGroupEnd",et(t,r,{targets:t.props.targets,isDrag:e})),e},request:function(){var t={},r=0;return{isControl:!0,requestStart:function(r){return{datas:t}},request:function(e){return r+=e.deltaRotate,{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Gr(t,r,e){var n=t.state,a=n.renderPoses,i=n.rotation,o=t.props.renderDirections,s=void 0===o?r:o,u={};return s.forEach((function(t){u[t]=!0})),s.map((function(t){var r=B[t];if(!r||!u[t])return null;var n=(Q(i/Math.PI*180,15)+C[t])%180;return e.createElement("div",{className:w("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:L.apply(void 0,[i].concat(r.map((function(t){return a[t]}))))})}))}function Pr(t,r){return Gr(t,z,r)}function Or(t,r){return Gr(t,["nw","ne","sw","se"],r)}var Yr={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,r){var e=t.props,n=e.resizable,a=e.edge;if(n)return a?Or(t,r):Pr(t,r)},dragControlCondition:qt,dragControlStart:function(t,r){var e,n=r.inputEvent,a=r.isPinch,i=r.parentDirection,u=r.datas,l=r.parentFlag,f=i||(a?[0,0]:$(n.target)),p=t.state,c=p.target,d=p.width,h=p.height;if(!f||!c)return!1;!a&&wt(t,{datas:u}),u.datas={},u.direction=f,u.startOffsetWidth=d,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,e=function(t){var r=window.getComputedStyle(t);return[parseFloat(r.width),parseFloat(r.height)]}(c),u.startWidth=e[0],u.startHeight=e[1];var g=[Math.max(0,d-u.startWidth),Math.max(0,h-u.startHeight)];if(u.minSize=g,u.maxSize=[1/0,1/0],!l){var v=window.getComputedStyle(c);u.minSize=(0,s.tY)([parseFloat(v.minWidth)||0,parseFloat(v.minHeight)||0],g),u.maxSize=(0,s.tY)([parseFloat(v.maxWidth)||1/0,parseFloat(v.maxHeight)||1/0],g)}var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&(0,o.Kg)(m)?m.split(" "):m,u.startDirection=function(t,r){if(!r[0]&&!r[1])return[0,0];var e=t.props.baseDirection,n=void 0===e?[-1,-1]:e;return[r[0]?r[0]:-1*n[0],r[1]?r[1]:-1*n[1]]}(t,f),u.fixedPosition=Tt(t,u.startDirection),u.fixedOriginalPosition=Tt(t,f);var b=et(t,r,{direction:f,set:function(t){var r=t[0],e=t[1];u.startWidth=r,u.startHeight=e},setOrigin:function(t){u.transformOrigin=t},dragStart:Er.dragStart(t,(new zt).dragStart([0,0],n))});return!1!==nt(t,"onResizeStart",b)&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:f}),!!u.isResize&&b},dragControl:function(t,r){var e,n=r.datas,a=r.distX,i=r.distY,u=r.parentFlag,l=r.isPinch,f=r.parentDistance,p=r.parentScale,c=r.inputEvent,d=r.parentKeepRatio,h=r.dragClient,g=r.parentDist,v=r.isRequest,m=n.direction,b=n.isResize,x=n.transformOrigin;if(b){var M=n.startWidth,S=n.startHeight,E=n.startOffsetWidth,R=n.startOffsetHeight,z=n.prevWidth,B=n.prevHeight,C=n.minSize,w=n.maxSize,y=t.props,G=y.throttleResize,P=void 0===G?0:G,O=y.parentMoveable,Y=m;m[0]||m[1]||(Y=[1,1]);var I=t.props.keepRatio||d,k=Y[0]||!Y[1],A=k?R/E:E/R,T=I||u?m:n.startDirection,q=h,W=0,H=0;if(h||(q=!u&&l?Tt(t,[0,0]):I?n.fixedOriginalPosition:n.fixedPosition),g)W=g[0],H=g[1];else if(p)W=(p[0]-1)*E,H=(p[1]-1)*R;else if(l)f&&(W=f,H=f*R/E);else{var X=yt({datas:n,distX:a,distY:i});if(W=Y[0]*X[0],H=Y[1]*X[1],I&&E&&R){var F=(0,s.Mu)([0,0],X),L=(0,s.Mu)([0,0],Y),_=(0,s.Mu)([0,0],[E,R]),V=N([W,H]),j=Math.cos(F-L)*V;Y[0]?Y[1]?(W=Math.cos(_)*j,H=Math.sin(_)*j):H=ot(W=j,k,A):W=st(H=j,k,A)}}var U=Y[0]||I?Math.max(E+W,D):E,$=Y[1]||I?Math.max(R+H,D):R;I&&E&&R&&($=U*R/E);var K=[0,0];if(l||(K=function(t,r,e,n,a,i,o){if(!nr(t,"resizable"))return[0,0];var s=t.state,u=s.matrix,l=s.is3d;return pr(t,(function(t,i){return ir(u,r+t,e+i,a,n,l)}),r,e,n,a,i,o)}(t,U,$,m,n.fixedOriginalPosition,v,n)),g&&(!g[0]&&(K[0]=0),!g[1]&&(K[1]=0)),I){Y[0]&&Y[1]&&K[0]&&K[1]&&(Math.abs(K[0])>Math.abs(K[1])?K[1]=0:K[0]=0);var Z=!K[0]&&!K[1];Z&&(k?U=Q(U,P):$=Q($,P)),Y[0]&&!Y[1]||K[0]&&!K[1]||Z&&k?$=ot(U+=K[0],k,A):(!Y[0]&&Y[1]||!K[0]&&K[1]||Z&&!k)&&(U=st($+=K[1],k,A))}else U+=K[0],$+=K[1],K[0]||(U=Q(U,P)),K[1]||($=Q($,P));e=function(t,r,e,n){if(!n)return t.map((function(t,n){return Math.min(e[n],Math.max(t,r[n]))}));var a=t[0],i=t[1],o=gt(t,r,!1),s=o[0],u=o[1],l=gt(t,e,!0),f=l[0],p=l[1];return a<s||i<u?(a=s,i=u):(a>f||i>p)&&(a=f,i=p),[a,i]}([U,$],C,w,I),U=e[0],$=e[1];var J=[(W=(U=Math.round(U))-E)-z,(H=($=Math.round($))-R)-B];n.prevWidth=W,n.prevHeight=H;var tt=function(t,r,e,n,a,i){var u=t.props.groupable,l=t.state,f=l.transformOrigin,p=l.targetMatrix,c=l.offsetMatrix,d=l.is3d,h=l.width,g=l.height,v=l.left,m=l.top,b=d?4:3,x=function(t,r,e,n,a,i){return void 0===n&&(n=r),void 0===a&&(a=e),void 0===i&&(i=[0,0]),t?t.map((function(t,s){var u=(0,o.hg)(t),l=u.value,f=u.unit,p=s?a:n,c=s?e:r;return"%"===t||isNaN(l)?c*(p?i[s]/p:0):"%"!==f?l:c*l/100})):i}(i,r,e,h,g,f),M=u?v:0,D=u?m:0,S=It(a,kt(c,p,x,b),r,e,b,n);return(0,s.Rd)(S,[M,D])}(t,U,$,T,q,x);if(O||!J.every((function(t){return!t}))||!tt.every((function(t){return!t}))){var rt=et(t,r,{width:M+W,height:S+H,offsetWidth:U,offsetHeight:$,direction:m,dist:[W,H],delta:J,isPinch:!!l,drag:Er.drag(t,Rt(t.state,tt,c,!!l,!1))});return nt(t,"onResize",rt),rt}}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,a=e.startOffsetWidth,i=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(n){var u=t.state,l=u.width-(a+o),f=u.height-(i+s),p=Math.abs(l)>3,c=Math.abs(f)>3;return p&&(e.startWidth+=l,e.startOffsetWidth+=l,e.prevWidth+=l),c&&(e.startHeight+=f,e.startOffsetHeight+=f,e.prevHeight+=f),p||c?(this.dragControl(t,r),!0):void 0}},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isResize&&(e.isResize=!1,nt(t,"onResizeEnd",et(t,r,{isDrag:n})),n)},dragGroupControlCondition:qt,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=n.direction,i=Tt(t,a),o=Ct(t,this,"dragControlStart",e,(function(e,n){var o=Tt(e,a),u=(0,s.Dt)((0,s.XI)(-t.rotation/180*Math.PI,3),[o[0]-i[0],o[1]-i[1],1],3),l=u[0],f=u[1];return n.originalX=l,n.originalY=f,r})),u=h({},n,{targets:t.props.targets,events:o}),l=nt(t,"onResizeGroupStart",u);return e.isResize=!1!==l,!!e.isResize&&n},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=this.dragControl(t,r);if(n){var a=n.offsetWidth,i=n.offsetHeight,o=n.dist,u=t.props.keepRatio,l=[a/(a-o[0]),i/(i-o[1])],f=Tt(t,e.direction),p=Ct(t,this,"dragControl",e,(function(e,n){var a=(0,s.Dt)((0,s.XI)(t.rotation/180*Math.PI,3),[n.originalX*l[0],n.originalY*l[1],1],3),i=a[0],o=a[1];return h({},r,{parentDist:null,parentScale:l,dragClient:(0,s.tY)(f,[i,o]),parentKeepRatio:u})})),c=h({targets:t.props.targets,events:p},n);return nt(t,"onResizeGroup",c),c}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize)return this.dragControlEnd(t,r),Ct(t,this,"dragControlEnd",n,r),nt(t,"onResizeGroupEnd",et(t,r,{targets:t.props.targets,isDrag:e})),e},request:function(t){var r={},e=0,n=0,a=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:r,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-a.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-a.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:r,parentDist:[e,n]}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},Ir={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.edge;if(!n&&a)return i?Or(t,r):Pr(t,r)},dragControlCondition:qt,dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.parentDirection||(n?[0,0]:$(a.target)),o=t.state,s=o.width,u=o.height,l=o.targetTransform,f=o.target;if(!i||!f)return!1;n||wt(t,{datas:e}),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=i,e.width=s,e.height=u,e.startScale=[1,1],e.fixedPosition=Tt(t,i);var p=et(t,r,{direction:i,set:function(t){e.startScale=t},dragStart:Er.dragStart(t,(new zt).dragStart([0,0],a))});return!1!==nt(t,"onScaleStart",p)&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:i}),!!e.isScale&&p},dragControl:function(t,r){var e=r.datas,n=r.distX,a=r.distY,i=r.parentScale,u=r.parentDistance,l=r.parentKeepRatio,f=r.parentFlag,p=r.isPinch,c=r.inputEvent,d=r.dragClient,h=r.parentDist,g=r.isRequest,v=e.prevDist,m=e.direction,b=e.width,x=e.height,M=e.transform,D=e.isScale,E=e.startScale;if(!D)return!1;var R=t.props,z=R.throttleScale,B=R.parentMoveable,C=m;m[0]||m[1]||(C=[1,1]);var w=t.props.keepRatio||l,y=t.state,G=C[0]||!C[1],P=b*E[0],O=x*E[1],Y=G?O/P:P/O,I=1,k=1,A=d;if(d||(A=!f&&p?Tt(t,[0,0]):e.fixedPosition),h)I=(b+h[0])/b,k=(x+h[1])/x;else if(i)I=i[0],k=i[1];else if(p)u&&(I=(b+u)/b,k=(x+u*x/b)/x);else{var T=yt({datas:e,distX:n,distY:a}),q=C[0]*T[0],W=C[1]*T[1];if(w&&b&&x){var H=(0,s.Mu)([0,0],T),X=(0,s.Mu)([0,0],C),F=(0,s.Mu)([0,0],[P,O]),L=N([q,W]),_=Math.cos(H-X)*L;C[0]?C[1]?(q=Math.cos(F)*_,W=Math.sin(F)*_):W=ot(q=_,G,Y):q=st(W=_,G,Y)}I=(b+q)/b,k=(x+W)/x}I=C[0]||w?I*E[0]:E[0],k=C[1]||w?k*E[1]:E[1],0===I&&(I=(v[0]>0?1:-1)*S),0===k&&(k=(v[1]>0?1:-1)*S);var V,j=[I/E[0],k/E[1]];if(!p&&t.props.groupable){var U=(y.snapRenderInfo||{}).direction;(0,o.cy)(U)&&(U[0]||U[1])&&(y.snapRenderInfo={direction:m,request:r.isRequest})}var $=[0,0];if(p||($=function(t,r,e,n,a,i){var o=i.width,u=i.height;if(!nr(t,"scalable"))return[0,0];var l=i.is3d,f=pr(t,(function(t,a){return ir(At(i,(0,s.tY)(r,[t/o,a/u])),o,u,n,e,l)}),o,u,e,n,a,i);return[f[0]/o,f[1]/u]}(t,j,m,e.fixedPosition,g,e)),w){C[0]&&C[1]&&$[0]&&$[1]&&(Math.abs($[0])>Math.abs($[1])?$[1]=0:$[0]=0);var K=!$[0]&&!$[1];if(K&&(G?j[0]=Q(j[0]*E[0],z)/E[0]:j[1]=Q(j[1]*E[1],z)/E[1]),C[0]&&!C[1]||$[0]&&!$[1]||K&&G){j[0]+=$[0];var Z=ot(b*j[0]*E[0],G,Y);j[1]=Z/x/E[1]}else if(!C[0]&&C[1]||!$[0]&&$[1]||K&&!G){j[1]+=$[1];var J=st(x*j[1]*E[1],G,Y);j[0]=J/b/E[0]}}else j[0]+=$[0],j[1]+=$[1],$[0]||(j[0]=Q(j[0]*E[0],z)/E[0]),$[1]||(j[1]=Q(j[1]*E[1],z)/E[1]);0===j[0]&&(j[0]=(v[0]>0?1:-1)*S),0===j[1]&&(j[1]=(v[1]>0?1:-1)*S);var tt,rt,at=[j[0]/v[0],j[1]/v[1]];rt=E,V=[(tt=j)[0]*rt[0],tt[1]*rt[1]],e.prevDist=j;var it=function(t,r,e,n){var a=t.state,i=a.is3d,o=a.left,u=a.top,l=a.width,f=a.height,p=i?4:3,c=t.props.groupable,d=c?o:0,h=c?u:0,g=It(n,At(t.state,r),l,f,p,e);return(0,s.Rd)(g,[d,h])}(t,at,m,A);if(I===v[0]&&k===v[1]&&it.every((function(t){return!t}))&&!B)return!1;var ut=et(t,r,{scale:V,direction:m,dist:j,delta:at,transform:M+" scale("+I+", "+k+")",isPinch:!!p,drag:Er.drag(t,Rt(t.state,it,c,p,!1))});return nt(t,"onScale",ut),ut},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isScale&&(e.isScale=!1,nt(t,"onScaleEnd",et(t,r,{isDrag:n})),n)},dragGroupControlCondition:qt,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=n.direction,i=Tt(t,a),o=Ct(t,this,"dragControlStart",e,(function(e,n){var o=Tt(e,a),u=(0,s.Dt)((0,s.XI)(-t.rotation/180*Math.PI,3),[o[0]-i[0],o[1]-i[1],1],3),l=u[0],f=u[1];return n.originalX=l,n.originalY=f,r})),u=h({},n,{targets:t.props.targets,events:o}),l=nt(t,"onScaleGroupStart",u);return e.isScale=!1!==l,!!e.isScale&&u},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){var n=this.dragControl(t,r);if(n){var a=t.props.keepRatio,i=n.scale,o=Tt(t,e.direction),u=Ct(t,this,"dragControl",e,(function(e,n){var u=(0,s.Dt)((0,s.XI)(t.rotation/180*Math.PI,3),[n.originalX*i[0],n.originalY*i[1],1],3),l=u[0],f=u[1];return h({},r,{parentDist:null,parentScale:i,parentKeepRatio:a,dragClient:(0,s.tY)(o,[l,f])})})),l=h({targets:t.props.targets,events:u},n);return nt(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale)return this.dragControlEnd(t,r),Ct(t,this,"dragControlEnd",n,r),nt(t,"onScaleGroupEnd",et(t,r,{targets:t.props.targets,isDrag:e})),e},request:function(){var t={},r=0,e=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(n){return r+=n.deltaWidth,e+=n.deltaHeight,{datas:t,parentDist:[r,e]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function kr(t,r){return t.map((function(t,e){return(0,o.Om)(t,r[e],1,2)}))}function Ar(t,r,e){var n=(0,s.Mu)(t,r),a=(0,s.Mu)(t,e)-n;return a>=0?a:a+2*Math.PI}var Tr={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.warpable;if(!n&&!a&&i){var o=t.state,s=o.pos1,u=o.pos2,l=o.pos3,f=o.pos4,p=kr(s,u),c=kr(u,s),d=kr(s,l),h=kr(l,s),g=kr(l,f),v=kr(f,l),m=kr(u,f),b=kr(f,u);return[r.createElement("div",{className:w("line"),key:"middeLine1",style:F(p,g)}),r.createElement("div",{className:w("line"),key:"middeLine2",style:F(c,v)}),r.createElement("div",{className:w("line"),key:"middeLine3",style:F(d,m)}),r.createElement("div",{className:w("line"),key:"middeLine4",style:F(h,b)})].concat(Pr(t,r))}},dragControlCondition:function(t){return!t.isRequest&&(0,o.nB)(t.inputEvent.target,w("direction"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,a=t.props.target,i=$(n.target);if(!i||!a)return!1;var o=t.state,u=o.transformOrigin,l=o.is3d,f=o.targetTransform,p=o.targetMatrix,c=o.width,d=o.height,h=o.left,g=o.top;return e.datas={},e.targetTransform=f,e.warpTargetMatrix=l?p:(0,s._C)(p,3,4),e.targetInverseMatrix=(0,s.bn)((0,s.B8)(e.warpTargetMatrix,4),3,4),e.direction=i,e.left=h,e.top=g,wt(t,{datas:e}),e.poses=[[0,0],[c,0],[0,d],[c,d]].map((function(t){return(0,s.Rd)(t,u)})),e.nextPoses=e.poses.map((function(t){var r=t[0],n=t[1];return(0,s.Dt)(e.warpTargetMatrix,[r,n,0,1],4)})),e.startMatrix=(0,s.k8)(4),e.prevMatrix=(0,s.k8)(4),e.absolutePoses=Z(o),e.posIndexes=Gt(i),o.snapRenderInfo={request:r.isRequest,direction:i},!1!==nt(t,"onWarpStart",et(t,r,{set:function(t){e.startMatrix=t}}))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,a=r.distX,i=r.distY,o=e.targetInverseMatrix,u=e.prevMatrix,l=e.isWarp,f=e.startMatrix,p=e.poses,c=e.posIndexes,d=e.absolutePoses;if(!l)return!1;if(nr(t,"warpable")){var h=c.map((function(t){return d[t]}));h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var g=ur(t,n,h.map((function(t){return[t[0]+a,t[1]+i]}))),v=g.horizontal,m=g.vertical;i-=v.offset,a-=m.offset}var b=yt({datas:e,distX:a,distY:i},!0),x=e.nextPoses.slice();if(c.forEach((function(t){x[t]=(0,s.tY)(x[t],b)})),!M.every((function(t){return r=t.map((function(t){return p[t]})),e=t.map((function(t){return x[t]})),n=Ar(r[0],r[1],r[2]),a=Ar(e[0],e[1],e[2]),!(n>=(i=Math.PI)&&a<=i||n<=i&&a>=i);var r,e,n,a,i})))return!1;var D=(0,s.qL)(p[0],p[1],p[2],p[3],x[0],x[1],x[2],x[3]);if(!D.length)return!1;var S=(0,s.ZB)((0,s.lw)(o,D,4)),E=e.targetTransform+" matrix3d("+S.join(",")+")",R=(0,s.UZ)((0,s.B8)(u,4),S,4);return e.prevMatrix=S,nt(t,"onWarp",et(t,r,{delta:R,matrix:(0,s.UZ)(f,S,4),multiply:s.UZ,dist:S,transform:E})),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isWarp&&(e.isWarp=!1,nt(t,"onWarpEnd",et(t,r,{isDrag:n})),n)}},qr=w("area"),Wr=w("area-pieces"),Hr=w("area-piece"),Xr=w("avoid");function Nr(t){var r=t.areaElement,e=t.state,n=e.width,a=e.height;(0,o.vy)(r,Xr),r.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+a+"px"}function Fr(t){return t.createElement("div",{key:"area_pieces",className:Wr},t.createElement("div",{className:Hr}),t.createElement("div",{className:Hr}),t.createElement("div",{className:Hr}),t.createElement("div",{className:Hr}))}var Lr={name:"dragArea",props:{dragArea:Boolean},render:function(t,r){var e=t.props,n=e.target,i=e.dragArea,o=e.groupable,u=t.state,l=u.width,f=u.height,p=u.renderPoses;if(o)return[r.createElement("div",{key:"area",ref:(0,a.KR)(t,"areaElement"),className:qr}),Fr(r)];if(!n||!i)return[];var c=(0,s.qL)([0,0],[l,0],[0,f],[l,f],p[0],p[1],p[2],p[3]),d=c.length?"matrix3d("+(0,s.ZB)(c).join(",")+")":"none";return[r.createElement("div",{key:"area",ref:(0,a.KR)(t,"areaElement"),className:qr,style:{top:"0px",left:"0px",width:l+"px",height:f+"px",transformOrigin:"0 0",transform:d}}),Fr(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.inputEvent;if(!i)return!1;e.isDragArea=!1,e.inputTarget=i.target;var s=t.areaElement,u=t.state,l=u.moveableClientRect,f=u.renderPoses,p=u.rootMatrix,c=u.is3d,d=l.left,h=l.top,g=W(f),v=g.left,m=g.top,b=g.width,x=g.height,M=ct(p,[n-d,a-h],c?4:3),D=M[0],S=M[1],E=[{left:v,top:m,width:b,height:(S-=m)-10},{left:v,top:m,width:(D-=v)-10,height:x},{left:v,top:m+S+10,width:b,height:x-S-10},{left:v+D+10,top:m,width:b-D-10,height:x}],R=[].slice.call(s.nextElementSibling.children);return E.forEach((function(t,r){R[r].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),(0,o.iQ)(s,Xr),!0},drag:function(t,r){var e=r.datas;if(!r.inputEvent)return!1;e.isDragArea||(e.isDragArea=!0,Nr(t))},dragEnd:function(t,r){if(!r.inputEvent)return!1;var e=r.inputEvent,n=r.datas.isDragArea;n||Nr(t);var a=t.state.target,i=e.target;if(!n&&!t.isMoveableElement(i)){var o=a.contains(i);nt(t,"onClick",et(t,r,{isDouble:r.isDouble,inputTarget:i,isTarget:a===i,containsTarget:o}))}},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.isDragArea,a=r.datas;if(!e)return!1;n||Nr(t);var i=a.inputTarget,s=e.target;if(!n&&!t.isMoveableElement(s)&&i!==s){var u=t.props.targets,l=u.indexOf(s),f=l>-1,p=!1;-1===l&&(p=(l=(0,o.SL)(u,(function(t){return t.contains(s)})))>-1),nt(t,"onClickGroup",et(t,r,{isDouble:r.isDouble,targets:u,inputTarget:s,targetIndex:l,isTarget:f,containsTarget:p}))}}},_r={name:"origin",props:{origin:Boolean},render:function(t,r){if(!t.props.origin)return null;var e=t.state,n=e.beforeOrigin,a=e.rotation;return[r.createElement("div",{className:w("control","origin"),style:L(a,n),key:"beforeOrigin"})]}};function Vr(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var jr={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(t,r){var e=t.props.scrollContainer,n=void 0===e?t.getContainer():e,a=new f.A;r.datas.dragScroll=a;var i=r.isControl?"controlDragger":"targetDragger",o=r.targets;a.on("scroll",(function(e){var n=e.container,a=e.direction,i=et(t,r,{scrollContainer:n,direction:a}),s=o?"onScrollGroup":"onScroll";o&&(i.targets=o),nt(t,s,i)})).on("move",(function(e){var n=e.offsetX,a=e.offsetY;t[i].scrollBy(n,a,r.inputEvent,!1)})),a.dragStart(r,{container:n})},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,a=n.scrollContainer,i=void 0===a?t.getContainer():a,o=n.scrollThreshold,s=void 0===o?0:o,u=n.getScrollPosition,l=void 0===u?Vr:u;return e.drag(r,{container:i,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,h({},r,{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,h({},r,{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,h({},r,{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,h({},r,{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,h({},r,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,r){return this.drag(t,h({},r,{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,h({},r,{targets:t.props.targets}))}},Ur=[{name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Sr,Et,Er,yr,Yr,Ir,Tr,jr,Lr,{name:"padding",props:{padding:Object},render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},a=n.left,i=void 0===a?0:a,o=n.top,u=void 0===o?0:o,l=n.right,f=void 0===l?0:l,p=n.bottom,c=void 0===p?0:p,d=t.state,h=d.renderPoses,g=[d.pos1,d.pos2,d.pos3,d.pos4],v=[];return i>0&&v.push([0,2]),u>0&&v.push([0,1]),f>0&&v.push([1,3]),c>0&&v.push([2,3]),v.map((function(t,e){var n=t[0],a=t[1],i=g[n],o=g[a],u=h[n],l=h[a],f=(0,s.qL)([0,0],[100,0],[0,100],[100,100],i,o,u,l);if(f.length)return r.createElement("div",{key:"padding"+e,className:w("padding"),style:{transform:"matrix3d("+(0,s.ZB)(f).join(",")+")"}})}))}},_r],$r={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(t,r){var e=t.props.targets||[];t.moveables=[];var n=t.state,i={left:n.left,top:n.top};return e.map((function(e,n){return r.createElement(Dt,{key:"moveable"+n,ref:(0,a.DY)(t,"moveables",n),target:e,origin:!1,parentMoveable:t,parentPosition:i})}))}};function Kr(t,r){return Math.max.apply(Math,t.map((function(t){var e=t[0],n=t[1],a=t[2],i=t[3];return Math.max(e[r],n[r],a[r],i[r])})))}function Zr(t,r){return Math.min.apply(Math,t.map((function(t){var e=t[0],n=t[1],a=t[2],i=t[3];return Math.min(e[r],n[r],a[r],i[r])})))}var Qr=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.differ=new p.A,r.moveables=[],r.rotation=0,r}d(r,t);var e=r.prototype;return e.updateEvent=function(t){var r=this.state,e=this.props;r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=mt(this,r.target,"Group"),this.controlDragger=bt(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var n=!ut(t.container,e.container);n&&(r.container=e.container);var a=this.differ.update(e.targets),i=a.added,o=a.changed,s=a.removed;(n||i.length||o.length||s.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(t,r,e){var n;if(void 0===e&&(e=!0),this.controlBox){this.moveables.forEach((function(r){r.updateRect(t,!1,!1)}));var a=this.state,i=this.props,o=a.target||i.target;(!r||""!==t&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate);var u=this.rotation,l=function(t,r){if(!t.length)return[0,0,0,0];var e=t.map((function(t){return Z(t.state)})),n=E,a=E,i=0,o=0,u=Q(r,D);if(u%90){var l=r/180*Math.PI,f=Math.tan(l),p=-1/f,c=[R,E],d=[R,E];e.forEach((function(t){t.forEach((function(t){var r=t[1]-f*t[0],e=t[1]-p*t[0];c[0]=Math.max(c[0],r),c[1]=Math.min(c[1],r),d[0]=Math.max(d[0],e),d[1]=Math.min(d[1],e)}))})),c.forEach((function(t){d.forEach((function(r){var e=(r-t)/(f-p),i=f*e+t;n=Math.min(n,e),a=Math.min(a,i)}))}));var h=e.map((function(t){var r=t[0],e=t[1],n=t[2],a=t[3];return[(0,s.e$)(r,-l),(0,s.e$)(e,-l),(0,s.e$)(n,-l),(0,s.e$)(a,-l)]}));i=Kr(h,0)-Zr(h,0),o=Kr(h,1)-Zr(h,1)}else if(n=Zr(e,0),a=Zr(e,1),i=Kr(e,0)-n,o=Kr(e,1)-a,u%180){var g=i;i=o,o=g}return[n,a,i,o]}(this.moveables,u),f=l[0],p=l[1],c=l[2],d=l[3];o.style.cssText+="left:0px;top:0px;width:"+c+"px; height:"+d+"px;transform:rotate("+u+"deg)",a.width=c,a.height=d;var g=this.getContainer(),v=j(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||g,a),m=[v.left,v.top];n=Z(v),v.pos1=n[0],v.pos2=n[1],v.pos3=n[2],v.pos4=n[3],v.origin=(0,s.tY)(m,v.origin),v.beforeOrigin=(0,s.tY)(m,v.beforeOrigin);var b=v.targetClientRect;b.top+=p-v.top-a.top,b.left+=f-v.left-a.left,this.updateState(h({},v,{left:f-v.left,top:p-v.top}),e)}},e.triggerEvent=function(r,e){if(r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,e)},e.updateAbles=function(){t.prototype.updateAbles.call(this,this.props.ables.concat([$r]),"Group")},r.defaultProps=h({},Dt.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),r}(Dt);const Jr=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}d(r,t);var e=r.prototype;return e.render=function(){var t=this.props.ables||[],r=this.props.target||this.props.targets,e=(0,o.cy)(r);if(e&&r.length>1){var i=h({},this.props,{target:null,targets:r,ables:Ur.concat([$r],t)});return(0,n.createElement)(Qr,h({key:"group",ref:(0,a.KR)(this,"moveable")},i))}var s=e?r[0]:r;return(0,n.createElement)(Dt,h({key:"single",ref:(0,a.KR)(this,"moveable")},h({},this.props,{target:s,ables:Ur.concat(t)})))},e.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},e.dragStart=function(t){this.moveable.dragStart(t)},e.isInside=function(t,r){return this.moveable.isInside(t,r)},e.hitTest=function(t){return this.moveable.hitTest(t)},e.updateRect=function(){this.moveable.updateRect()},e.updateTarget=function(){this.moveable.updateTarget()},e.isDragging=function(){return this.moveable.isDragging()},e.getRect=function(){return this.moveable.getRect()},e.request=function(t,r){return this.moveable.request(t,r)},e.destroy=function(){this.moveable.componentWillUnmount()},r}(n.PureComponent)}}]);
//# sourceMappingURL=vendor.react-moveable.25492d255717489f845a.js.map